(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function So(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var uf={exports:{}},Ka={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy;function xT(){if(qy)return Ka;qy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var h in o)h!=="key"&&(c[h]=o[h])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Ka.Fragment=e,Ka.jsx=n,Ka.jsxs=n,Ka}var Yy;function AT(){return Yy||(Yy=1,uf.exports=xT()),uf.exports}var m=AT(),df={exports:{}},Ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function DT(){if(Fy)return Ae;Fy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function E(C){return C===null||typeof C!="object"?null:(C=b&&C[b]||C["@@iterator"],typeof C=="function"?C:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,L={};function x(C,$,U){this.props=C,this.context=$,this.refs=L,this.updater=U||O}x.prototype.isReactComponent={},x.prototype.setState=function(C,$){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,$,"setState")},x.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function P(){}P.prototype=x.prototype;function Y(C,$,U){this.props=C,this.context=$,this.refs=L,this.updater=U||O}var J=Y.prototype=new P;J.constructor=Y,T(J,x.prototype),J.isPureReactComponent=!0;var te=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},re=Object.prototype.hasOwnProperty;function de(C,$,U,B,F,me){return U=me.ref,{$$typeof:i,type:C,key:$,ref:U!==void 0?U:null,props:me}}function se(C,$){return de(C.type,$,void 0,void 0,void 0,C.props)}function fe(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function Re(C){var $={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(U){return $[U]})}var Ce=/\/+/g;function he(C,$){return typeof C=="object"&&C!==null&&C.key!=null?Re(""+C.key):$.toString(36)}function xe(){}function Ze(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(xe,xe):(C.status="pending",C.then(function($){C.status==="pending"&&(C.status="fulfilled",C.value=$)},function($){C.status==="pending"&&(C.status="rejected",C.reason=$)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function je(C,$,U,B,F){var me=typeof C;(me==="undefined"||me==="boolean")&&(C=null);var ae=!1;if(C===null)ae=!0;else switch(me){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(C.$$typeof){case i:case e:ae=!0;break;case _:return ae=C._init,je(ae(C._payload),$,U,B,F)}}if(ae)return F=F(C),ae=B===""?"."+he(C,0):B,te(F)?(U="",ae!=null&&(U=ae.replace(Ce,"$&/")+"/"),je(F,$,U,"",function(oe){return oe})):F!=null&&(fe(F)&&(F=se(F,U+(F.key==null||C&&C.key===F.key?"":(""+F.key).replace(Ce,"$&/")+"/")+ae)),$.push(F)),1;ae=0;var Z=B===""?".":B+":";if(te(C))for(var z=0;z<C.length;z++)B=C[z],me=Z+he(B,z),ae+=je(B,$,U,me,F);else if(z=E(C),typeof z=="function")for(C=z.call(C),z=0;!(B=C.next()).done;)B=B.value,me=Z+he(B,z++),ae+=je(B,$,U,me,F);else if(me==="object"){if(typeof C.then=="function")return je(Ze(C),$,U,B,F);throw $=String(C),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ae}function M(C,$,U){if(C==null)return C;var B=[],F=0;return je(C,B,"","",function(me){return $.call(U,me,F++)}),B}function ee(C){if(C._status===-1){var $=C._result;$=$(),$.then(function(U){(C._status===0||C._status===-1)&&(C._status=1,C._result=U)},function(U){(C._status===0||C._status===-1)&&(C._status=2,C._result=U)}),C._status===-1&&(C._status=0,C._result=$)}if(C._status===1)return C._result.default;throw C._result}var ce=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Te(){}return Ae.Children={map:M,forEach:function(C,$,U){M(C,function(){$.apply(this,arguments)},U)},count:function(C){var $=0;return M(C,function(){$++}),$},toArray:function(C){return M(C,function($){return $})||[]},only:function(C){if(!fe(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ae.Component=x,Ae.Fragment=n,Ae.Profiler=o,Ae.PureComponent=Y,Ae.StrictMode=s,Ae.Suspense=p,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(C){return W.H.useMemoCache(C)}},Ae.cache=function(C){return function(){return C.apply(null,arguments)}},Ae.cloneElement=function(C,$,U){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var B=T({},C.props),F=C.key,me=void 0;if($!=null)for(ae in $.ref!==void 0&&(me=void 0),$.key!==void 0&&(F=""+$.key),$)!re.call($,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&$.ref===void 0||(B[ae]=$[ae]);var ae=arguments.length-2;if(ae===1)B.children=U;else if(1<ae){for(var Z=Array(ae),z=0;z<ae;z++)Z[z]=arguments[z+2];B.children=Z}return de(C.type,F,void 0,void 0,me,B)},Ae.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:c,_context:C},C},Ae.createElement=function(C,$,U){var B,F={},me=null;if($!=null)for(B in $.key!==void 0&&(me=""+$.key),$)re.call($,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(F[B]=$[B]);var ae=arguments.length-2;if(ae===1)F.children=U;else if(1<ae){for(var Z=Array(ae),z=0;z<ae;z++)Z[z]=arguments[z+2];F.children=Z}if(C&&C.defaultProps)for(B in ae=C.defaultProps,ae)F[B]===void 0&&(F[B]=ae[B]);return de(C,me,void 0,void 0,null,F)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(C){return{$$typeof:h,render:C}},Ae.isValidElement=fe,Ae.lazy=function(C){return{$$typeof:_,_payload:{_status:-1,_result:C},_init:ee}},Ae.memo=function(C,$){return{$$typeof:g,type:C,compare:$===void 0?null:$}},Ae.startTransition=function(C){var $=W.T,U={};W.T=U;try{var B=C(),F=W.S;F!==null&&F(U,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(Te,ce)}catch(me){ce(me)}finally{W.T=$}},Ae.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Ae.use=function(C){return W.H.use(C)},Ae.useActionState=function(C,$,U){return W.H.useActionState(C,$,U)},Ae.useCallback=function(C,$){return W.H.useCallback(C,$)},Ae.useContext=function(C){return W.H.useContext(C)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(C,$){return W.H.useDeferredValue(C,$)},Ae.useEffect=function(C,$,U){var B=W.H;if(typeof U=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return B.useEffect(C,$)},Ae.useId=function(){return W.H.useId()},Ae.useImperativeHandle=function(C,$,U){return W.H.useImperativeHandle(C,$,U)},Ae.useInsertionEffect=function(C,$){return W.H.useInsertionEffect(C,$)},Ae.useLayoutEffect=function(C,$){return W.H.useLayoutEffect(C,$)},Ae.useMemo=function(C,$){return W.H.useMemo(C,$)},Ae.useOptimistic=function(C,$){return W.H.useOptimistic(C,$)},Ae.useReducer=function(C,$,U){return W.H.useReducer(C,$,U)},Ae.useRef=function(C){return W.H.useRef(C)},Ae.useState=function(C){return W.H.useState(C)},Ae.useSyncExternalStore=function(C,$,U){return W.H.useSyncExternalStore(C,$,U)},Ae.useTransition=function(){return W.H.useTransition()},Ae.version="19.1.0",Ae}var Wy;function Bh(){return Wy||(Wy=1,df.exports=DT()),df.exports}var A=Bh();const X=So(A);var ff={exports:{}},Xa={},hf={exports:{}},pf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function IT(){return Qy||(Qy=1,function(i){function e(M,ee){var ce=M.length;M.push(ee);e:for(;0<ce;){var Te=ce-1>>>1,C=M[Te];if(0<o(C,ee))M[Te]=ee,M[ce]=C,ce=Te;else break e}}function n(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var ee=M[0],ce=M.pop();if(ce!==ee){M[0]=ce;e:for(var Te=0,C=M.length,$=C>>>1;Te<$;){var U=2*(Te+1)-1,B=M[U],F=U+1,me=M[F];if(0>o(B,ce))F<C&&0>o(me,B)?(M[Te]=me,M[F]=ce,Te=F):(M[Te]=B,M[U]=ce,Te=U);else if(F<C&&0>o(me,ce))M[Te]=me,M[F]=ce,Te=F;else break e}}return ee}function o(M,ee){var ce=M.sortIndex-ee.sortIndex;return ce!==0?ce:M.id-ee.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var p=[],g=[],_=1,b=null,E=3,O=!1,T=!1,L=!1,x=!1,P=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function te(M){for(var ee=n(g);ee!==null;){if(ee.callback===null)s(g);else if(ee.startTime<=M)s(g),ee.sortIndex=ee.expirationTime,e(p,ee);else break;ee=n(g)}}function W(M){if(L=!1,te(M),!T)if(n(p)!==null)T=!0,re||(re=!0,he());else{var ee=n(g);ee!==null&&je(W,ee.startTime-M)}}var re=!1,de=-1,se=5,fe=-1;function Re(){return x?!0:!(i.unstable_now()-fe<se)}function Ce(){if(x=!1,re){var M=i.unstable_now();fe=M;var ee=!0;try{e:{T=!1,L&&(L=!1,Y(de),de=-1),O=!0;var ce=E;try{t:{for(te(M),b=n(p);b!==null&&!(b.expirationTime>M&&Re());){var Te=b.callback;if(typeof Te=="function"){b.callback=null,E=b.priorityLevel;var C=Te(b.expirationTime<=M);if(M=i.unstable_now(),typeof C=="function"){b.callback=C,te(M),ee=!0;break t}b===n(p)&&s(p),te(M)}else s(p);b=n(p)}if(b!==null)ee=!0;else{var $=n(g);$!==null&&je(W,$.startTime-M),ee=!1}}break e}finally{b=null,E=ce,O=!1}ee=void 0}}finally{ee?he():re=!1}}}var he;if(typeof J=="function")he=function(){J(Ce)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Ze=xe.port2;xe.port1.onmessage=Ce,he=function(){Ze.postMessage(null)}}else he=function(){P(Ce,0)};function je(M,ee){de=P(function(){M(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(M){M.callback=null},i.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<M?Math.floor(1e3/M):5},i.unstable_getCurrentPriorityLevel=function(){return E},i.unstable_next=function(M){switch(E){case 1:case 2:case 3:var ee=3;break;default:ee=E}var ce=E;E=ee;try{return M()}finally{E=ce}},i.unstable_requestPaint=function(){x=!0},i.unstable_runWithPriority=function(M,ee){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ce=E;E=M;try{return ee()}finally{E=ce}},i.unstable_scheduleCallback=function(M,ee,ce){var Te=i.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Te+ce:Te):ce=Te,M){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=ce+C,M={id:_++,callback:ee,priorityLevel:M,startTime:ce,expirationTime:C,sortIndex:-1},ce>Te?(M.sortIndex=ce,e(g,M),n(p)===null&&M===n(g)&&(L?(Y(de),de=-1):L=!0,je(W,ce-Te))):(M.sortIndex=C,e(p,M),T||O||(T=!0,re||(re=!0,he()))),M},i.unstable_shouldYield=Re,i.unstable_wrapCallback=function(M){var ee=E;return function(){var ce=E;E=ee;try{return M.apply(this,arguments)}finally{E=ce}}}}(pf)),pf}var Ky;function kT(){return Ky||(Ky=1,hf.exports=IT()),hf.exports}var gf={exports:{}},Ht={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function jT(){if(Xy)return Ht;Xy=1;var i=Bh();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,g,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:g,implementation:_}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ht.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(p,g,null,_)},Ht.flushSync=function(p){var g=d.T,_=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=g,s.p=_,s.d.f()}},Ht.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Ht.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Ht.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,b=h(_,g.crossOrigin),E=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:E,fetchPriority:O}):_==="script"&&s.d.X(p,{crossOrigin:b,integrity:E,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ht.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=h(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Ht.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,b=h(_,g.crossOrigin);s.d.L(p,_,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ht.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=h(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Ht.requestFormReset=function(p){s.d.r(p)},Ht.unstable_batchedUpdates=function(p,g){return p(g)},Ht.useFormState=function(p,g,_){return d.H.useFormState(p,g,_)},Ht.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ht.version="19.1.0",Ht}var Zy;function Nb(){if(Zy)return gf.exports;Zy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),gf.exports=jT(),gf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function MT(){if(Jy)return Xa;Jy=1;var i=kT(),e=Bh(),n=Nb();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function h(t){if(c(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var u=a.return;if(u===null)break;var f=u.alternate;if(f===null){if(l=u.return,l!==null){a=l;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===a)return h(u),t;if(f===l)return h(u),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=u,l=f;else{for(var v=!1,y=u.child;y;){if(y===a){v=!0,a=u,l=f;break}if(y===l){v=!0,l=u,a=f;break}y=y.sibling}if(!v){for(y=f.child;y;){if(y===a){v=!0,a=f,l=u;break}if(y===l){v=!0,l=f,a=u;break}y=y.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),J=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),fe=Symbol.for("react.activity"),Re=Symbol.for("react.memo_cache_sentinel"),Ce=Symbol.iterator;function he(t){return t===null||typeof t!="object"?null:(t=Ce&&t[Ce]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Symbol.for("react.client.reference");function Ze(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===xe?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case T:return"Fragment";case x:return"Profiler";case L:return"StrictMode";case W:return"Suspense";case re:return"SuspenseList";case fe:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case J:return(t.displayName||"Context")+".Provider";case Y:return(t._context.displayName||"Context")+".Consumer";case te:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case de:return r=t.displayName||null,r!==null?r:Ze(t.type)||"Memo";case se:r=t._payload,t=t._init;try{return Ze(t(r))}catch{}}return null}var je=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Te=[],C=-1;function $(t){return{current:t}}function U(t){0>C||(t.current=Te[C],Te[C]=null,C--)}function B(t,r){C++,Te[C]=t.current,t.current=r}var F=$(null),me=$(null),ae=$(null),Z=$(null);function z(t,r){switch(B(ae,r),B(me,t),B(F,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?_y(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=_y(r),t=by(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}U(F),B(F,t)}function oe(){U(F),U(me),U(ae)}function ge(t){t.memoizedState!==null&&B(Z,t);var r=F.current,a=by(r,t.type);r!==a&&(B(me,t),B(F,a))}function $e(t){me.current===t&&(U(F),U(me)),Z.current===t&&(U(Z),qa._currentValue=ce)}var Be=Object.prototype.hasOwnProperty,fn=i.unstable_scheduleCallback,Lt=i.unstable_cancelCallback,Hn=i.unstable_shouldYield,Zs=i.unstable_requestPaint,Yt=i.unstable_now,Js=i.unstable_getCurrentPriorityLevel,Gr=i.unstable_ImmediatePriority,fr=i.unstable_UserBlockingPriority,Ci=i.unstable_NormalPriority,Ve=i.unstable_LowPriority,hn=i.unstable_IdlePriority,Po=i.log,Uo=i.unstable_setDisableYieldValue,Ti=null,Ft=null;function Xn(t){if(typeof Po=="function"&&Uo(t),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Ti,t)}catch{}}var Wt=Math.clz32?Math.clz32:og,sg=Math.log,ag=Math.LN2;function og(t){return t>>>=0,t===0?32:31-(sg(t)/ag|0)|0}var ea=256,ta=4194304;function wi(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function na(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var u=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var y=l&134217727;return y!==0?(l=y&~f,l!==0?u=wi(l):(v&=y,v!==0?u=wi(v):a||(a=y&~t,a!==0&&(u=wi(a))))):(y=l&~f,y!==0?u=wi(y):v!==0?u=wi(v):a||(a=l&~t,a!==0&&(u=wi(a)))),u===0?0:r!==0&&r!==u&&(r&f)===0&&(f=u&-u,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:u}function qr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function lg(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nu(){var t=ea;return ea<<=1,(ea&4194048)===0&&(ea=256),t}function zo(){var t=ta;return ta<<=1,(ta&62914560)===0&&(ta=4194304),t}function I(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Q(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function q(t,r,a,l,u,f){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var y=t.entanglements,S=t.expirationTimes,D=t.hiddenUpdates;for(a=v&~a;0<a;){var H=31-Wt(a),G=1<<H;y[H]=0,S[H]=-1;var k=D[H];if(k!==null)for(D[H]=null,H=0;H<k.length;H++){var j=k[H];j!==null&&(j.lane&=-536870913)}a&=~G}l!==0&&ie(t,l,0),f!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~r))}function ie(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Wt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function ve(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Wt(a),u=1<<l;u&r|t[l]&r&&(t[l]|=r),a&=~u}}function Ie(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ge(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function lt(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:zy(t.type))}function Pt(t,r){var a=ee.p;try{return ee.p=t,r()}finally{ee.p=a}}var ct=Math.random().toString(36).slice(2),it="__reactFiber$"+ct,We="__reactProps$"+ct,Et="__reactContainer$"+ct,Vt="__reactEvents$"+ct,ia="__reactListeners$"+ct,Ho="__reactHandles$"+ct,pn="__reactResources$"+ct,Bn="__reactMarker$"+ct;function gn(t){delete t[it],delete t[We],delete t[Vt],delete t[ia],delete t[Ho]}function Qt(t){var r=t[it];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Et]||a[it]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Ty(t);t!==null;){if(a=t[it])return a;t=Ty(t)}return r}t=a,a=t.parentNode}return null}function mn(t){if(t=t[it]||t[Et]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Ut(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function xn(t){var r=t[pn];return r||(r=t[pn]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ht(t){t[Bn]=!0}var Yr=new Set,cg={};function hr(t,r){Fr(t,r),Fr(t+"Capture",r)}function Fr(t,r){for(cg[t]=r,t=0;t<r.length;t++)Yr.add(r[t])}var ES=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ug={},dg={};function SS(t){return Be.call(dg,t)?!0:Be.call(ug,t)?!1:ES.test(t)?dg[t]=!0:(ug[t]=!0,!1)}function Bo(t,r,a){if(SS(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Vo(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Zn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var iu,fg;function Wr(t){if(iu===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);iu=r&&r[1]||"",fg=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+iu+t+fg}var ru=!1;function su(t,r){if(!t||ru)return"";ru=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(j){var k=j}Reflect.construct(t,[],G)}else{try{G.call()}catch(j){k=j}t.call(G.prototype)}}else{try{throw Error()}catch(j){k=j}(G=t())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(j){if(j&&k&&typeof j.stack=="string")return[j.stack,k.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),v=f[0],y=f[1];if(v&&y){var S=v.split(`
`),D=y.split(`
`);for(u=l=0;l<S.length&&!S[l].includes("DetermineComponentFrameRoot");)l++;for(;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;if(l===S.length||u===D.length)for(l=S.length-1,u=D.length-1;1<=l&&0<=u&&S[l]!==D[u];)u--;for(;1<=l&&0<=u;l--,u--)if(S[l]!==D[u]){if(l!==1||u!==1)do if(l--,u--,0>u||S[l]!==D[u]){var H=`
`+S[l].replace(" at new "," at ");return t.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",t.displayName)),H}while(1<=l&&0<=u);break}}}finally{ru=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Wr(a):""}function CS(t){switch(t.tag){case 26:case 27:case 5:return Wr(t.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 15:return su(t.type,!1);case 11:return su(t.type.render,!1);case 1:return su(t.type,!0);case 31:return Wr("Activity");default:return""}}function hg(t){try{var r="";do r+=CS(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function vn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pg(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function TS(t){var r=pg(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return u.call(this)},set:function(v){l=""+v,f.call(this,v)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function $o(t){t._valueTracker||(t._valueTracker=TS(t))}function gg(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=pg(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Go(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var wS=/[\n"\\]/g;function yn(t){return t.replace(wS,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function au(t,r,a,l,u,f,v,y){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+vn(r)):t.value!==""+vn(r)&&(t.value=""+vn(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?ou(t,v,vn(r)):a!=null?ou(t,v,vn(a)):l!=null&&t.removeAttribute("value"),u==null&&f!=null&&(t.defaultChecked=!!f),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.name=""+vn(y):t.removeAttribute("name")}function mg(t,r,a,l,u,f,v,y){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+vn(a):"",r=r!=null?""+vn(r):a,y||r===t.value||(t.value=r),t.defaultValue=r}l=l??u,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=y?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function ou(t,r,a){r==="number"&&Go(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Qr(t,r,a,l){if(t=t.options,r){r={};for(var u=0;u<a.length;u++)r["$"+a[u]]=!0;for(a=0;a<t.length;a++)u=r.hasOwnProperty("$"+t[a].value),t[a].selected!==u&&(t[a].selected=u),u&&l&&(t[a].defaultSelected=!0)}else{for(a=""+vn(a),r=null,u=0;u<t.length;u++){if(t[u].value===a){t[u].selected=!0,l&&(t[u].defaultSelected=!0);return}r!==null||t[u].disabled||(r=t[u])}r!==null&&(r.selected=!0)}}function vg(t,r,a){if(r!=null&&(r=""+vn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+vn(a):""}function yg(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(je(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=vn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Kr(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var OS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _g(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||OS.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function bg(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var u in r)l=r[u],r.hasOwnProperty(u)&&a[u]!==l&&_g(t,u,l)}else for(var f in r)r.hasOwnProperty(f)&&_g(t,f,r[f])}function lu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),NS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qo(t){return NS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var cu=null;function uu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xr=null,Zr=null;function Eg(t){var r=mn(t);if(r&&(t=r.stateNode)){var a=t[We]||null;e:switch(t=r.stateNode,r.type){case"input":if(au(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var u=l[We]||null;if(!u)throw Error(s(90));au(l,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&gg(l)}break e;case"textarea":vg(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Qr(t,!!a.multiple,r,!1)}}}var du=!1;function Sg(t,r,a){if(du)return t(r,a);du=!0;try{var l=t(r);return l}finally{if(du=!1,(Xr!==null||Zr!==null)&&(Al(),Xr&&(r=Xr,t=Zr,Zr=Xr=null,Eg(r),t)))for(r=0;r<t.length;r++)Eg(t[r])}}function ra(t,r){var a=t.stateNode;if(a===null)return null;var l=a[We]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fu=!1;if(Jn)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){fu=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{fu=!1}var Oi=null,hu=null,Yo=null;function Cg(){if(Yo)return Yo;var t,r=hu,a=r.length,l,u="value"in Oi?Oi.value:Oi.textContent,f=u.length;for(t=0;t<a&&r[t]===u[t];t++);var v=a-t;for(l=1;l<=v&&r[a-l]===u[f-l];l++);return Yo=u.slice(t,1<l?1-l:void 0)}function Fo(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Wo(){return!0}function Tg(){return!1}function Kt(t){function r(a,l,u,f,v){this._reactName=a,this._targetInst=u,this.type=l,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var y in t)t.hasOwnProperty(y)&&(a=t[y],this[y]=a?a(f):f[y]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Wo:Tg,this.isPropagationStopped=Tg,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),r}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=Kt(pr),aa=_({},pr,{view:0,detail:0}),xS=Kt(aa),pu,gu,oa,Ko=_({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oa&&(oa&&t.type==="mousemove"?(pu=t.screenX-oa.screenX,gu=t.screenY-oa.screenY):gu=pu=0,oa=t),pu)},movementY:function(t){return"movementY"in t?t.movementY:gu}}),wg=Kt(Ko),AS=_({},Ko,{dataTransfer:0}),DS=Kt(AS),IS=_({},aa,{relatedTarget:0}),mu=Kt(IS),kS=_({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),jS=Kt(kS),MS=_({},pr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LS=Kt(MS),PS=_({},pr,{data:0}),Og=Kt(PS),US={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BS(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=HS[t])?!!r[t]:!1}function vu(){return BS}var VS=_({},aa,{key:function(t){if(t.key){var r=US[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Fo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vu,charCode:function(t){return t.type==="keypress"?Fo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$S=Kt(VS),GS=_({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rg=Kt(GS),qS=_({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vu}),YS=Kt(qS),FS=_({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),WS=Kt(FS),QS=_({},Ko,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KS=Kt(QS),XS=_({},pr,{newState:0,oldState:0}),ZS=Kt(XS),JS=[9,13,27,32],yu=Jn&&"CompositionEvent"in window,la=null;Jn&&"documentMode"in document&&(la=document.documentMode);var eC=Jn&&"TextEvent"in window&&!la,Ng=Jn&&(!yu||la&&8<la&&11>=la),xg=" ",Ag=!1;function Dg(t,r){switch(t){case"keyup":return JS.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ig(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jr=!1;function tC(t,r){switch(t){case"compositionend":return Ig(r);case"keypress":return r.which!==32?null:(Ag=!0,xg);case"textInput":return t=r.data,t===xg&&Ag?null:t;default:return null}}function nC(t,r){if(Jr)return t==="compositionend"||!yu&&Dg(t,r)?(t=Cg(),Yo=hu=Oi=null,Jr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ng&&r.locale!=="ko"?null:r.data;default:return null}}var iC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!iC[t.type]:r==="textarea"}function jg(t,r,a,l){Xr?Zr?Zr.push(l):Zr=[l]:Xr=l,r=Ll(r,"onChange"),0<r.length&&(a=new Qo("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var ca=null,ua=null;function rC(t){py(t,0)}function Xo(t){var r=Ut(t);if(gg(r))return t}function Mg(t,r){if(t==="change")return r}var Lg=!1;if(Jn){var _u;if(Jn){var bu="oninput"in document;if(!bu){var Pg=document.createElement("div");Pg.setAttribute("oninput","return;"),bu=typeof Pg.oninput=="function"}_u=bu}else _u=!1;Lg=_u&&(!document.documentMode||9<document.documentMode)}function Ug(){ca&&(ca.detachEvent("onpropertychange",zg),ua=ca=null)}function zg(t){if(t.propertyName==="value"&&Xo(ua)){var r=[];jg(r,ua,t,uu(t)),Sg(rC,r)}}function sC(t,r,a){t==="focusin"?(Ug(),ca=r,ua=a,ca.attachEvent("onpropertychange",zg)):t==="focusout"&&Ug()}function aC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xo(ua)}function oC(t,r){if(t==="click")return Xo(r)}function lC(t,r){if(t==="input"||t==="change")return Xo(r)}function cC(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var sn=typeof Object.is=="function"?Object.is:cC;function da(t,r){if(sn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var u=a[l];if(!Be.call(r,u)||!sn(t[u],r[u]))return!1}return!0}function Hg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bg(t,r){var a=Hg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Hg(a)}}function Vg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Vg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function $g(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Go(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Go(t.document)}return r}function Eu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var uC=Jn&&"documentMode"in document&&11>=document.documentMode,es=null,Su=null,fa=null,Cu=!1;function Gg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cu||es==null||es!==Go(l)||(l=es,"selectionStart"in l&&Eu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),fa&&da(fa,l)||(fa=l,l=Ll(Su,"onSelect"),0<l.length&&(r=new Qo("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=es)))}function gr(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var ts={animationend:gr("Animation","AnimationEnd"),animationiteration:gr("Animation","AnimationIteration"),animationstart:gr("Animation","AnimationStart"),transitionrun:gr("Transition","TransitionRun"),transitionstart:gr("Transition","TransitionStart"),transitioncancel:gr("Transition","TransitionCancel"),transitionend:gr("Transition","TransitionEnd")},Tu={},qg={};Jn&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function mr(t){if(Tu[t])return Tu[t];if(!ts[t])return t;var r=ts[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in qg)return Tu[t]=r[a];return t}var Yg=mr("animationend"),Fg=mr("animationiteration"),Wg=mr("animationstart"),dC=mr("transitionrun"),fC=mr("transitionstart"),hC=mr("transitioncancel"),Qg=mr("transitionend"),Kg=new Map,wu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wu.push("scrollEnd");function An(t,r){Kg.set(t,r),hr(r,[t])}var Xg=new WeakMap;function _n(t,r){if(typeof t=="object"&&t!==null){var a=Xg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:hg(r)},Xg.set(t,r),r)}return{value:t,source:r,stack:hg(r)}}var bn=[],ns=0,Ou=0;function Zo(){for(var t=ns,r=Ou=ns=0;r<t;){var a=bn[r];bn[r++]=null;var l=bn[r];bn[r++]=null;var u=bn[r];bn[r++]=null;var f=bn[r];if(bn[r++]=null,l!==null&&u!==null){var v=l.pending;v===null?u.next=u:(u.next=v.next,v.next=u),l.pending=u}f!==0&&Zg(a,u,f)}}function Jo(t,r,a,l){bn[ns++]=t,bn[ns++]=r,bn[ns++]=a,bn[ns++]=l,Ou|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ru(t,r,a,l){return Jo(t,r,a,l),el(t)}function is(t,r){return Jo(t,null,null,r),el(t)}function Zg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var u=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(u=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,u&&r!==null&&(u=31-Wt(a),t=f.hiddenUpdates,l=t[u],l===null?t[u]=[r]:l.push(r),r.lane=a|536870912),f):null}function el(t){if(50<Pa)throw Pa=0,kd=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var rs={};function pC(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(t,r,a,l){return new pC(t,r,a,l)}function Nu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ei(t,r){var a=t.alternate;return a===null?(a=an(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Jg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function tl(t,r,a,l,u,f){var v=0;if(l=t,typeof t=="function")Nu(t)&&(v=1);else if(typeof t=="string")v=mT(t,a,F.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case fe:return t=an(31,a,r,u),t.elementType=fe,t.lanes=f,t;case T:return vr(a.children,u,f,r);case L:v=8,u|=24;break;case x:return t=an(12,a,r,u|2),t.elementType=x,t.lanes=f,t;case W:return t=an(13,a,r,u),t.elementType=W,t.lanes=f,t;case re:return t=an(19,a,r,u),t.elementType=re,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P:case J:v=10;break e;case Y:v=9;break e;case te:v=11;break e;case de:v=14;break e;case se:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=an(v,a,r,u),r.elementType=t,r.type=l,r.lanes=f,r}function vr(t,r,a,l){return t=an(7,t,l,r),t.lanes=a,t}function xu(t,r,a){return t=an(6,t,null,r),t.lanes=a,t}function Au(t,r,a){return r=an(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var ss=[],as=0,nl=null,il=0,En=[],Sn=0,yr=null,ti=1,ni="";function _r(t,r){ss[as++]=il,ss[as++]=nl,nl=t,il=r}function em(t,r,a){En[Sn++]=ti,En[Sn++]=ni,En[Sn++]=yr,yr=t;var l=ti;t=ni;var u=32-Wt(l)-1;l&=~(1<<u),a+=1;var f=32-Wt(r)+u;if(30<f){var v=u-u%5;f=(l&(1<<v)-1).toString(32),l>>=v,u-=v,ti=1<<32-Wt(r)+u|a<<u|l,ni=f+t}else ti=1<<f|a<<u|l,ni=t}function Du(t){t.return!==null&&(_r(t,1),em(t,1,0))}function Iu(t){for(;t===nl;)nl=ss[--as],ss[as]=null,il=ss[--as],ss[as]=null;for(;t===yr;)yr=En[--Sn],En[Sn]=null,ni=En[--Sn],En[Sn]=null,ti=En[--Sn],En[Sn]=null}var $t=null,pt=null,Qe=!1,br=null,Vn=!1,ku=Error(s(519));function Er(t){var r=Error(s(418,""));throw ga(_n(r,t)),ku}function tm(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[it]=t,r[We]=l,a){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(a=0;a<za.length;a++)ze(za[a],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":ze("invalid",r),mg(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),$o(r);break;case"select":ze("invalid",r);break;case"textarea":ze("invalid",r),yg(r,l.value,l.defaultValue,l.children),$o(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||yy(r.textContent,a)?(l.popover!=null&&(ze("beforetoggle",r),ze("toggle",r)),l.onScroll!=null&&ze("scroll",r),l.onScrollEnd!=null&&ze("scrollend",r),l.onClick!=null&&(r.onclick=Pl),r=!0):r=!1,r||Er(t)}function nm(t){for($t=t.return;$t;)switch($t.tag){case 5:case 13:Vn=!1;return;case 27:case 3:Vn=!0;return;default:$t=$t.return}}function ha(t){if(t!==$t)return!1;if(!Qe)return nm(t),Qe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Qd(t.type,t.memoizedProps)),a=!a),a&&pt&&Er(t),nm(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){pt=In(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}pt=null}}else r===27?(r=pt,Vi(t.type)?(t=Jd,Jd=null,pt=t):pt=r):pt=$t?In(t.stateNode.nextSibling):null;return!0}function pa(){pt=$t=null,Qe=!1}function im(){var t=br;return t!==null&&(Jt===null?Jt=t:Jt.push.apply(Jt,t),br=null),t}function ga(t){br===null?br=[t]:br.push(t)}var ju=$(null),Sr=null,ii=null;function Ri(t,r,a){B(ju,r._currentValue),r._currentValue=a}function ri(t){t._currentValue=ju.current,U(ju)}function Mu(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Lu(t,r,a,l){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var f=u.dependencies;if(f!==null){var v=u.child;f=f.firstContext;e:for(;f!==null;){var y=f;f=u;for(var S=0;S<r.length;S++)if(y.context===r[S]){f.lanes|=a,y=f.alternate,y!==null&&(y.lanes|=a),Mu(f.return,a,t),l||(v=null);break e}f=y.next}}else if(u.tag===18){if(v=u.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),Mu(v,a,t),v=null}else v=u.child;if(v!==null)v.return=u;else for(v=u;v!==null;){if(v===t){v=null;break}if(u=v.sibling,u!==null){u.return=v.return,v=u;break}v=v.return}u=v}}function ma(t,r,a,l){t=null;for(var u=r,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var v=u.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var y=u.type;sn(u.pendingProps.value,v.value)||(t!==null?t.push(y):t=[y])}}else if(u===Z.current){if(v=u.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(qa):t=[qa])}u=u.return}t!==null&&Lu(r,t,a,l),r.flags|=262144}function rl(t){for(t=t.firstContext;t!==null;){if(!sn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Cr(t){Sr=t,ii=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function zt(t){return rm(Sr,t)}function sl(t,r){return Sr===null&&Cr(t),rm(t,r)}function rm(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ii===null){if(t===null)throw Error(s(308));ii=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else ii=ii.next=r;return a}var gC=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},mC=i.unstable_scheduleCallback,vC=i.unstable_NormalPriority,St={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pu(){return{controller:new gC,data:new Map,refCount:0}}function va(t){t.refCount--,t.refCount===0&&mC(vC,function(){t.controller.abort()})}var ya=null,Uu=0,os=0,ls=null;function yC(t,r){if(ya===null){var a=ya=[];Uu=0,os=Hd(),ls={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Uu++,r.then(sm,sm),r}function sm(){if(--Uu===0&&ya!==null){ls!==null&&(ls.status="fulfilled");var t=ya;ya=null,os=0,ls=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function _C(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var u=0;u<a.length;u++)(0,a[u])(r)},function(u){for(l.status="rejected",l.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),l}var am=M.S;M.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&yC(t,r),am!==null&&am(t,r)};var Tr=$(null);function zu(){var t=Tr.current;return t!==null?t:at.pooledCache}function al(t,r){r===null?B(Tr,Tr.current):B(Tr,r.pool)}function om(){var t=zu();return t===null?null:{parent:St._currentValue,pool:t}}var _a=Error(s(460)),lm=Error(s(474)),ol=Error(s(542)),Hu={then:function(){}};function cm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ll(){}function um(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(ll,ll),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,fm(t),t;default:if(typeof r.status=="string")r.then(ll,ll);else{if(t=at,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var u=r;u.status="fulfilled",u.value=l}},function(l){if(r.status==="pending"){var u=r;u.status="rejected",u.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,fm(t),t}throw ba=r,_a}}var ba=null;function dm(){if(ba===null)throw Error(s(459));var t=ba;return ba=null,t}function fm(t){if(t===_a||t===ol)throw Error(s(483))}var Ni=!1;function Bu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vu(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function xi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ai(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var u=l.pending;return u===null?r.next=r:(r.next=u.next,u.next=r),l.pending=r,r=el(t),Zg(t,null,a),r}return Jo(t,l,r,a),el(t)}function Ea(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,ve(t,a)}}function $u(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var u=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?u=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?u=f=r:f=f.next=r}else u=f=r;a={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Gu=!1;function Sa(){if(Gu){var t=ls;if(t!==null)throw t}}function Ca(t,r,a,l){Gu=!1;var u=t.updateQueue;Ni=!1;var f=u.firstBaseUpdate,v=u.lastBaseUpdate,y=u.shared.pending;if(y!==null){u.shared.pending=null;var S=y,D=S.next;S.next=null,v===null?f=D:v.next=D,v=S;var H=t.alternate;H!==null&&(H=H.updateQueue,y=H.lastBaseUpdate,y!==v&&(y===null?H.firstBaseUpdate=D:y.next=D,H.lastBaseUpdate=S))}if(f!==null){var G=u.baseState;v=0,H=D=S=null,y=f;do{var k=y.lane&-536870913,j=k!==y.lane;if(j?(qe&k)===k:(l&k)===k){k!==0&&k===os&&(Gu=!0),H!==null&&(H=H.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var we=t,be=y;k=r;var tt=a;switch(be.tag){case 1:if(we=be.payload,typeof we=="function"){G=we.call(tt,G,k);break e}G=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=be.payload,k=typeof we=="function"?we.call(tt,G,k):we,k==null)break e;G=_({},G,k);break e;case 2:Ni=!0}}k=y.callback,k!==null&&(t.flags|=64,j&&(t.flags|=8192),j=u.callbacks,j===null?u.callbacks=[k]:j.push(k))}else j={lane:k,tag:y.tag,payload:y.payload,callback:y.callback,next:null},H===null?(D=H=j,S=G):H=H.next=j,v|=k;if(y=y.next,y===null){if(y=u.shared.pending,y===null)break;j=y,y=j.next,j.next=null,u.lastBaseUpdate=j,u.shared.pending=null}}while(!0);H===null&&(S=G),u.baseState=S,u.firstBaseUpdate=D,u.lastBaseUpdate=H,f===null&&(u.shared.lanes=0),Ui|=v,t.lanes=v,t.memoizedState=G}}function hm(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function pm(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)hm(a[t],r)}var cs=$(null),cl=$(0);function gm(t,r){t=di,B(cl,t),B(cs,r),di=t|r.baseLanes}function qu(){B(cl,di),B(cs,cs.current)}function Yu(){di=cl.current,U(cs),U(cl)}var Di=0,ke=null,Je=null,_t=null,ul=!1,us=!1,wr=!1,dl=0,Ta=0,ds=null,bC=0;function vt(){throw Error(s(321))}function Fu(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!sn(t[a],r[a]))return!1;return!0}function Wu(t,r,a,l,u,f){return Di=f,ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,M.H=t===null||t.memoizedState===null?Zm:Jm,wr=!1,f=a(l,u),wr=!1,us&&(f=vm(r,a,l,u)),mm(t),f}function mm(t){M.H=vl;var r=Je!==null&&Je.next!==null;if(Di=0,_t=Je=ke=null,ul=!1,Ta=0,ds=null,r)throw Error(s(300));t===null||Ot||(t=t.dependencies,t!==null&&rl(t)&&(Ot=!0))}function vm(t,r,a,l){ke=t;var u=0;do{if(us&&(ds=null),Ta=0,us=!1,25<=u)throw Error(s(301));if(u+=1,_t=Je=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}M.H=RC,f=r(a,l)}while(us);return f}function EC(){var t=M.H,r=t.useState()[0];return r=typeof r.then=="function"?wa(r):r,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(ke.flags|=1024),r}function Qu(){var t=dl!==0;return dl=0,t}function Ku(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Xu(t){if(ul){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}ul=!1}Di=0,_t=Je=ke=null,us=!1,Ta=dl=0,ds=null}function Xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?ke.memoizedState=_t=t:_t=_t.next=t,_t}function bt(){if(Je===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var r=_t===null?ke.memoizedState:_t.next;if(r!==null)_t=r,Je=t;else{if(t===null)throw ke.alternate===null?Error(s(467)):Error(s(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},_t===null?ke.memoizedState=_t=t:_t=_t.next=t}return _t}function Zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wa(t){var r=Ta;return Ta+=1,ds===null&&(ds=[]),t=um(ds,t,r),r=ke,(_t===null?r.memoizedState:_t.next)===null&&(r=r.alternate,M.H=r===null||r.memoizedState===null?Zm:Jm),t}function fl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wa(t);if(t.$$typeof===J)return zt(t)}throw Error(s(438,String(t)))}function Ju(t){var r=null,a=ke.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(u){return u.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Zu(),ke.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=Re;return r.index++,a}function si(t,r){return typeof r=="function"?r(t):r}function hl(t){var r=bt();return ed(r,Je,t)}function ed(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var u=t.baseQueue,f=l.pending;if(f!==null){if(u!==null){var v=u.next;u.next=f.next,f.next=v}r.baseQueue=u=f,l.pending=null}if(f=t.baseState,u===null)t.memoizedState=f;else{r=u.next;var y=v=null,S=null,D=r,H=!1;do{var G=D.lane&-536870913;if(G!==D.lane?(qe&G)===G:(Di&G)===G){var k=D.revertLane;if(k===0)S!==null&&(S=S.next={lane:0,revertLane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),G===os&&(H=!0);else if((Di&k)===k){D=D.next,k===os&&(H=!0);continue}else G={lane:0,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},S===null?(y=S=G,v=f):S=S.next=G,ke.lanes|=k,Ui|=k;G=D.action,wr&&a(f,G),f=D.hasEagerState?D.eagerState:a(f,G)}else k={lane:G,revertLane:D.revertLane,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},S===null?(y=S=k,v=f):S=S.next=k,ke.lanes|=G,Ui|=G;D=D.next}while(D!==null&&D!==r);if(S===null?v=f:S.next=y,!sn(f,t.memoizedState)&&(Ot=!0,H&&(a=ls,a!==null)))throw a;t.memoizedState=f,t.baseState=v,t.baseQueue=S,l.lastRenderedState=f}return u===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function td(t){var r=bt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,u=a.pending,f=r.memoizedState;if(u!==null){a.pending=null;var v=u=u.next;do f=t(f,v.action),v=v.next;while(v!==u);sn(f,r.memoizedState)||(Ot=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function ym(t,r,a){var l=ke,u=bt(),f=Qe;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var v=!sn((Je||u).memoizedState,a);v&&(u.memoizedState=a,Ot=!0),u=u.queue;var y=Em.bind(null,l,u,t);if(Oa(2048,8,y,[t]),u.getSnapshot!==r||v||_t!==null&&_t.memoizedState.tag&1){if(l.flags|=2048,fs(9,pl(),bm.bind(null,l,u,a,r),null),at===null)throw Error(s(349));f||(Di&124)!==0||_m(l,r,a)}return a}function _m(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=ke.updateQueue,r===null?(r=Zu(),ke.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function bm(t,r,a,l){r.value=a,r.getSnapshot=l,Sm(r)&&Cm(t)}function Em(t,r,a){return a(function(){Sm(r)&&Cm(t)})}function Sm(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!sn(t,a)}catch{return!0}}function Cm(t){var r=is(t,2);r!==null&&dn(r,t,2)}function nd(t){var r=Xt();if(typeof t=="function"){var a=t;if(t=a(),wr){Xn(!0);try{a()}finally{Xn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:t},r}function Tm(t,r,a,l){return t.baseState=a,ed(t,Je,typeof l=="function"?l:si)}function SC(t,r,a,l,u){if(ml(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};M.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,wm(r,f)):(f.next=a.next,r.pending=a.next=f)}}function wm(t,r){var a=r.action,l=r.payload,u=t.state;if(r.isTransition){var f=M.T,v={};M.T=v;try{var y=a(u,l),S=M.S;S!==null&&S(v,y),Om(t,r,y)}catch(D){id(t,r,D)}finally{M.T=f}}else try{f=a(u,l),Om(t,r,f)}catch(D){id(t,r,D)}}function Om(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Rm(t,r,l)},function(l){return id(t,r,l)}):Rm(t,r,a)}function Rm(t,r,a){r.status="fulfilled",r.value=a,Nm(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,wm(t,a)))}function id(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Nm(r),r=r.next;while(r!==l)}t.action=null}function Nm(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function xm(t,r){return r}function Am(t,r){if(Qe){var a=at.formState;if(a!==null){e:{var l=ke;if(Qe){if(pt){t:{for(var u=pt,f=Vn;u.nodeType!==8;){if(!f){u=null;break t}if(u=In(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){pt=In(u.nextSibling),l=u.data==="F!";break e}}Er(l)}l=!1}l&&(r=a[0])}}return a=Xt(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xm,lastRenderedState:r},a.queue=l,a=Qm.bind(null,ke,l),l.dispatch=a,l=nd(!1),f=ld.bind(null,ke,!1,l.queue),l=Xt(),u={state:r,dispatch:null,action:t,pending:null},l.queue=u,a=SC.bind(null,ke,u,f,a),u.dispatch=a,l.memoizedState=t,[r,a,!1]}function Dm(t){var r=bt();return Im(r,Je,t)}function Im(t,r,a){if(r=ed(t,r,xm)[0],t=hl(si)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=wa(r)}catch(v){throw v===_a?ol:v}else l=r;r=bt();var u=r.queue,f=u.dispatch;return a!==r.memoizedState&&(ke.flags|=2048,fs(9,pl(),CC.bind(null,u,a),null)),[l,f,t]}function CC(t,r){t.action=r}function km(t){var r=bt(),a=Je;if(a!==null)return Im(r,a,t);bt(),r=r.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function fs(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=ke.updateQueue,r===null&&(r=Zu(),ke.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function pl(){return{destroy:void 0,resource:void 0}}function jm(){return bt().memoizedState}function gl(t,r,a,l){var u=Xt();l=l===void 0?null:l,ke.flags|=t,u.memoizedState=fs(1|r,pl(),a,l)}function Oa(t,r,a,l){var u=bt();l=l===void 0?null:l;var f=u.memoizedState.inst;Je!==null&&l!==null&&Fu(l,Je.memoizedState.deps)?u.memoizedState=fs(r,f,a,l):(ke.flags|=t,u.memoizedState=fs(1|r,f,a,l))}function Mm(t,r){gl(8390656,8,t,r)}function Lm(t,r){Oa(2048,8,t,r)}function Pm(t,r){return Oa(4,2,t,r)}function Um(t,r){return Oa(4,4,t,r)}function zm(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Hm(t,r,a){a=a!=null?a.concat([t]):null,Oa(4,4,zm.bind(null,r,t),a)}function rd(){}function Bm(t,r){var a=bt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Fu(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Vm(t,r){var a=bt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Fu(r,l[1]))return l[0];if(l=t(),wr){Xn(!0);try{t()}finally{Xn(!1)}}return a.memoizedState=[l,r],l}function sd(t,r,a){return a===void 0||(Di&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=qv(),ke.lanes|=t,Ui|=t,a)}function $m(t,r,a,l){return sn(a,r)?a:cs.current!==null?(t=sd(t,a,l),sn(t,r)||(Ot=!0),t):(Di&42)===0?(Ot=!0,t.memoizedState=a):(t=qv(),ke.lanes|=t,Ui|=t,r)}function Gm(t,r,a,l,u){var f=ee.p;ee.p=f!==0&&8>f?f:8;var v=M.T,y={};M.T=y,ld(t,!1,r,a);try{var S=u(),D=M.S;if(D!==null&&D(y,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var H=_C(S,l);Ra(t,r,H,un(t))}else Ra(t,r,l,un(t))}catch(G){Ra(t,r,{then:function(){},status:"rejected",reason:G},un())}finally{ee.p=f,M.T=v}}function TC(){}function ad(t,r,a,l){if(t.tag!==5)throw Error(s(476));var u=qm(t).queue;Gm(t,u,r,ce,a===null?TC:function(){return Ym(t),a(l)})}function qm(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:ce},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Ym(t){var r=qm(t).next.queue;Ra(t,r,{},un())}function od(){return zt(qa)}function Fm(){return bt().memoizedState}function Wm(){return bt().memoizedState}function wC(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=un();t=xi(a);var l=Ai(r,t,a);l!==null&&(dn(l,r,a),Ea(l,r,a)),r={cache:Pu()},t.payload=r;return}r=r.return}}function OC(t,r,a){var l=un();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ml(t)?Km(r,a):(a=Ru(t,r,a,l),a!==null&&(dn(a,t,l),Xm(a,r,l)))}function Qm(t,r,a){var l=un();Ra(t,r,a,l)}function Ra(t,r,a,l){var u={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ml(t))Km(r,u);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var v=r.lastRenderedState,y=f(v,a);if(u.hasEagerState=!0,u.eagerState=y,sn(y,v))return Jo(t,r,u,0),at===null&&Zo(),!1}catch{}finally{}if(a=Ru(t,r,u,l),a!==null)return dn(a,t,l),Xm(a,r,l),!0}return!1}function ld(t,r,a,l){if(l={lane:2,revertLane:Hd(),action:l,hasEagerState:!1,eagerState:null,next:null},ml(t)){if(r)throw Error(s(479))}else r=Ru(t,a,l,2),r!==null&&dn(r,t,2)}function ml(t){var r=t.alternate;return t===ke||r!==null&&r===ke}function Km(t,r){us=ul=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Xm(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,ve(t,a)}}var vl={readContext:zt,use:fl,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt},Zm={readContext:zt,use:fl,useCallback:function(t,r){return Xt().memoizedState=[t,r===void 0?null:r],t},useContext:zt,useEffect:Mm,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,gl(4194308,4,zm.bind(null,r,t),a)},useLayoutEffect:function(t,r){return gl(4194308,4,t,r)},useInsertionEffect:function(t,r){gl(4,2,t,r)},useMemo:function(t,r){var a=Xt();r=r===void 0?null:r;var l=t();if(wr){Xn(!0);try{t()}finally{Xn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Xt();if(a!==void 0){var u=a(r);if(wr){Xn(!0);try{a(r)}finally{Xn(!1)}}}else u=r;return l.memoizedState=l.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},l.queue=t,t=t.dispatch=OC.bind(null,ke,t),[l.memoizedState,t]},useRef:function(t){var r=Xt();return t={current:t},r.memoizedState=t},useState:function(t){t=nd(t);var r=t.queue,a=Qm.bind(null,ke,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:rd,useDeferredValue:function(t,r){var a=Xt();return sd(a,t,r)},useTransition:function(){var t=nd(!1);return t=Gm.bind(null,ke,t.queue,!0,!1),Xt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=ke,u=Xt();if(Qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),at===null)throw Error(s(349));(qe&124)!==0||_m(l,r,a)}u.memoizedState=a;var f={value:a,getSnapshot:r};return u.queue=f,Mm(Em.bind(null,l,f,t),[t]),l.flags|=2048,fs(9,pl(),bm.bind(null,l,f,a,r),null),a},useId:function(){var t=Xt(),r=at.identifierPrefix;if(Qe){var a=ni,l=ti;a=(l&~(1<<32-Wt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=dl++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=bC++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:od,useFormState:Am,useActionState:Am,useOptimistic:function(t){var r=Xt();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=ld.bind(null,ke,!0,a),a.dispatch=r,[t,r]},useMemoCache:Ju,useCacheRefresh:function(){return Xt().memoizedState=wC.bind(null,ke)}},Jm={readContext:zt,use:fl,useCallback:Bm,useContext:zt,useEffect:Lm,useImperativeHandle:Hm,useInsertionEffect:Pm,useLayoutEffect:Um,useMemo:Vm,useReducer:hl,useRef:jm,useState:function(){return hl(si)},useDebugValue:rd,useDeferredValue:function(t,r){var a=bt();return $m(a,Je.memoizedState,t,r)},useTransition:function(){var t=hl(si)[0],r=bt().memoizedState;return[typeof t=="boolean"?t:wa(t),r]},useSyncExternalStore:ym,useId:Fm,useHostTransitionStatus:od,useFormState:Dm,useActionState:Dm,useOptimistic:function(t,r){var a=bt();return Tm(a,Je,t,r)},useMemoCache:Ju,useCacheRefresh:Wm},RC={readContext:zt,use:fl,useCallback:Bm,useContext:zt,useEffect:Lm,useImperativeHandle:Hm,useInsertionEffect:Pm,useLayoutEffect:Um,useMemo:Vm,useReducer:td,useRef:jm,useState:function(){return td(si)},useDebugValue:rd,useDeferredValue:function(t,r){var a=bt();return Je===null?sd(a,t,r):$m(a,Je.memoizedState,t,r)},useTransition:function(){var t=td(si)[0],r=bt().memoizedState;return[typeof t=="boolean"?t:wa(t),r]},useSyncExternalStore:ym,useId:Fm,useHostTransitionStatus:od,useFormState:km,useActionState:km,useOptimistic:function(t,r){var a=bt();return Je!==null?Tm(a,Je,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Ju,useCacheRefresh:Wm},hs=null,Na=0;function yl(t){var r=Na;return Na+=1,hs===null&&(hs=[]),um(hs,t,r)}function xa(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function _l(t,r){throw r.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function ev(t){var r=t._init;return r(t._payload)}function tv(t){function r(R,w){if(t){var N=R.deletions;N===null?(R.deletions=[w],R.flags|=16):N.push(w)}}function a(R,w){if(!t)return null;for(;w!==null;)r(R,w),w=w.sibling;return null}function l(R){for(var w=new Map;R!==null;)R.key!==null?w.set(R.key,R):w.set(R.index,R),R=R.sibling;return w}function u(R,w){return R=ei(R,w),R.index=0,R.sibling=null,R}function f(R,w,N){return R.index=N,t?(N=R.alternate,N!==null?(N=N.index,N<w?(R.flags|=67108866,w):N):(R.flags|=67108866,w)):(R.flags|=1048576,w)}function v(R){return t&&R.alternate===null&&(R.flags|=67108866),R}function y(R,w,N,V){return w===null||w.tag!==6?(w=xu(N,R.mode,V),w.return=R,w):(w=u(w,N),w.return=R,w)}function S(R,w,N,V){var le=N.type;return le===T?H(R,w,N.props.children,V,N.key):w!==null&&(w.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===se&&ev(le)===w.type)?(w=u(w,N.props),xa(w,N),w.return=R,w):(w=tl(N.type,N.key,N.props,null,R.mode,V),xa(w,N),w.return=R,w)}function D(R,w,N,V){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=Au(N,R.mode,V),w.return=R,w):(w=u(w,N.children||[]),w.return=R,w)}function H(R,w,N,V,le){return w===null||w.tag!==7?(w=vr(N,R.mode,V,le),w.return=R,w):(w=u(w,N),w.return=R,w)}function G(R,w,N){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=xu(""+w,R.mode,N),w.return=R,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case E:return N=tl(w.type,w.key,w.props,null,R.mode,N),xa(N,w),N.return=R,N;case O:return w=Au(w,R.mode,N),w.return=R,w;case se:var V=w._init;return w=V(w._payload),G(R,w,N)}if(je(w)||he(w))return w=vr(w,R.mode,N,null),w.return=R,w;if(typeof w.then=="function")return G(R,yl(w),N);if(w.$$typeof===J)return G(R,sl(R,w),N);_l(R,w)}return null}function k(R,w,N,V){var le=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return le!==null?null:y(R,w,""+N,V);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case E:return N.key===le?S(R,w,N,V):null;case O:return N.key===le?D(R,w,N,V):null;case se:return le=N._init,N=le(N._payload),k(R,w,N,V)}if(je(N)||he(N))return le!==null?null:H(R,w,N,V,null);if(typeof N.then=="function")return k(R,w,yl(N),V);if(N.$$typeof===J)return k(R,w,sl(R,N),V);_l(R,N)}return null}function j(R,w,N,V,le){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return R=R.get(N)||null,y(w,R,""+V,le);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case E:return R=R.get(V.key===null?N:V.key)||null,S(w,R,V,le);case O:return R=R.get(V.key===null?N:V.key)||null,D(w,R,V,le);case se:var Me=V._init;return V=Me(V._payload),j(R,w,N,V,le)}if(je(V)||he(V))return R=R.get(N)||null,H(w,R,V,le,null);if(typeof V.then=="function")return j(R,w,N,yl(V),le);if(V.$$typeof===J)return j(R,w,N,sl(w,V),le);_l(w,V)}return null}function we(R,w,N,V){for(var le=null,Me=null,pe=w,Ee=w=0,Nt=null;pe!==null&&Ee<N.length;Ee++){pe.index>Ee?(Nt=pe,pe=null):Nt=pe.sibling;var Ye=k(R,pe,N[Ee],V);if(Ye===null){pe===null&&(pe=Nt);break}t&&pe&&Ye.alternate===null&&r(R,pe),w=f(Ye,w,Ee),Me===null?le=Ye:Me.sibling=Ye,Me=Ye,pe=Nt}if(Ee===N.length)return a(R,pe),Qe&&_r(R,Ee),le;if(pe===null){for(;Ee<N.length;Ee++)pe=G(R,N[Ee],V),pe!==null&&(w=f(pe,w,Ee),Me===null?le=pe:Me.sibling=pe,Me=pe);return Qe&&_r(R,Ee),le}for(pe=l(pe);Ee<N.length;Ee++)Nt=j(pe,R,Ee,N[Ee],V),Nt!==null&&(t&&Nt.alternate!==null&&pe.delete(Nt.key===null?Ee:Nt.key),w=f(Nt,w,Ee),Me===null?le=Nt:Me.sibling=Nt,Me=Nt);return t&&pe.forEach(function(Fi){return r(R,Fi)}),Qe&&_r(R,Ee),le}function be(R,w,N,V){if(N==null)throw Error(s(151));for(var le=null,Me=null,pe=w,Ee=w=0,Nt=null,Ye=N.next();pe!==null&&!Ye.done;Ee++,Ye=N.next()){pe.index>Ee?(Nt=pe,pe=null):Nt=pe.sibling;var Fi=k(R,pe,Ye.value,V);if(Fi===null){pe===null&&(pe=Nt);break}t&&pe&&Fi.alternate===null&&r(R,pe),w=f(Fi,w,Ee),Me===null?le=Fi:Me.sibling=Fi,Me=Fi,pe=Nt}if(Ye.done)return a(R,pe),Qe&&_r(R,Ee),le;if(pe===null){for(;!Ye.done;Ee++,Ye=N.next())Ye=G(R,Ye.value,V),Ye!==null&&(w=f(Ye,w,Ee),Me===null?le=Ye:Me.sibling=Ye,Me=Ye);return Qe&&_r(R,Ee),le}for(pe=l(pe);!Ye.done;Ee++,Ye=N.next())Ye=j(pe,R,Ee,Ye.value,V),Ye!==null&&(t&&Ye.alternate!==null&&pe.delete(Ye.key===null?Ee:Ye.key),w=f(Ye,w,Ee),Me===null?le=Ye:Me.sibling=Ye,Me=Ye);return t&&pe.forEach(function(NT){return r(R,NT)}),Qe&&_r(R,Ee),le}function tt(R,w,N,V){if(typeof N=="object"&&N!==null&&N.type===T&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case E:e:{for(var le=N.key;w!==null;){if(w.key===le){if(le=N.type,le===T){if(w.tag===7){a(R,w.sibling),V=u(w,N.props.children),V.return=R,R=V;break e}}else if(w.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===se&&ev(le)===w.type){a(R,w.sibling),V=u(w,N.props),xa(V,N),V.return=R,R=V;break e}a(R,w);break}else r(R,w);w=w.sibling}N.type===T?(V=vr(N.props.children,R.mode,V,N.key),V.return=R,R=V):(V=tl(N.type,N.key,N.props,null,R.mode,V),xa(V,N),V.return=R,R=V)}return v(R);case O:e:{for(le=N.key;w!==null;){if(w.key===le)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){a(R,w.sibling),V=u(w,N.children||[]),V.return=R,R=V;break e}else{a(R,w);break}else r(R,w);w=w.sibling}V=Au(N,R.mode,V),V.return=R,R=V}return v(R);case se:return le=N._init,N=le(N._payload),tt(R,w,N,V)}if(je(N))return we(R,w,N,V);if(he(N)){if(le=he(N),typeof le!="function")throw Error(s(150));return N=le.call(N),be(R,w,N,V)}if(typeof N.then=="function")return tt(R,w,yl(N),V);if(N.$$typeof===J)return tt(R,w,sl(R,N),V);_l(R,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,w!==null&&w.tag===6?(a(R,w.sibling),V=u(w,N),V.return=R,R=V):(a(R,w),V=xu(N,R.mode,V),V.return=R,R=V),v(R)):a(R,w)}return function(R,w,N,V){try{Na=0;var le=tt(R,w,N,V);return hs=null,le}catch(pe){if(pe===_a||pe===ol)throw pe;var Me=an(29,pe,null,R.mode);return Me.lanes=V,Me.return=R,Me}finally{}}}var ps=tv(!0),nv=tv(!1),Cn=$(null),$n=null;function Ii(t){var r=t.alternate;B(Ct,Ct.current&1),B(Cn,t),$n===null&&(r===null||cs.current!==null||r.memoizedState!==null)&&($n=t)}function iv(t){if(t.tag===22){if(B(Ct,Ct.current),B(Cn,t),$n===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&($n=t)}}else ki()}function ki(){B(Ct,Ct.current),B(Cn,Cn.current)}function ai(t){U(Cn),$n===t&&($n=null),U(Ct)}var Ct=$(0);function bl(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Zd(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function cd(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ud={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=un(),u=xi(l);u.payload=r,a!=null&&(u.callback=a),r=Ai(t,u,l),r!==null&&(dn(r,t,l),Ea(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=un(),u=xi(l);u.tag=1,u.payload=r,a!=null&&(u.callback=a),r=Ai(t,u,l),r!==null&&(dn(r,t,l),Ea(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=un(),l=xi(a);l.tag=2,r!=null&&(l.callback=r),r=Ai(t,l,a),r!==null&&(dn(r,t,a),Ea(r,t,a))}};function rv(t,r,a,l,u,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,v):r.prototype&&r.prototype.isPureReactComponent?!da(a,l)||!da(u,f):!0}function sv(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&ud.enqueueReplaceState(r,r.state,null)}function Or(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=_({},a));for(var u in t)a[u]===void 0&&(a[u]=t[u])}return a}var El=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function av(t){El(t)}function ov(t){console.error(t)}function lv(t){El(t)}function Sl(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function cv(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function dd(t,r,a){return a=xi(a),a.tag=3,a.payload={element:null},a.callback=function(){Sl(t,r)},a}function uv(t){return t=xi(t),t.tag=3,t}function dv(t,r,a,l){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var f=l.value;t.payload=function(){return u(f)},t.callback=function(){cv(r,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){cv(r,a,l),typeof u!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var y=l.stack;this.componentDidCatch(l.value,{componentStack:y!==null?y:""})})}function NC(t,r,a,l,u){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ma(r,a,u,!0),a=Cn.current,a!==null){switch(a.tag){case 13:return $n===null?Md():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=u,l===Hu?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Pd(t,l,u)),!1;case 22:return a.flags|=65536,l===Hu?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Pd(t,l,u)),!1}throw Error(s(435,a.tag))}return Pd(t,l,u),Md(),!1}if(Qe)return r=Cn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=u,l!==ku&&(t=Error(s(422),{cause:l}),ga(_n(t,a)))):(l!==ku&&(r=Error(s(423),{cause:l}),ga(_n(r,a))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,l=_n(l,a),u=dd(t.stateNode,l,u),$u(t,u),gt!==4&&(gt=2)),!1;var f=Error(s(520),{cause:l});if(f=_n(f,a),La===null?La=[f]:La.push(f),gt!==4&&(gt=2),r===null)return!0;l=_n(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=u&-u,a.lanes|=t,t=dd(a.stateNode,l,t),$u(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(zi===null||!zi.has(f))))return a.flags|=65536,u&=-u,a.lanes|=u,u=uv(u),dv(u,t,a,l),$u(a,u),!1}a=a.return}while(a!==null);return!1}var fv=Error(s(461)),Ot=!1;function kt(t,r,a,l){r.child=t===null?nv(r,null,a,l):ps(r,t.child,a,l)}function hv(t,r,a,l,u){a=a.render;var f=r.ref;if("ref"in l){var v={};for(var y in l)y!=="ref"&&(v[y]=l[y])}else v=l;return Cr(r),l=Wu(t,r,a,v,f,u),y=Qu(),t!==null&&!Ot?(Ku(t,r,u),oi(t,r,u)):(Qe&&y&&Du(r),r.flags|=1,kt(t,r,l,u),r.child)}function pv(t,r,a,l,u){if(t===null){var f=a.type;return typeof f=="function"&&!Nu(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,gv(t,r,f,l,u)):(t=tl(a.type,null,l,r,r.mode,u),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!_d(t,u)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:da,a(v,l)&&t.ref===r.ref)return oi(t,r,u)}return r.flags|=1,t=ei(f,l),t.ref=r.ref,t.return=r,r.child=t}function gv(t,r,a,l,u){if(t!==null){var f=t.memoizedProps;if(da(f,l)&&t.ref===r.ref)if(Ot=!1,r.pendingProps=l=f,_d(t,u))(t.flags&131072)!==0&&(Ot=!0);else return r.lanes=t.lanes,oi(t,r,u)}return fd(t,r,a,l,u)}function mv(t,r,a){var l=r.pendingProps,u=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(u=r.child=t.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return vv(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&al(r,f!==null?f.cachePool:null),f!==null?gm(r,f):qu(),iv(r);else return r.lanes=r.childLanes=536870912,vv(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(al(r,f.cachePool),gm(r,f),ki(),r.memoizedState=null):(t!==null&&al(r,null),qu(),ki());return kt(t,r,u,a),r.child}function vv(t,r,a,l){var u=zu();return u=u===null?null:{parent:St._currentValue,pool:u},r.memoizedState={baseLanes:a,cachePool:u},t!==null&&al(r,null),qu(),iv(r),t!==null&&ma(t,r,l,!0),null}function Cl(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function fd(t,r,a,l,u){return Cr(r),a=Wu(t,r,a,l,void 0,u),l=Qu(),t!==null&&!Ot?(Ku(t,r,u),oi(t,r,u)):(Qe&&l&&Du(r),r.flags|=1,kt(t,r,a,u),r.child)}function yv(t,r,a,l,u,f){return Cr(r),r.updateQueue=null,a=vm(r,l,a,u),mm(t),l=Qu(),t!==null&&!Ot?(Ku(t,r,f),oi(t,r,f)):(Qe&&l&&Du(r),r.flags|=1,kt(t,r,a,f),r.child)}function _v(t,r,a,l,u){if(Cr(r),r.stateNode===null){var f=rs,v=a.contextType;typeof v=="object"&&v!==null&&(f=zt(v)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ud,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Bu(r),v=a.contextType,f.context=typeof v=="object"&&v!==null?zt(v):rs,f.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(cd(r,a,v,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&ud.enqueueReplaceState(f,f.state,null),Ca(r,l,f,u),Sa(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var y=r.memoizedProps,S=Or(a,y);f.props=S;var D=f.context,H=a.contextType;v=rs,typeof H=="object"&&H!==null&&(v=zt(H));var G=a.getDerivedStateFromProps;H=typeof G=="function"||typeof f.getSnapshotBeforeUpdate=="function",y=r.pendingProps!==y,H||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y||D!==v)&&sv(r,f,l,v),Ni=!1;var k=r.memoizedState;f.state=k,Ca(r,l,f,u),Sa(),D=r.memoizedState,y||k!==D||Ni?(typeof G=="function"&&(cd(r,a,G,l),D=r.memoizedState),(S=Ni||rv(r,a,S,l,k,D,v))?(H||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=D),f.props=l,f.state=D,f.context=v,l=S):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Vu(t,r),v=r.memoizedProps,H=Or(a,v),f.props=H,G=r.pendingProps,k=f.context,D=a.contextType,S=rs,typeof D=="object"&&D!==null&&(S=zt(D)),y=a.getDerivedStateFromProps,(D=typeof y=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==G||k!==S)&&sv(r,f,l,S),Ni=!1,k=r.memoizedState,f.state=k,Ca(r,l,f,u),Sa();var j=r.memoizedState;v!==G||k!==j||Ni||t!==null&&t.dependencies!==null&&rl(t.dependencies)?(typeof y=="function"&&(cd(r,a,y,l),j=r.memoizedState),(H=Ni||rv(r,a,H,l,k,j,S)||t!==null&&t.dependencies!==null&&rl(t.dependencies))?(D||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,j,S),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,j,S)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&k===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&k===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=j),f.props=l,f.state=j,f.context=S,l=H):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&k===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&k===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Cl(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=ps(r,t.child,null,u),r.child=ps(r,null,a,u)):kt(t,r,a,u),r.memoizedState=f.state,t=r.child):t=oi(t,r,u),t}function bv(t,r,a,l){return pa(),r.flags|=256,kt(t,r,a,l),r.child}var hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pd(t){return{baseLanes:t,cachePool:om()}}function gd(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Tn),t}function Ev(t,r,a){var l=r.pendingProps,u=!1,f=(r.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(Ct.current&2)!==0),v&&(u=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(Qe){if(u?Ii(r):ki(),Qe){var y=pt,S;if(S=y){e:{for(S=y,y=Vn;S.nodeType!==8;){if(!y){y=null;break e}if(S=In(S.nextSibling),S===null){y=null;break e}}y=S}y!==null?(r.memoizedState={dehydrated:y,treeContext:yr!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},S=an(18,null,null,0),S.stateNode=y,S.return=r,r.child=S,$t=r,pt=null,S=!0):S=!1}S||Er(r)}if(y=r.memoizedState,y!==null&&(y=y.dehydrated,y!==null))return Zd(y)?r.lanes=32:r.lanes=536870912,null;ai(r)}return y=l.children,l=l.fallback,u?(ki(),u=r.mode,y=Tl({mode:"hidden",children:y},u),l=vr(l,u,a,null),y.return=r,l.return=r,y.sibling=l,r.child=y,u=r.child,u.memoizedState=pd(a),u.childLanes=gd(t,v,a),r.memoizedState=hd,l):(Ii(r),md(r,y))}if(S=t.memoizedState,S!==null&&(y=S.dehydrated,y!==null)){if(f)r.flags&256?(Ii(r),r.flags&=-257,r=vd(t,r,a)):r.memoizedState!==null?(ki(),r.child=t.child,r.flags|=128,r=null):(ki(),u=l.fallback,y=r.mode,l=Tl({mode:"visible",children:l.children},y),u=vr(u,y,a,null),u.flags|=2,l.return=r,u.return=r,l.sibling=u,r.child=l,ps(r,t.child,null,a),l=r.child,l.memoizedState=pd(a),l.childLanes=gd(t,v,a),r.memoizedState=hd,r=u);else if(Ii(r),Zd(y)){if(v=y.nextSibling&&y.nextSibling.dataset,v)var D=v.dgst;v=D,l=Error(s(419)),l.stack="",l.digest=v,ga({value:l,source:null,stack:null}),r=vd(t,r,a)}else if(Ot||ma(t,r,a,!1),v=(a&t.childLanes)!==0,Ot||v){if(v=at,v!==null&&(l=a&-a,l=(l&42)!==0?1:Ie(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==S.retryLane))throw S.retryLane=l,is(t,l),dn(v,t,l),fv;y.data==="$?"||Md(),r=vd(t,r,a)}else y.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=S.treeContext,pt=In(y.nextSibling),$t=r,Qe=!0,br=null,Vn=!1,t!==null&&(En[Sn++]=ti,En[Sn++]=ni,En[Sn++]=yr,ti=t.id,ni=t.overflow,yr=r),r=md(r,l.children),r.flags|=4096);return r}return u?(ki(),u=l.fallback,y=r.mode,S=t.child,D=S.sibling,l=ei(S,{mode:"hidden",children:l.children}),l.subtreeFlags=S.subtreeFlags&65011712,D!==null?u=ei(D,u):(u=vr(u,y,a,null),u.flags|=2),u.return=r,l.return=r,l.sibling=u,r.child=l,l=u,u=r.child,y=t.child.memoizedState,y===null?y=pd(a):(S=y.cachePool,S!==null?(D=St._currentValue,S=S.parent!==D?{parent:D,pool:D}:S):S=om(),y={baseLanes:y.baseLanes|a,cachePool:S}),u.memoizedState=y,u.childLanes=gd(t,v,a),r.memoizedState=hd,l):(Ii(r),a=t.child,t=a.sibling,a=ei(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=a,r.memoizedState=null,a)}function md(t,r){return r=Tl({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Tl(t,r){return t=an(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function vd(t,r,a){return ps(r,t.child,null,a),t=md(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Sv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Mu(t.return,r,a)}function yd(t,r,a,l,u){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:u}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=u)}function Cv(t,r,a){var l=r.pendingProps,u=l.revealOrder,f=l.tail;if(kt(t,r,l.children,a),l=Ct.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sv(t,a,r);else if(t.tag===19)Sv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(B(Ct,l),u){case"forwards":for(a=r.child,u=null;a!==null;)t=a.alternate,t!==null&&bl(t)===null&&(u=a),a=a.sibling;a=u,a===null?(u=r.child,r.child=null):(u=a.sibling,a.sibling=null),yd(r,!1,u,a,f);break;case"backwards":for(a=null,u=r.child,r.child=null;u!==null;){if(t=u.alternate,t!==null&&bl(t)===null){r.child=u;break}t=u.sibling,u.sibling=a,a=u,u=t}yd(r,!0,a,null,f);break;case"together":yd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function oi(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ui|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ma(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=ei(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=ei(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function _d(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&rl(t)))}function xC(t,r,a){switch(r.tag){case 3:z(r,r.stateNode.containerInfo),Ri(r,St,t.memoizedState.cache),pa();break;case 27:case 5:ge(r);break;case 4:z(r,r.stateNode.containerInfo);break;case 10:Ri(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Ii(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Ev(t,r,a):(Ii(r),t=oi(t,r,a),t!==null?t.sibling:null);Ii(r);break;case 19:var u=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ma(t,r,a,!1),l=(a&r.childLanes)!==0),u){if(l)return Cv(t,r,a);r.flags|=128}if(u=r.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),B(Ct,Ct.current),l)break;return null;case 22:case 23:return r.lanes=0,mv(t,r,a);case 24:Ri(r,St,t.memoizedState.cache)}return oi(t,r,a)}function Tv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ot=!0;else{if(!_d(t,a)&&(r.flags&128)===0)return Ot=!1,xC(t,r,a);Ot=(t.flags&131072)!==0}else Ot=!1,Qe&&(r.flags&1048576)!==0&&em(r,il,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,u=l._init;if(l=u(l._payload),r.type=l,typeof l=="function")Nu(l)?(t=Or(l,t),r.tag=1,r=_v(null,r,l,t,a)):(r.tag=0,r=fd(null,r,l,t,a));else{if(l!=null){if(u=l.$$typeof,u===te){r.tag=11,r=hv(null,r,l,t,a);break e}else if(u===de){r.tag=14,r=pv(null,r,l,t,a);break e}}throw r=Ze(l)||l,Error(s(306,r,""))}}return r;case 0:return fd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,u=Or(l,r.pendingProps),_v(t,r,l,u,a);case 3:e:{if(z(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;u=f.element,Vu(t,r),Ca(r,l,null,a);var v=r.memoizedState;if(l=v.cache,Ri(r,St,l),l!==f.cache&&Lu(r,[St],a,!0),Sa(),l=v.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=bv(t,r,l,a);break e}else if(l!==u){u=_n(Error(s(424)),r),ga(u),r=bv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(pt=In(t.firstChild),$t=r,Qe=!0,br=null,Vn=!0,a=nv(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(pa(),l===u){r=oi(t,r,a);break e}kt(t,r,l,a)}r=r.child}return r;case 26:return Cl(t,r),t===null?(a=Ny(r.type,null,r.pendingProps,null))?r.memoizedState=a:Qe||(a=r.type,t=r.pendingProps,l=Ul(ae.current).createElement(a),l[it]=r,l[We]=t,Mt(l,a,t),ht(l),r.stateNode=l):r.memoizedState=Ny(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ge(r),t===null&&Qe&&(l=r.stateNode=wy(r.type,r.pendingProps,ae.current),$t=r,Vn=!0,u=pt,Vi(r.type)?(Jd=u,pt=In(l.firstChild)):pt=u),kt(t,r,r.pendingProps.children,a),Cl(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Qe&&((u=l=pt)&&(l=iT(l,r.type,r.pendingProps,Vn),l!==null?(r.stateNode=l,$t=r,pt=In(l.firstChild),Vn=!1,u=!0):u=!1),u||Er(r)),ge(r),u=r.type,f=r.pendingProps,v=t!==null?t.memoizedProps:null,l=f.children,Qd(u,f)?l=null:v!==null&&Qd(u,v)&&(r.flags|=32),r.memoizedState!==null&&(u=Wu(t,r,EC,null,null,a),qa._currentValue=u),Cl(t,r),kt(t,r,l,a),r.child;case 6:return t===null&&Qe&&((t=a=pt)&&(a=rT(a,r.pendingProps,Vn),a!==null?(r.stateNode=a,$t=r,pt=null,t=!0):t=!1),t||Er(r)),null;case 13:return Ev(t,r,a);case 4:return z(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=ps(r,null,l,a):kt(t,r,l,a),r.child;case 11:return hv(t,r,r.type,r.pendingProps,a);case 7:return kt(t,r,r.pendingProps,a),r.child;case 8:return kt(t,r,r.pendingProps.children,a),r.child;case 12:return kt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Ri(r,r.type,l.value),kt(t,r,l.children,a),r.child;case 9:return u=r.type._context,l=r.pendingProps.children,Cr(r),u=zt(u),l=l(u),r.flags|=1,kt(t,r,l,a),r.child;case 14:return pv(t,r,r.type,r.pendingProps,a);case 15:return gv(t,r,r.type,r.pendingProps,a);case 19:return Cv(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Tl(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=ei(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return mv(t,r,a);case 24:return Cr(r),l=zt(St),t===null?(u=zu(),u===null&&(u=at,f=Pu(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=a),u=f),r.memoizedState={parent:l,cache:u},Bu(r),Ri(r,St,u)):((t.lanes&a)!==0&&(Vu(t,r),Ca(r,null,null,a),Sa()),u=t.memoizedState,f=r.memoizedState,u.parent!==l?(u={parent:l,cache:l},r.memoizedState=u,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=u),Ri(r,St,l)):(l=f.cache,Ri(r,St,l),l!==u.cache&&Lu(r,[St],a,!0))),kt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function li(t){t.flags|=4}function wv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ky(r)){if(r=Cn.current,r!==null&&((qe&4194048)===qe?$n!==null:(qe&62914560)!==qe&&(qe&536870912)===0||r!==$n))throw ba=Hu,lm;t.flags|=8192}}function wl(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?zo():536870912,t.lanes|=r,ys|=r)}function Aa(t,r){if(!Qe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ft(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var u=t.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags&65011712,l|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function AC(t,r,a){var l=r.pendingProps;switch(Iu(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(r),null;case 1:return ft(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ri(St),oe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ha(r)?li(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,im())),ft(r),null;case 26:return a=r.memoizedState,t===null?(li(r),a!==null?(ft(r),wv(r,a)):(ft(r),r.flags&=-16777217)):a?a!==t.memoizedState?(li(r),ft(r),wv(r,a)):(ft(r),r.flags&=-16777217):(t.memoizedProps!==l&&li(r),ft(r),r.flags&=-16777217),null;case 27:$e(r),a=ae.current;var u=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&li(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ft(r),null}t=F.current,ha(r)?tm(r):(t=wy(u,l,a),r.stateNode=t,li(r))}return ft(r),null;case 5:if($e(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&li(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ft(r),null}if(t=F.current,ha(r))tm(r);else{switch(u=Ul(ae.current),t){case 1:t=u.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=u.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=u.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=u.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?u.createElement("select",{is:l.is}):u.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?u.createElement(a,{is:l.is}):u.createElement(a)}}t[it]=r,t[We]=l;e:for(u=r.child;u!==null;){if(u.tag===5||u.tag===6)t.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break e;for(;u.sibling===null;){if(u.return===null||u.return===r)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r.stateNode=t;e:switch(Mt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&li(r)}}return ft(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&li(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=ae.current,ha(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,u=$t,u!==null)switch(u.tag){case 27:case 5:l=u.memoizedProps}t[it]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||yy(t.nodeValue,a)),t||Er(r)}else t=Ul(t).createTextNode(l),t[it]=r,r.stateNode=t}return ft(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=ha(r),l!==null&&l.dehydrated!==null){if(t===null){if(!u)throw Error(s(318));if(u=r.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[it]=r}else pa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),u=!1}else u=im(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return r.flags&256?(ai(r),r):(ai(r),null)}if(ai(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,u=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(u=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==u&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),wl(r,r.updateQueue),ft(r),null;case 4:return oe(),t===null&&Gd(r.stateNode.containerInfo),ft(r),null;case 10:return ri(r.type),ft(r),null;case 19:if(U(Ct),u=r.memoizedState,u===null)return ft(r),null;if(l=(r.flags&128)!==0,f=u.rendering,f===null)if(l)Aa(u,!1);else{if(gt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=bl(t),f!==null){for(r.flags|=128,Aa(u,!1),t=f.updateQueue,r.updateQueue=t,wl(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Jg(a,t),a=a.sibling;return B(Ct,Ct.current&1|2),r.child}t=t.sibling}u.tail!==null&&Yt()>Nl&&(r.flags|=128,l=!0,Aa(u,!1),r.lanes=4194304)}else{if(!l)if(t=bl(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,wl(r,t),Aa(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!Qe)return ft(r),null}else 2*Yt()-u.renderingStartTime>Nl&&a!==536870912&&(r.flags|=128,l=!0,Aa(u,!1),r.lanes=4194304);u.isBackwards?(f.sibling=r.child,r.child=f):(t=u.last,t!==null?t.sibling=f:r.child=f,u.last=f)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Yt(),r.sibling=null,t=Ct.current,B(Ct,l?t&1|2:t&1),r):(ft(r),null);case 22:case 23:return ai(r),Yu(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ft(r),r.subtreeFlags&6&&(r.flags|=8192)):ft(r),a=r.updateQueue,a!==null&&wl(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&U(Tr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ri(St),ft(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function DC(t,r){switch(Iu(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ri(St),oe(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return $e(r),null;case 13:if(ai(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));pa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return U(Ct),null;case 4:return oe(),null;case 10:return ri(r.type),null;case 22:case 23:return ai(r),Yu(),t!==null&&U(Tr),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ri(St),null;case 25:return null;default:return null}}function Ov(t,r){switch(Iu(r),r.tag){case 3:ri(St),oe();break;case 26:case 27:case 5:$e(r);break;case 4:oe();break;case 13:ai(r);break;case 19:U(Ct);break;case 10:ri(r.type);break;case 22:case 23:ai(r),Yu(),t!==null&&U(Tr);break;case 24:ri(St)}}function Da(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var u=l.next;a=u;do{if((a.tag&t)===t){l=void 0;var f=a.create,v=a.inst;l=f(),v.destroy=l}a=a.next}while(a!==u)}}catch(y){rt(r,r.return,y)}}function ji(t,r,a){try{var l=r.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&t)===t){var v=l.inst,y=v.destroy;if(y!==void 0){v.destroy=void 0,u=r;var S=a,D=y;try{D()}catch(H){rt(u,S,H)}}}l=l.next}while(l!==f)}}catch(H){rt(r,r.return,H)}}function Rv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{pm(r,a)}catch(l){rt(t,t.return,l)}}}function Nv(t,r,a){a.props=Or(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){rt(t,r,l)}}function Ia(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(u){rt(t,r,u)}}function Gn(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(u){rt(t,r,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){rt(t,r,u)}else a.current=null}function xv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(u){rt(t,t.return,u)}}function bd(t,r,a){try{var l=t.stateNode;ZC(l,t.type,a,r),l[We]=r}catch(u){rt(t,t.return,u)}}function Av(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Vi(t.type)||t.tag===4}function Ed(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Av(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Vi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Pl));else if(l!==4&&(l===27&&Vi(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Sd(t,r,a),t=t.sibling;t!==null;)Sd(t,r,a),t=t.sibling}function Ol(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Vi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Ol(t,r,a),t=t.sibling;t!==null;)Ol(t,r,a),t=t.sibling}function Dv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,u=r.attributes;u.length;)r.removeAttributeNode(u[0]);Mt(r,l,a),r[it]=t,r[We]=a}catch(f){rt(t,t.return,f)}}var ci=!1,yt=!1,Cd=!1,Iv=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function IC(t,r){if(t=t.containerInfo,Fd=Gl,t=$g(t),Eu(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var u=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,y=-1,S=-1,D=0,H=0,G=t,k=null;t:for(;;){for(var j;G!==a||u!==0&&G.nodeType!==3||(y=v+u),G!==f||l!==0&&G.nodeType!==3||(S=v+l),G.nodeType===3&&(v+=G.nodeValue.length),(j=G.firstChild)!==null;)k=G,G=j;for(;;){if(G===t)break t;if(k===a&&++D===u&&(y=v),k===f&&++H===l&&(S=v),(j=G.nextSibling)!==null)break;G=k,k=G.parentNode}G=j}a=y===-1||S===-1?null:{start:y,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Wd={focusedElem:t,selectionRange:a},Gl=!1,Rt=r;Rt!==null;)if(r=Rt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Rt=t;else for(;Rt!==null;){switch(r=Rt,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,u=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var we=Or(a.type,u,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(we,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){rt(a,a.return,be)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Xd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Xd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Rt=t;break}Rt=r.return}}function kv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Mi(t,a),l&4&&Da(5,a);break;case 1:if(Mi(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(v){rt(a,a.return,v)}else{var u=Or(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(u,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){rt(a,a.return,v)}}l&64&&Rv(a),l&512&&Ia(a,a.return);break;case 3:if(Mi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{pm(t,r)}catch(v){rt(a,a.return,v)}}break;case 27:r===null&&l&4&&Dv(a);case 26:case 5:Mi(t,a),r===null&&l&4&&xv(a),l&512&&Ia(a,a.return);break;case 12:Mi(t,a);break;case 13:Mi(t,a),l&4&&Lv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=BC.bind(null,a),sT(t,a))));break;case 22:if(l=a.memoizedState!==null||ci,!l){r=r!==null&&r.memoizedState!==null||yt,u=ci;var f=yt;ci=l,(yt=r)&&!f?Li(t,a,(a.subtreeFlags&8772)!==0):Mi(t,a),ci=u,yt=f}break;case 30:break;default:Mi(t,a)}}function jv(t){var r=t.alternate;r!==null&&(t.alternate=null,jv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&gn(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,Zt=!1;function ui(t,r,a){for(a=a.child;a!==null;)Mv(t,r,a),a=a.sibling}function Mv(t,r,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Ti,a)}catch{}switch(a.tag){case 26:yt||Gn(a,r),ui(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yt||Gn(a,r);var l=dt,u=Zt;Vi(a.type)&&(dt=a.stateNode,Zt=!1),ui(t,r,a),Ba(a.stateNode),dt=l,Zt=u;break;case 5:yt||Gn(a,r);case 6:if(l=dt,u=Zt,dt=null,ui(t,r,a),dt=l,Zt=u,dt!==null)if(Zt)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(f){rt(a,r,f)}else try{dt.removeChild(a.stateNode)}catch(f){rt(a,r,f)}break;case 18:dt!==null&&(Zt?(t=dt,Cy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Qa(t)):Cy(dt,a.stateNode));break;case 4:l=dt,u=Zt,dt=a.stateNode.containerInfo,Zt=!0,ui(t,r,a),dt=l,Zt=u;break;case 0:case 11:case 14:case 15:yt||ji(2,a,r),yt||ji(4,a,r),ui(t,r,a);break;case 1:yt||(Gn(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Nv(a,r,l)),ui(t,r,a);break;case 21:ui(t,r,a);break;case 22:yt=(l=yt)||a.memoizedState!==null,ui(t,r,a),yt=l;break;default:ui(t,r,a)}}function Lv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Qa(t)}catch(a){rt(r,r.return,a)}}function kC(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Iv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Iv),r;default:throw Error(s(435,t.tag))}}function Td(t,r){var a=kC(t);r.forEach(function(l){var u=VC.bind(null,t,l);a.has(l)||(a.add(l),l.then(u,u))})}function on(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var u=a[l],f=t,v=r,y=v;e:for(;y!==null;){switch(y.tag){case 27:if(Vi(y.type)){dt=y.stateNode,Zt=!1;break e}break;case 5:dt=y.stateNode,Zt=!1;break e;case 3:case 4:dt=y.stateNode.containerInfo,Zt=!0;break e}y=y.return}if(dt===null)throw Error(s(160));Mv(f,v,u),dt=null,Zt=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Pv(r,t),r=r.sibling}var Dn=null;function Pv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:on(r,t),ln(t),l&4&&(ji(3,t,t.return),Da(3,t),ji(5,t,t.return));break;case 1:on(r,t),ln(t),l&512&&(yt||a===null||Gn(a,a.return)),l&64&&ci&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var u=Dn;if(on(r,t),ln(t),l&512&&(yt||a===null||Gn(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,u=u.ownerDocument||u;t:switch(l){case"title":f=u.getElementsByTagName("title")[0],(!f||f[Bn]||f[it]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(l),u.head.insertBefore(f,u.querySelector("head > title"))),Mt(f,l,a),f[it]=t,ht(f),l=f;break e;case"link":var v=Dy("link","href",u).get(l+(a.href||""));if(v){for(var y=0;y<v.length;y++)if(f=v[y],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(y,1);break t}}f=u.createElement(l),Mt(f,l,a),u.head.appendChild(f);break;case"meta":if(v=Dy("meta","content",u).get(l+(a.content||""))){for(y=0;y<v.length;y++)if(f=v[y],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(y,1);break t}}f=u.createElement(l),Mt(f,l,a),u.head.appendChild(f);break;default:throw Error(s(468,l))}f[it]=t,ht(f),l=f}t.stateNode=l}else Iy(u,t.type,t.stateNode);else t.stateNode=Ay(u,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?Iy(u,t.type,t.stateNode):Ay(u,l,t.memoizedProps)):l===null&&t.stateNode!==null&&bd(t,t.memoizedProps,a.memoizedProps)}break;case 27:on(r,t),ln(t),l&512&&(yt||a===null||Gn(a,a.return)),a!==null&&l&4&&bd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(on(r,t),ln(t),l&512&&(yt||a===null||Gn(a,a.return)),t.flags&32){u=t.stateNode;try{Kr(u,"")}catch(j){rt(t,t.return,j)}}l&4&&t.stateNode!=null&&(u=t.memoizedProps,bd(t,u,a!==null?a.memoizedProps:u)),l&1024&&(Cd=!0);break;case 6:if(on(r,t),ln(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(j){rt(t,t.return,j)}}break;case 3:if(Bl=null,u=Dn,Dn=zl(r.containerInfo),on(r,t),Dn=u,ln(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Qa(r.containerInfo)}catch(j){rt(t,t.return,j)}Cd&&(Cd=!1,Uv(t));break;case 4:l=Dn,Dn=zl(t.stateNode.containerInfo),on(r,t),ln(t),Dn=l;break;case 12:on(r,t),ln(t);break;case 13:on(r,t),ln(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ad=Yt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Td(t,l)));break;case 22:u=t.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,D=ci,H=yt;if(ci=D||u,yt=H||S,on(r,t),yt=H,ci=D,ln(t),l&8192)e:for(r=t.stateNode,r._visibility=u?r._visibility&-2:r._visibility|1,u&&(a===null||S||ci||yt||Rr(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){S=a=r;try{if(f=S.stateNode,u)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{y=S.stateNode;var G=S.memoizedProps.style,k=G!=null&&G.hasOwnProperty("display")?G.display:null;y.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(j){rt(S,S.return,j)}}}else if(r.tag===6){if(a===null){S=r;try{S.stateNode.nodeValue=u?"":S.memoizedProps}catch(j){rt(S,S.return,j)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Td(t,a))));break;case 19:on(r,t),ln(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Td(t,l)));break;case 30:break;case 21:break;default:on(r,t),ln(t)}}function ln(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Av(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var u=a.stateNode,f=Ed(t);Ol(t,f,u);break;case 5:var v=a.stateNode;a.flags&32&&(Kr(v,""),a.flags&=-33);var y=Ed(t);Ol(t,y,v);break;case 3:case 4:var S=a.stateNode.containerInfo,D=Ed(t);Sd(t,D,S);break;default:throw Error(s(161))}}catch(H){rt(t,t.return,H)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Uv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Uv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Mi(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)kv(t,r.alternate,r),r=r.sibling}function Rr(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ji(4,r,r.return),Rr(r);break;case 1:Gn(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Nv(r,r.return,a),Rr(r);break;case 27:Ba(r.stateNode);case 26:case 5:Gn(r,r.return),Rr(r);break;case 22:r.memoizedState===null&&Rr(r);break;case 30:Rr(r);break;default:Rr(r)}t=t.sibling}}function Li(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,u=t,f=r,v=f.flags;switch(f.tag){case 0:case 11:case 15:Li(u,f,a),Da(4,f);break;case 1:if(Li(u,f,a),l=f,u=l.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(D){rt(l,l.return,D)}if(l=f,u=l.updateQueue,u!==null){var y=l.stateNode;try{var S=u.shared.hiddenCallbacks;if(S!==null)for(u.shared.hiddenCallbacks=null,u=0;u<S.length;u++)hm(S[u],y)}catch(D){rt(l,l.return,D)}}a&&v&64&&Rv(f),Ia(f,f.return);break;case 27:Dv(f);case 26:case 5:Li(u,f,a),a&&l===null&&v&4&&xv(f),Ia(f,f.return);break;case 12:Li(u,f,a);break;case 13:Li(u,f,a),a&&v&4&&Lv(u,f);break;case 22:f.memoizedState===null&&Li(u,f,a),Ia(f,f.return);break;case 30:break;default:Li(u,f,a)}r=r.sibling}}function wd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&va(a))}function Od(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&va(t))}function qn(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zv(t,r,a,l),r=r.sibling}function zv(t,r,a,l){var u=r.flags;switch(r.tag){case 0:case 11:case 15:qn(t,r,a,l),u&2048&&Da(9,r);break;case 1:qn(t,r,a,l);break;case 3:qn(t,r,a,l),u&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&va(t)));break;case 12:if(u&2048){qn(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,v=f.id,y=f.onPostCommit;typeof y=="function"&&y(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(S){rt(r,r.return,S)}}else qn(t,r,a,l);break;case 13:qn(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,v=r.alternate,r.memoizedState!==null?f._visibility&2?qn(t,r,a,l):ka(t,r):f._visibility&2?qn(t,r,a,l):(f._visibility|=2,gs(t,r,a,l,(r.subtreeFlags&10256)!==0)),u&2048&&wd(v,r);break;case 24:qn(t,r,a,l),u&2048&&Od(r.alternate,r);break;default:qn(t,r,a,l)}}function gs(t,r,a,l,u){for(u=u&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,v=r,y=a,S=l,D=v.flags;switch(v.tag){case 0:case 11:case 15:gs(f,v,y,S,u),Da(8,v);break;case 23:break;case 22:var H=v.stateNode;v.memoizedState!==null?H._visibility&2?gs(f,v,y,S,u):ka(f,v):(H._visibility|=2,gs(f,v,y,S,u)),u&&D&2048&&wd(v.alternate,v);break;case 24:gs(f,v,y,S,u),u&&D&2048&&Od(v.alternate,v);break;default:gs(f,v,y,S,u)}r=r.sibling}}function ka(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,u=l.flags;switch(l.tag){case 22:ka(a,l),u&2048&&wd(l.alternate,l);break;case 24:ka(a,l),u&2048&&Od(l.alternate,l);break;default:ka(a,l)}r=r.sibling}}var ja=8192;function ms(t){if(t.subtreeFlags&ja)for(t=t.child;t!==null;)Hv(t),t=t.sibling}function Hv(t){switch(t.tag){case 26:ms(t),t.flags&ja&&t.memoizedState!==null&&yT(Dn,t.memoizedState,t.memoizedProps);break;case 5:ms(t);break;case 3:case 4:var r=Dn;Dn=zl(t.stateNode.containerInfo),ms(t),Dn=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=ja,ja=16777216,ms(t),ja=r):ms(t));break;default:ms(t)}}function Bv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ma(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Rt=l,$v(l,t)}Bv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vv(t),t=t.sibling}function Vv(t){switch(t.tag){case 0:case 11:case 15:Ma(t),t.flags&2048&&ji(9,t,t.return);break;case 3:Ma(t);break;case 12:Ma(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Rl(t)):Ma(t);break;default:Ma(t)}}function Rl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Rt=l,$v(l,t)}Bv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ji(8,r,r.return),Rl(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Rl(r));break;default:Rl(r)}t=t.sibling}}function $v(t,r){for(;Rt!==null;){var a=Rt;switch(a.tag){case 0:case 11:case 15:ji(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:va(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Rt=l;else e:for(a=t;Rt!==null;){l=Rt;var u=l.sibling,f=l.return;if(jv(l),l===a){Rt=null;break e}if(u!==null){u.return=f,Rt=u;break e}Rt=f}}}var jC={getCacheForType:function(t){var r=zt(St),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},MC=typeof WeakMap=="function"?WeakMap:Map,Ke=0,at=null,Ue=null,qe=0,Xe=0,cn=null,Pi=!1,vs=!1,Rd=!1,di=0,gt=0,Ui=0,Nr=0,Nd=0,Tn=0,ys=0,La=null,Jt=null,xd=!1,Ad=0,Nl=1/0,xl=null,zi=null,jt=0,Hi=null,_s=null,bs=0,Dd=0,Id=null,Gv=null,Pa=0,kd=null;function un(){if((Ke&2)!==0&&qe!==0)return qe&-qe;if(M.T!==null){var t=os;return t!==0?t:Hd()}return lt()}function qv(){Tn===0&&(Tn=(qe&536870912)===0||Qe?nu():536870912);var t=Cn.current;return t!==null&&(t.flags|=32),Tn}function dn(t,r,a){(t===at&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)&&(Es(t,0),Bi(t,qe,Tn,!1)),Q(t,a),((Ke&2)===0||t!==at)&&(t===at&&((Ke&2)===0&&(Nr|=a),gt===4&&Bi(t,qe,Tn,!1)),Yn(t))}function Yv(t,r,a){if((Ke&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||qr(t,r),u=l?UC(t,r):Ld(t,r,!0),f=l;do{if(u===0){vs&&!l&&Bi(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!LC(a)){u=Ld(t,r,!1),f=!1;continue}if(u===2){if(f=r,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var y=t;u=La;var S=y.current.memoizedState.isDehydrated;if(S&&(Es(y,v).flags|=256),v=Ld(y,v,!1),v!==2){if(Rd&&!S){y.errorRecoveryDisabledLanes|=f,Nr|=f,u=4;break e}f=Jt,Jt=u,f!==null&&(Jt===null?Jt=f:Jt.push.apply(Jt,f))}u=v}if(f=!1,u!==2)continue}}if(u===1){Es(t,0),Bi(t,r,0,!0);break}e:{switch(l=t,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Bi(l,r,Tn,!Pi);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(u=Ad+300-Yt(),10<u)){if(Bi(l,r,Tn,!Pi),na(l,0,!0)!==0)break e;l.timeoutHandle=Ey(Fv.bind(null,l,a,Jt,xl,xd,r,Tn,Nr,ys,Pi,f,2,-0,0),u);break e}Fv(l,a,Jt,xl,xd,r,Tn,Nr,ys,Pi,f,0,-0,0)}}break}while(!0);Yn(t)}function Fv(t,r,a,l,u,f,v,y,S,D,H,G,k,j){if(t.timeoutHandle=-1,G=r.subtreeFlags,(G&8192||(G&16785408)===16785408)&&(Ga={stylesheets:null,count:0,unsuspend:vT},Hv(r),G=_T(),G!==null)){t.cancelPendingCommit=G(ey.bind(null,t,r,f,a,l,u,v,y,S,H,1,k,j)),Bi(t,f,v,!D);return}ey(t,r,f,a,l,u,v,y,S)}function LC(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var u=a[l],f=u.getSnapshot;u=u.value;try{if(!sn(f(),u))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Bi(t,r,a,l){r&=~Nd,r&=~Nr,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var u=r;0<u;){var f=31-Wt(u),v=1<<f;l[f]=-1,u&=~v}a!==0&&ie(t,a,r)}function Al(){return(Ke&6)===0?(Ua(0),!1):!0}function jd(){if(Ue!==null){if(Xe===0)var t=Ue.return;else t=Ue,ii=Sr=null,Xu(t),hs=null,Na=0,t=Ue;for(;t!==null;)Ov(t.alternate,t),t=t.return;Ue=null}}function Es(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,eT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),jd(),at=t,Ue=a=ei(t.current,null),qe=r,Xe=0,cn=null,Pi=!1,vs=qr(t,r),Rd=!1,ys=Tn=Nd=Nr=Ui=gt=0,Jt=La=null,xd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var u=31-Wt(l),f=1<<u;r|=t[u],l&=~f}return di=r,Zo(),a}function Wv(t,r){ke=null,M.H=vl,r===_a||r===ol?(r=dm(),Xe=3):r===lm?(r=dm(),Xe=4):Xe=r===fv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,cn=r,Ue===null&&(gt=1,Sl(t,_n(r,t.current)))}function Qv(){var t=M.H;return M.H=vl,t===null?vl:t}function Kv(){var t=M.A;return M.A=jC,t}function Md(){gt=4,Pi||(qe&4194048)!==qe&&Cn.current!==null||(vs=!0),(Ui&134217727)===0&&(Nr&134217727)===0||at===null||Bi(at,qe,Tn,!1)}function Ld(t,r,a){var l=Ke;Ke|=2;var u=Qv(),f=Kv();(at!==t||qe!==r)&&(xl=null,Es(t,r)),r=!1;var v=gt;e:do try{if(Xe!==0&&Ue!==null){var y=Ue,S=cn;switch(Xe){case 8:jd(),v=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(r=!0);var D=Xe;if(Xe=0,cn=null,Ss(t,y,S,D),a&&vs){v=0;break e}break;default:D=Xe,Xe=0,cn=null,Ss(t,y,S,D)}}PC(),v=gt;break}catch(H){Wv(t,H)}while(!0);return r&&t.shellSuspendCounter++,ii=Sr=null,Ke=l,M.H=u,M.A=f,Ue===null&&(at=null,qe=0,Zo()),v}function PC(){for(;Ue!==null;)Xv(Ue)}function UC(t,r){var a=Ke;Ke|=2;var l=Qv(),u=Kv();at!==t||qe!==r?(xl=null,Nl=Yt()+500,Es(t,r)):vs=qr(t,r);e:do try{if(Xe!==0&&Ue!==null){r=Ue;var f=cn;t:switch(Xe){case 1:Xe=0,cn=null,Ss(t,r,f,1);break;case 2:case 9:if(cm(f)){Xe=0,cn=null,Zv(r);break}r=function(){Xe!==2&&Xe!==9||at!==t||(Xe=7),Yn(t)},f.then(r,r);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:cm(f)?(Xe=0,cn=null,Zv(r)):(Xe=0,cn=null,Ss(t,r,f,7));break;case 5:var v=null;switch(Ue.tag){case 26:v=Ue.memoizedState;case 5:case 27:var y=Ue;if(!v||ky(v)){Xe=0,cn=null;var S=y.sibling;if(S!==null)Ue=S;else{var D=y.return;D!==null?(Ue=D,Dl(D)):Ue=null}break t}}Xe=0,cn=null,Ss(t,r,f,5);break;case 6:Xe=0,cn=null,Ss(t,r,f,6);break;case 8:jd(),gt=6;break e;default:throw Error(s(462))}}zC();break}catch(H){Wv(t,H)}while(!0);return ii=Sr=null,M.H=l,M.A=u,Ke=a,Ue!==null?0:(at=null,qe=0,Zo(),gt)}function zC(){for(;Ue!==null&&!Hn();)Xv(Ue)}function Xv(t){var r=Tv(t.alternate,t,di);t.memoizedProps=t.pendingProps,r===null?Dl(t):Ue=r}function Zv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=yv(a,r,r.pendingProps,r.type,void 0,qe);break;case 11:r=yv(a,r,r.pendingProps,r.type.render,r.ref,qe);break;case 5:Xu(r);default:Ov(a,r),r=Ue=Jg(r,di),r=Tv(a,r,di)}t.memoizedProps=t.pendingProps,r===null?Dl(t):Ue=r}function Ss(t,r,a,l){ii=Sr=null,Xu(r),hs=null,Na=0;var u=r.return;try{if(NC(t,u,r,a,qe)){gt=1,Sl(t,_n(a,t.current)),Ue=null;return}}catch(f){if(u!==null)throw Ue=u,f;gt=1,Sl(t,_n(a,t.current)),Ue=null;return}r.flags&32768?(Qe||l===1?t=!0:vs||(qe&536870912)!==0?t=!1:(Pi=t=!0,(l===2||l===9||l===3||l===6)&&(l=Cn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Jv(r,t)):Dl(r)}function Dl(t){var r=t;do{if((r.flags&32768)!==0){Jv(r,Pi);return}t=r.return;var a=AC(r.alternate,r,di);if(a!==null){Ue=a;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=t}while(r!==null);gt===0&&(gt=5)}function Jv(t,r){do{var a=DC(t.alternate,t);if(a!==null){a.flags&=32767,Ue=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=a}while(t!==null);gt=6,Ue=null}function ey(t,r,a,l,u,f,v,y,S){t.cancelPendingCommit=null;do Il();while(jt!==0);if((Ke&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=Ou,q(t,a,f,v,y,S),t===at&&(Ue=at=null,qe=0),_s=r,Hi=t,bs=a,Dd=f,Id=u,Gv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,$C(Ci,function(){return sy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=M.T,M.T=null,u=ee.p,ee.p=2,v=Ke,Ke|=4;try{IC(t,r,a)}finally{Ke=v,ee.p=u,M.T=l}}jt=1,ty(),ny(),iy()}}function ty(){if(jt===1){jt=0;var t=Hi,r=_s,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var l=ee.p;ee.p=2;var u=Ke;Ke|=4;try{Pv(r,t);var f=Wd,v=$g(t.containerInfo),y=f.focusedElem,S=f.selectionRange;if(v!==y&&y&&y.ownerDocument&&Vg(y.ownerDocument.documentElement,y)){if(S!==null&&Eu(y)){var D=S.start,H=S.end;if(H===void 0&&(H=D),"selectionStart"in y)y.selectionStart=D,y.selectionEnd=Math.min(H,y.value.length);else{var G=y.ownerDocument||document,k=G&&G.defaultView||window;if(k.getSelection){var j=k.getSelection(),we=y.textContent.length,be=Math.min(S.start,we),tt=S.end===void 0?be:Math.min(S.end,we);!j.extend&&be>tt&&(v=tt,tt=be,be=v);var R=Bg(y,be),w=Bg(y,tt);if(R&&w&&(j.rangeCount!==1||j.anchorNode!==R.node||j.anchorOffset!==R.offset||j.focusNode!==w.node||j.focusOffset!==w.offset)){var N=G.createRange();N.setStart(R.node,R.offset),j.removeAllRanges(),be>tt?(j.addRange(N),j.extend(w.node,w.offset)):(N.setEnd(w.node,w.offset),j.addRange(N))}}}}for(G=[],j=y;j=j.parentNode;)j.nodeType===1&&G.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<G.length;y++){var V=G[y];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}Gl=!!Fd,Wd=Fd=null}finally{Ke=u,ee.p=l,M.T=a}}t.current=r,jt=2}}function ny(){if(jt===2){jt=0;var t=Hi,r=_s,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var l=ee.p;ee.p=2;var u=Ke;Ke|=4;try{kv(t,r.alternate,r)}finally{Ke=u,ee.p=l,M.T=a}}jt=3}}function iy(){if(jt===4||jt===3){jt=0,Zs();var t=Hi,r=_s,a=bs,l=Gv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?jt=5:(jt=0,_s=Hi=null,ry(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(zi=null),Ge(a),r=r.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Ti,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=M.T,u=ee.p,ee.p=2,M.T=null;try{for(var f=t.onRecoverableError,v=0;v<l.length;v++){var y=l[v];f(y.value,{componentStack:y.stack})}}finally{M.T=r,ee.p=u}}(bs&3)!==0&&Il(),Yn(t),u=t.pendingLanes,(a&4194090)!==0&&(u&42)!==0?t===kd?Pa++:(Pa=0,kd=t):Pa=0,Ua(0)}}function ry(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,va(r)))}function Il(t){return ty(),ny(),iy(),sy()}function sy(){if(jt!==5)return!1;var t=Hi,r=Dd;Dd=0;var a=Ge(bs),l=M.T,u=ee.p;try{ee.p=32>a?32:a,M.T=null,a=Id,Id=null;var f=Hi,v=bs;if(jt=0,_s=Hi=null,bs=0,(Ke&6)!==0)throw Error(s(331));var y=Ke;if(Ke|=4,Vv(f.current),zv(f,f.current,v,a),Ke=y,Ua(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Ti,f)}catch{}return!0}finally{ee.p=u,M.T=l,ry(t,r)}}function ay(t,r,a){r=_n(a,r),r=dd(t.stateNode,r,2),t=Ai(t,r,2),t!==null&&(Q(t,2),Yn(t))}function rt(t,r,a){if(t.tag===3)ay(t,t,a);else for(;r!==null;){if(r.tag===3){ay(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(zi===null||!zi.has(l))){t=_n(a,t),a=uv(2),l=Ai(r,a,2),l!==null&&(dv(a,l,r,t),Q(l,2),Yn(l));break}}r=r.return}}function Pd(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new MC;var u=new Set;l.set(r,u)}else u=l.get(r),u===void 0&&(u=new Set,l.set(r,u));u.has(a)||(Rd=!0,u.add(a),t=HC.bind(null,t,r,a),r.then(t,t))}function HC(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,at===t&&(qe&a)===a&&(gt===4||gt===3&&(qe&62914560)===qe&&300>Yt()-Ad?(Ke&2)===0&&Es(t,0):Nd|=a,ys===qe&&(ys=0)),Yn(t)}function oy(t,r){r===0&&(r=zo()),t=is(t,r),t!==null&&(Q(t,r),Yn(t))}function BC(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),oy(t,a)}function VC(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,u=t.memoizedState;u!==null&&(a=u.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),oy(t,a)}function $C(t,r){return fn(t,r)}var kl=null,Cs=null,Ud=!1,jl=!1,zd=!1,xr=0;function Yn(t){t!==Cs&&t.next===null&&(Cs===null?kl=Cs=t:Cs=Cs.next=t),jl=!0,Ud||(Ud=!0,qC())}function Ua(t,r){if(!zd&&jl){zd=!0;do for(var a=!1,l=kl;l!==null;){if(t!==0){var u=l.pendingLanes;if(u===0)var f=0;else{var v=l.suspendedLanes,y=l.pingedLanes;f=(1<<31-Wt(42|t)+1)-1,f&=u&~(v&~y),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,dy(l,f))}else f=qe,f=na(l,l===at?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||qr(l,f)||(a=!0,dy(l,f));l=l.next}while(a);zd=!1}}function GC(){ly()}function ly(){jl=Ud=!1;var t=0;xr!==0&&(JC()&&(t=xr),xr=0);for(var r=Yt(),a=null,l=kl;l!==null;){var u=l.next,f=cy(l,r);f===0?(l.next=null,a===null?kl=u:a.next=u,u===null&&(Cs=a)):(a=l,(t!==0||(f&3)!==0)&&(jl=!0)),l=u}Ua(t)}function cy(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,u=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-Wt(f),y=1<<v,S=u[v];S===-1?((y&a)===0||(y&l)!==0)&&(u[v]=lg(y,r)):S<=r&&(t.expiredLanes|=y),f&=~y}if(r=at,a=qe,a=na(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Lt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||qr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Lt(l),Ge(a)){case 2:case 8:a=fr;break;case 32:a=Ci;break;case 268435456:a=hn;break;default:a=Ci}return l=uy.bind(null,t),a=fn(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Lt(l),t.callbackPriority=2,t.callbackNode=null,2}function uy(t,r){if(jt!==0&&jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Il()&&t.callbackNode!==a)return null;var l=qe;return l=na(t,t===at?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Yv(t,l,r),cy(t,Yt()),t.callbackNode!=null&&t.callbackNode===a?uy.bind(null,t):null)}function dy(t,r){if(Il())return null;Yv(t,r,!0)}function qC(){tT(function(){(Ke&6)!==0?fn(Gr,GC):ly()})}function Hd(){return xr===0&&(xr=nu()),xr}function fy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:qo(""+t)}function hy(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function YC(t,r,a,l,u){if(r==="submit"&&a&&a.stateNode===u){var f=fy((u[We]||null).action),v=l.submitter;v&&(r=(r=v[We]||null)?fy(r.formAction):v.getAttribute("formAction"),r!==null&&(f=r,v=null));var y=new Qo("action","action",null,l,u);t.push({event:y,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(xr!==0){var S=v?hy(u,v):new FormData(u);ad(a,{pending:!0,data:S,method:u.method,action:f},null,S)}}else typeof f=="function"&&(y.preventDefault(),S=v?hy(u,v):new FormData(u),ad(a,{pending:!0,data:S,method:u.method,action:f},f,S))},currentTarget:u}]})}}for(var Bd=0;Bd<wu.length;Bd++){var Vd=wu[Bd],FC=Vd.toLowerCase(),WC=Vd[0].toUpperCase()+Vd.slice(1);An(FC,"on"+WC)}An(Yg,"onAnimationEnd"),An(Fg,"onAnimationIteration"),An(Wg,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(dC,"onTransitionRun"),An(fC,"onTransitionStart"),An(hC,"onTransitionCancel"),An(Qg,"onTransitionEnd"),Fr("onMouseEnter",["mouseout","mouseover"]),Fr("onMouseLeave",["mouseout","mouseover"]),Fr("onPointerEnter",["pointerout","pointerover"]),Fr("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(za));function py(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],u=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var v=l.length-1;0<=v;v--){var y=l[v],S=y.instance,D=y.currentTarget;if(y=y.listener,S!==f&&u.isPropagationStopped())break e;f=y,u.currentTarget=D;try{f(u)}catch(H){El(H)}u.currentTarget=null,f=S}else for(v=0;v<l.length;v++){if(y=l[v],S=y.instance,D=y.currentTarget,y=y.listener,S!==f&&u.isPropagationStopped())break e;f=y,u.currentTarget=D;try{f(u)}catch(H){El(H)}u.currentTarget=null,f=S}}}}function ze(t,r){var a=r[Vt];a===void 0&&(a=r[Vt]=new Set);var l=t+"__bubble";a.has(l)||(gy(r,t,2,!1),a.add(l))}function $d(t,r,a){var l=0;r&&(l|=4),gy(a,t,l,r)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Gd(t){if(!t[Ml]){t[Ml]=!0,Yr.forEach(function(a){a!=="selectionchange"&&(QC.has(a)||$d(a,!1,t),$d(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ml]||(r[Ml]=!0,$d("selectionchange",!1,r))}}function gy(t,r,a,l){switch(zy(r)){case 2:var u=ST;break;case 8:u=CT;break;default:u=sf}a=u.bind(null,r,a,t),u=void 0,!fu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(u=!0),l?u!==void 0?t.addEventListener(r,a,{capture:!0,passive:u}):t.addEventListener(r,a,!0):u!==void 0?t.addEventListener(r,a,{passive:u}):t.addEventListener(r,a,!1)}function qd(t,r,a,l,u){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var y=l.stateNode.containerInfo;if(y===u)break;if(v===4)for(v=l.return;v!==null;){var S=v.tag;if((S===3||S===4)&&v.stateNode.containerInfo===u)return;v=v.return}for(;y!==null;){if(v=Qt(y),v===null)return;if(S=v.tag,S===5||S===6||S===26||S===27){l=f=v;continue e}y=y.parentNode}}l=l.return}Sg(function(){var D=f,H=uu(a),G=[];e:{var k=Kg.get(t);if(k!==void 0){var j=Qo,we=t;switch(t){case"keypress":if(Fo(a)===0)break e;case"keydown":case"keyup":j=$S;break;case"focusin":we="focus",j=mu;break;case"focusout":we="blur",j=mu;break;case"beforeblur":case"afterblur":j=mu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=wg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=DS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=YS;break;case Yg:case Fg:case Wg:j=jS;break;case Qg:j=WS;break;case"scroll":case"scrollend":j=xS;break;case"wheel":j=KS;break;case"copy":case"cut":case"paste":j=LS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Rg;break;case"toggle":case"beforetoggle":j=ZS}var be=(r&4)!==0,tt=!be&&(t==="scroll"||t==="scrollend"),R=be?k!==null?k+"Capture":null:k;be=[];for(var w=D,N;w!==null;){var V=w;if(N=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||N===null||R===null||(V=ra(w,R),V!=null&&be.push(Ha(w,V,N))),tt)break;w=w.return}0<be.length&&(k=new j(k,we,null,a,H),G.push({event:k,listeners:be}))}}if((r&7)===0){e:{if(k=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",k&&a!==cu&&(we=a.relatedTarget||a.fromElement)&&(Qt(we)||we[Et]))break e;if((j||k)&&(k=H.window===H?H:(k=H.ownerDocument)?k.defaultView||k.parentWindow:window,j?(we=a.relatedTarget||a.toElement,j=D,we=we?Qt(we):null,we!==null&&(tt=c(we),be=we.tag,we!==tt||be!==5&&be!==27&&be!==6)&&(we=null)):(j=null,we=D),j!==we)){if(be=wg,V="onMouseLeave",R="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(be=Rg,V="onPointerLeave",R="onPointerEnter",w="pointer"),tt=j==null?k:Ut(j),N=we==null?k:Ut(we),k=new be(V,w+"leave",j,a,H),k.target=tt,k.relatedTarget=N,V=null,Qt(H)===D&&(be=new be(R,w+"enter",we,a,H),be.target=N,be.relatedTarget=tt,V=be),tt=V,j&&we)t:{for(be=j,R=we,w=0,N=be;N;N=Ts(N))w++;for(N=0,V=R;V;V=Ts(V))N++;for(;0<w-N;)be=Ts(be),w--;for(;0<N-w;)R=Ts(R),N--;for(;w--;){if(be===R||R!==null&&be===R.alternate)break t;be=Ts(be),R=Ts(R)}be=null}else be=null;j!==null&&my(G,k,j,be,!1),we!==null&&tt!==null&&my(G,tt,we,be,!0)}}e:{if(k=D?Ut(D):window,j=k.nodeName&&k.nodeName.toLowerCase(),j==="select"||j==="input"&&k.type==="file")var le=Mg;else if(kg(k))if(Lg)le=lC;else{le=aC;var Me=sC}else j=k.nodeName,!j||j.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?D&&lu(D.elementType)&&(le=Mg):le=oC;if(le&&(le=le(t,D))){jg(G,le,a,H);break e}Me&&Me(t,k,D),t==="focusout"&&D&&k.type==="number"&&D.memoizedProps.value!=null&&ou(k,"number",k.value)}switch(Me=D?Ut(D):window,t){case"focusin":(kg(Me)||Me.contentEditable==="true")&&(es=Me,Su=D,fa=null);break;case"focusout":fa=Su=es=null;break;case"mousedown":Cu=!0;break;case"contextmenu":case"mouseup":case"dragend":Cu=!1,Gg(G,a,H);break;case"selectionchange":if(uC)break;case"keydown":case"keyup":Gg(G,a,H)}var pe;if(yu)e:{switch(t){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Jr?Dg(t,a)&&(Ee="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(Ng&&a.locale!=="ko"&&(Jr||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Jr&&(pe=Cg()):(Oi=H,hu="value"in Oi?Oi.value:Oi.textContent,Jr=!0)),Me=Ll(D,Ee),0<Me.length&&(Ee=new Og(Ee,t,null,a,H),G.push({event:Ee,listeners:Me}),pe?Ee.data=pe:(pe=Ig(a),pe!==null&&(Ee.data=pe)))),(pe=eC?tC(t,a):nC(t,a))&&(Ee=Ll(D,"onBeforeInput"),0<Ee.length&&(Me=new Og("onBeforeInput","beforeinput",null,a,H),G.push({event:Me,listeners:Ee}),Me.data=pe)),YC(G,t,D,a,H)}py(G,r)})}function Ha(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Ll(t,r){for(var a=r+"Capture",l=[];t!==null;){var u=t,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=ra(t,a),u!=null&&l.unshift(Ha(t,u,f)),u=ra(t,r),u!=null&&l.push(Ha(t,u,f))),t.tag===3)return l;t=t.return}return[]}function Ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function my(t,r,a,l,u){for(var f=r._reactName,v=[];a!==null&&a!==l;){var y=a,S=y.alternate,D=y.stateNode;if(y=y.tag,S!==null&&S===l)break;y!==5&&y!==26&&y!==27||D===null||(S=D,u?(D=ra(a,f),D!=null&&v.unshift(Ha(a,D,S))):u||(D=ra(a,f),D!=null&&v.push(Ha(a,D,S)))),a=a.return}v.length!==0&&t.push({event:r,listeners:v})}var KC=/\r\n?/g,XC=/\u0000|\uFFFD/g;function vy(t){return(typeof t=="string"?t:""+t).replace(KC,`
`).replace(XC,"")}function yy(t,r){return r=vy(r),vy(t)===r}function Pl(){}function et(t,r,a,l,u,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Kr(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Kr(t,""+l);break;case"className":Vo(t,"class",l);break;case"tabIndex":Vo(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Vo(t,a,l);break;case"style":bg(t,l,f);break;case"data":if(r!=="object"){Vo(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=qo(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&et(t,r,"name",u.name,u,null),et(t,r,"formEncType",u.formEncType,u,null),et(t,r,"formMethod",u.formMethod,u,null),et(t,r,"formTarget",u.formTarget,u,null)):(et(t,r,"encType",u.encType,u,null),et(t,r,"method",u.method,u,null),et(t,r,"target",u.target,u,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=qo(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Pl);break;case"onScroll":l!=null&&ze("scroll",t);break;case"onScrollEnd":l!=null&&ze("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=qo(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ze("beforetoggle",t),ze("toggle",t),Bo(t,"popover",l);break;case"xlinkActuate":Zn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Zn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Zn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Zn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Zn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Zn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Zn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Zn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Zn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Bo(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=RS.get(a)||a,Bo(t,a,l))}}function Yd(t,r,a,l,u,f){switch(a){case"style":bg(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Kr(t,l):(typeof l=="number"||typeof l=="bigint")&&Kr(t,""+l);break;case"onScroll":l!=null&&ze("scroll",t);break;case"onScrollEnd":l!=null&&ze("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Pl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cg.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),r=a.slice(2,u?a.length-7:void 0),f=t[We]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,u),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,u);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Bo(t,a,l)}}}function Mt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",t),ze("load",t);var l=!1,u=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":l=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:et(t,r,f,v,a,null)}}u&&et(t,r,"srcSet",a.srcSet,a,null),l&&et(t,r,"src",a.src,a,null);return;case"input":ze("invalid",t);var y=f=v=u=null,S=null,D=null;for(l in a)if(a.hasOwnProperty(l)){var H=a[l];if(H!=null)switch(l){case"name":u=H;break;case"type":v=H;break;case"checked":S=H;break;case"defaultChecked":D=H;break;case"value":f=H;break;case"defaultValue":y=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,r));break;default:et(t,r,l,H,a,null)}}mg(t,f,y,S,D,v,u,!1),$o(t);return;case"select":ze("invalid",t),l=v=f=null;for(u in a)if(a.hasOwnProperty(u)&&(y=a[u],y!=null))switch(u){case"value":f=y;break;case"defaultValue":v=y;break;case"multiple":l=y;default:et(t,r,u,y,a,null)}r=f,a=v,t.multiple=!!l,r!=null?Qr(t,!!l,r,!1):a!=null&&Qr(t,!!l,a,!0);return;case"textarea":ze("invalid",t),f=u=l=null;for(v in a)if(a.hasOwnProperty(v)&&(y=a[v],y!=null))switch(v){case"value":l=y;break;case"defaultValue":u=y;break;case"children":f=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:et(t,r,v,y,a,null)}yg(t,l,u,f),$o(t);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(l=a[S],l!=null))switch(S){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:et(t,r,S,l,a,null)}return;case"dialog":ze("beforetoggle",t),ze("toggle",t),ze("cancel",t),ze("close",t);break;case"iframe":case"object":ze("load",t);break;case"video":case"audio":for(l=0;l<za.length;l++)ze(za[l],t);break;case"image":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"embed":case"source":case"link":ze("error",t),ze("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:et(t,r,D,l,a,null)}return;default:if(lu(r)){for(H in a)a.hasOwnProperty(H)&&(l=a[H],l!==void 0&&Yd(t,r,H,l,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(l=a[y],l!=null&&et(t,r,y,l,a,null))}function ZC(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,v=null,y=null,S=null,D=null,H=null;for(j in a){var G=a[j];if(a.hasOwnProperty(j)&&G!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":S=G;default:l.hasOwnProperty(j)||et(t,r,j,null,l,G)}}for(var k in l){var j=l[k];if(G=a[k],l.hasOwnProperty(k)&&(j!=null||G!=null))switch(k){case"type":f=j;break;case"name":u=j;break;case"checked":D=j;break;case"defaultChecked":H=j;break;case"value":v=j;break;case"defaultValue":y=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,r));break;default:j!==G&&et(t,r,k,j,l,G)}}au(t,v,y,S,D,H,f,u);return;case"select":j=v=y=k=null;for(f in a)if(S=a[f],a.hasOwnProperty(f)&&S!=null)switch(f){case"value":break;case"multiple":j=S;default:l.hasOwnProperty(f)||et(t,r,f,null,l,S)}for(u in l)if(f=l[u],S=a[u],l.hasOwnProperty(u)&&(f!=null||S!=null))switch(u){case"value":k=f;break;case"defaultValue":y=f;break;case"multiple":v=f;default:f!==S&&et(t,r,u,f,l,S)}r=y,a=v,l=j,k!=null?Qr(t,!!a,k,!1):!!l!=!!a&&(r!=null?Qr(t,!!a,r,!0):Qr(t,!!a,a?[]:"",!1));return;case"textarea":j=k=null;for(y in a)if(u=a[y],a.hasOwnProperty(y)&&u!=null&&!l.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:et(t,r,y,null,l,u)}for(v in l)if(u=l[v],f=a[v],l.hasOwnProperty(v)&&(u!=null||f!=null))switch(v){case"value":k=u;break;case"defaultValue":j=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&et(t,r,v,u,l,f)}vg(t,k,j);return;case"option":for(var we in a)if(k=a[we],a.hasOwnProperty(we)&&k!=null&&!l.hasOwnProperty(we))switch(we){case"selected":t.selected=!1;break;default:et(t,r,we,null,l,k)}for(S in l)if(k=l[S],j=a[S],l.hasOwnProperty(S)&&k!==j&&(k!=null||j!=null))switch(S){case"selected":t.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:et(t,r,S,k,l,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)k=a[be],a.hasOwnProperty(be)&&k!=null&&!l.hasOwnProperty(be)&&et(t,r,be,null,l,k);for(D in l)if(k=l[D],j=a[D],l.hasOwnProperty(D)&&k!==j&&(k!=null||j!=null))switch(D){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(137,r));break;default:et(t,r,D,k,l,j)}return;default:if(lu(r)){for(var tt in a)k=a[tt],a.hasOwnProperty(tt)&&k!==void 0&&!l.hasOwnProperty(tt)&&Yd(t,r,tt,void 0,l,k);for(H in l)k=l[H],j=a[H],!l.hasOwnProperty(H)||k===j||k===void 0&&j===void 0||Yd(t,r,H,k,l,j);return}}for(var R in a)k=a[R],a.hasOwnProperty(R)&&k!=null&&!l.hasOwnProperty(R)&&et(t,r,R,null,l,k);for(G in l)k=l[G],j=a[G],!l.hasOwnProperty(G)||k===j||k==null&&j==null||et(t,r,G,k,l,j)}var Fd=null,Wd=null;function Ul(t){return t.nodeType===9?t:t.ownerDocument}function _y(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function by(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Qd(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Kd=null;function JC(){var t=window.event;return t&&t.type==="popstate"?t===Kd?!1:(Kd=t,!0):(Kd=null,!1)}var Ey=typeof setTimeout=="function"?setTimeout:void 0,eT=typeof clearTimeout=="function"?clearTimeout:void 0,Sy=typeof Promise=="function"?Promise:void 0,tT=typeof queueMicrotask=="function"?queueMicrotask:typeof Sy<"u"?function(t){return Sy.resolve(null).then(t).catch(nT)}:Ey;function nT(t){setTimeout(function(){throw t})}function Vi(t){return t==="head"}function Cy(t,r){var a=r,l=0,u=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var v=t.ownerDocument;if(a&1&&Ba(v.documentElement),a&2&&Ba(v.body),a&4)for(a=v.head,Ba(a),v=a.firstChild;v;){var y=v.nextSibling,S=v.nodeName;v[Bn]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=y}}if(u===0){t.removeChild(f),Qa(r);return}u--}else a==="$"||a==="$?"||a==="$!"?u++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Qa(r)}function Xd(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Xd(a),gn(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function iT(t,r,a,l){for(;t.nodeType===1;){var u=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Bn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=In(t.nextSibling),t===null)break}return null}function rT(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=In(t.nextSibling),t===null))return null;return t}function Zd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function sT(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function In(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var Jd=null;function Ty(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function wy(t,r,a){switch(r=Ul(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ba(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);gn(t)}var wn=new Map,Oy=new Set;function zl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var fi=ee.d;ee.d={f:aT,r:oT,D:lT,C:cT,L:uT,m:dT,X:hT,S:fT,M:pT};function aT(){var t=fi.f(),r=Al();return t||r}function oT(t){var r=mn(t);r!==null&&r.tag===5&&r.type==="form"?Ym(r):fi.r(t)}var ws=typeof document>"u"?null:document;function Ry(t,r,a){var l=ws;if(l&&typeof r=="string"&&r){var u=yn(r);u='link[rel="'+t+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),Oy.has(u)||(Oy.add(u),t={rel:t,crossOrigin:a,href:r},l.querySelector(u)===null&&(r=l.createElement("link"),Mt(r,"link",t),ht(r),l.head.appendChild(r)))}}function lT(t){fi.D(t),Ry("dns-prefetch",t,null)}function cT(t,r){fi.C(t,r),Ry("preconnect",t,r)}function uT(t,r,a){fi.L(t,r,a);var l=ws;if(l&&t&&r){var u='link[rel="preload"][as="'+yn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+yn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+yn(a.imageSizes)+'"]')):u+='[href="'+yn(t)+'"]';var f=u;switch(r){case"style":f=Os(t);break;case"script":f=Rs(t)}wn.has(f)||(t=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),wn.set(f,t),l.querySelector(u)!==null||r==="style"&&l.querySelector(Va(f))||r==="script"&&l.querySelector($a(f))||(r=l.createElement("link"),Mt(r,"link",t),ht(r),l.head.appendChild(r)))}}function dT(t,r){fi.m(t,r);var a=ws;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",u='link[rel="modulepreload"][as="'+yn(l)+'"][href="'+yn(t)+'"]',f=u;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Rs(t)}if(!wn.has(f)&&(t=_({rel:"modulepreload",href:t},r),wn.set(f,t),a.querySelector(u)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($a(f)))return}l=a.createElement("link"),Mt(l,"link",t),ht(l),a.head.appendChild(l)}}}function fT(t,r,a){fi.S(t,r,a);var l=ws;if(l&&t){var u=xn(l).hoistableStyles,f=Os(t);r=r||"default";var v=u.get(f);if(!v){var y={loading:0,preload:null};if(v=l.querySelector(Va(f)))y.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},a),(a=wn.get(f))&&ef(t,a);var S=v=l.createElement("link");ht(S),Mt(S,"link",t),S._p=new Promise(function(D,H){S.onload=D,S.onerror=H}),S.addEventListener("load",function(){y.loading|=1}),S.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Hl(v,r,l)}v={type:"stylesheet",instance:v,count:1,state:y},u.set(f,v)}}}function hT(t,r){fi.X(t,r);var a=ws;if(a&&t){var l=xn(a).hoistableScripts,u=Rs(t),f=l.get(u);f||(f=a.querySelector($a(u)),f||(t=_({src:t,async:!0},r),(r=wn.get(u))&&tf(t,r),f=a.createElement("script"),ht(f),Mt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function pT(t,r){fi.M(t,r);var a=ws;if(a&&t){var l=xn(a).hoistableScripts,u=Rs(t),f=l.get(u);f||(f=a.querySelector($a(u)),f||(t=_({src:t,async:!0,type:"module"},r),(r=wn.get(u))&&tf(t,r),f=a.createElement("script"),ht(f),Mt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function Ny(t,r,a,l){var u=(u=ae.current)?zl(u):null;if(!u)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Os(a.href),a=xn(u).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Os(a.href);var f=xn(u).hoistableStyles,v=f.get(t);if(v||(u=u.ownerDocument||u,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=u.querySelector(Va(t)))&&!f._p&&(v.instance=f,v.state.loading=5),wn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},wn.set(t,a),f||gT(u,t,a,v.state))),r&&l===null)throw Error(s(528,""));return v}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Rs(a),a=xn(u).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Os(t){return'href="'+yn(t)+'"'}function Va(t){return'link[rel="stylesheet"]['+t+"]"}function xy(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function gT(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Mt(r,"link",a),ht(r),t.head.appendChild(r))}function Rs(t){return'[src="'+yn(t)+'"]'}function $a(t){return"script[async]"+t}function Ay(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+yn(a.href)+'"]');if(l)return r.instance=l,ht(l),l;var u=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ht(l),Mt(l,"style",u),Hl(l,a.precedence,t),r.instance=l;case"stylesheet":u=Os(a.href);var f=t.querySelector(Va(u));if(f)return r.state.loading|=4,r.instance=f,ht(f),f;l=xy(a),(u=wn.get(u))&&ef(l,u),f=(t.ownerDocument||t).createElement("link"),ht(f);var v=f;return v._p=new Promise(function(y,S){v.onload=y,v.onerror=S}),Mt(f,"link",l),r.state.loading|=4,Hl(f,a.precedence,t),r.instance=f;case"script":return f=Rs(a.src),(u=t.querySelector($a(f)))?(r.instance=u,ht(u),u):(l=a,(u=wn.get(f))&&(l=_({},a),tf(l,u)),t=t.ownerDocument||t,u=t.createElement("script"),ht(u),Mt(u,"link",l),t.head.appendChild(u),r.instance=u);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Hl(l,a.precedence,t));return r.instance}function Hl(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=l.length?l[l.length-1]:null,f=u,v=0;v<l.length;v++){var y=l[v];if(y.dataset.precedence===r)f=y;else if(f!==u)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function ef(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function tf(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Bl=null;function Dy(t,r,a){if(Bl===null){var l=new Map,u=Bl=new Map;u.set(a,l)}else u=Bl,l=u.get(a),l||(l=new Map,u.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),u=0;u<a.length;u++){var f=a[u];if(!(f[Bn]||f[it]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(r)||"";v=t+v;var y=l.get(v);y?y.push(f):l.set(v,[f])}}return l}function Iy(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function mT(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function ky(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Ga=null;function vT(){}function yT(t,r,a){if(Ga===null)throw Error(s(475));var l=Ga;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var u=Os(a.href),f=t.querySelector(Va(u));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Vl.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,ht(f);return}f=t.ownerDocument||t,a=xy(a),(u=wn.get(u))&&ef(a,u),f=f.createElement("link"),ht(f);var v=f;v._p=new Promise(function(y,S){v.onload=y,v.onerror=S}),Mt(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Vl.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function _T(){if(Ga===null)throw Error(s(475));var t=Ga;return t.stylesheets&&t.count===0&&nf(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&nf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Vl(){if(this.count--,this.count===0){if(this.stylesheets)nf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $l=null;function nf(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$l=new Map,r.forEach(bT,t),$l=null,Vl.call(t))}function bT(t,r){if(!(r.state.loading&4)){var a=$l.get(t);if(a)var l=a.get(null);else{a=new Map,$l.set(t,a);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var v=u[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}u=r.instance,v=u.getAttribute("data-precedence"),f=a.get(v)||l,f===l&&a.set(null,u),a.set(v,u),this.count++,l=Vl.bind(this),u.addEventListener("load",l),u.addEventListener("error",l),f?f.parentNode.insertBefore(u,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),r.state.loading|=4}}var qa={$$typeof:J,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function ET(t,r,a,l,u,f,v,y){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=l,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=y,this.incompleteTransitions=new Map}function jy(t,r,a,l,u,f,v,y,S,D,H,G){return t=new ET(t,r,a,v,y,S,D,G),r=1,f===!0&&(r|=24),f=an(3,null,null,r),t.current=f,f.stateNode=t,r=Pu(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Bu(f),t}function My(t){return t?(t=rs,t):rs}function Ly(t,r,a,l,u,f){u=My(u),l.context===null?l.context=u:l.pendingContext=u,l=xi(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Ai(t,l,r),a!==null&&(dn(a,t,r),Ea(a,t,r))}function Py(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function rf(t,r){Py(t,r),(t=t.alternate)&&Py(t,r)}function Uy(t){if(t.tag===13){var r=is(t,67108864);r!==null&&dn(r,t,67108864),rf(t,67108864)}}var Gl=!0;function ST(t,r,a,l){var u=M.T;M.T=null;var f=ee.p;try{ee.p=2,sf(t,r,a,l)}finally{ee.p=f,M.T=u}}function CT(t,r,a,l){var u=M.T;M.T=null;var f=ee.p;try{ee.p=8,sf(t,r,a,l)}finally{ee.p=f,M.T=u}}function sf(t,r,a,l){if(Gl){var u=af(l);if(u===null)qd(t,r,l,ql,a),Hy(t,l);else if(wT(u,t,r,a,l))l.stopPropagation();else if(Hy(t,l),r&4&&-1<TT.indexOf(t)){for(;u!==null;){var f=mn(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=wi(f.pendingLanes);if(v!==0){var y=f;for(y.pendingLanes|=2,y.entangledLanes|=2;v;){var S=1<<31-Wt(v);y.entanglements[1]|=S,v&=~S}Yn(f),(Ke&6)===0&&(Nl=Yt()+500,Ua(0))}}break;case 13:y=is(f,2),y!==null&&dn(y,f,2),Al(),rf(f,2)}if(f=af(l),f===null&&qd(t,r,l,ql,a),f===u)break;u=f}u!==null&&l.stopPropagation()}else qd(t,r,l,null,a)}}function af(t){return t=uu(t),of(t)}var ql=null;function of(t){if(ql=null,t=Qt(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return ql=t,null}function zy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Js()){case Gr:return 2;case fr:return 8;case Ci:case Ve:return 32;case hn:return 268435456;default:return 32}default:return 32}}var lf=!1,$i=null,Gi=null,qi=null,Ya=new Map,Fa=new Map,Yi=[],TT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hy(t,r){switch(t){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":Ya.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fa.delete(r.pointerId)}}function Wa(t,r,a,l,u,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[u]},r!==null&&(r=mn(r),r!==null&&Uy(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,u!==null&&r.indexOf(u)===-1&&r.push(u),t)}function wT(t,r,a,l,u){switch(r){case"focusin":return $i=Wa($i,t,r,a,l,u),!0;case"dragenter":return Gi=Wa(Gi,t,r,a,l,u),!0;case"mouseover":return qi=Wa(qi,t,r,a,l,u),!0;case"pointerover":var f=u.pointerId;return Ya.set(f,Wa(Ya.get(f)||null,t,r,a,l,u)),!0;case"gotpointercapture":return f=u.pointerId,Fa.set(f,Wa(Fa.get(f)||null,t,r,a,l,u)),!0}return!1}function By(t){var r=Qt(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,Pt(t.priority,function(){if(a.tag===13){var l=un();l=Ie(l);var u=is(a,l);u!==null&&dn(u,a,l),rf(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yl(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=af(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);cu=l,a.target.dispatchEvent(l),cu=null}else return r=mn(a),r!==null&&Uy(r),t.blockedOn=a,!1;r.shift()}return!0}function Vy(t,r,a){Yl(t)&&a.delete(r)}function OT(){lf=!1,$i!==null&&Yl($i)&&($i=null),Gi!==null&&Yl(Gi)&&(Gi=null),qi!==null&&Yl(qi)&&(qi=null),Ya.forEach(Vy),Fa.forEach(Vy)}function Fl(t,r){t.blockedOn===r&&(t.blockedOn=null,lf||(lf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,OT)))}var Wl=null;function $y(t){Wl!==t&&(Wl=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Wl===t&&(Wl=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],u=t[r+2];if(typeof l!="function"){if(of(l||a)===null)continue;break}var f=mn(a);f!==null&&(t.splice(r,3),r-=3,ad(f,{pending:!0,data:u,method:a.method,action:l},l,u))}}))}function Qa(t){function r(S){return Fl(S,t)}$i!==null&&Fl($i,t),Gi!==null&&Fl(Gi,t),qi!==null&&Fl(qi,t),Ya.forEach(r),Fa.forEach(r);for(var a=0;a<Yi.length;a++){var l=Yi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Yi.length&&(a=Yi[0],a.blockedOn===null);)By(a),a.blockedOn===null&&Yi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var u=a[l],f=a[l+1],v=u[We]||null;if(typeof f=="function")v||$y(a);else if(v){var y=null;if(f&&f.hasAttribute("formAction")){if(u=f,v=f[We]||null)y=v.formAction;else if(of(u)!==null)continue}else y=v.action;typeof y=="function"?a[l+1]=y:(a.splice(l,3),l-=3),$y(a)}}}function cf(t){this._internalRoot=t}Ql.prototype.render=cf.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=un();Ly(a,l,t,r,null,null)},Ql.prototype.unmount=cf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ly(t.current,2,null,t,null,null),Al(),r[Et]=null}};function Ql(t){this._internalRoot=t}Ql.prototype.unstable_scheduleHydration=function(t){if(t){var r=lt();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Yi.length&&r!==0&&r<Yi[a].priority;a++);Yi.splice(a,0,t),a===0&&By(t)}};var Gy=e.version;if(Gy!=="19.1.0")throw Error(s(527,Gy,"19.1.0"));ee.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var RT={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kl.isDisabled&&Kl.supportsFiber)try{Ti=Kl.inject(RT),Ft=Kl}catch{}}return Xa.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",u=av,f=ov,v=lv,y=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(u=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(y=r.unstable_transitionCallbacks)),r=jy(t,1,!1,null,null,a,l,u,f,v,y,null),t[Et]=r.current,Gd(t),new cf(r)},Xa.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,u="",f=av,v=ov,y=lv,S=null,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks),a.formState!==void 0&&(D=a.formState)),r=jy(t,1,!0,r,a??null,l,u,f,v,y,S,D),r.context=My(null),a=r.current,l=un(),l=Ie(l),u=xi(l),u.callback=null,Ai(a,u,l),a=l,r.current.lanes=a,Q(r,a),Yn(r),t[Et]=r.current,Gd(t),new Ql(r)},Xa.version="19.1.0",Xa}var e_;function LT(){if(e_)return ff.exports;e_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ff.exports=MT(),ff.exports}var PT=LT();const UT=So(PT),xb=A.createContext({dragDropManager:void 0});function On(i){return"Minified Redux error #"+i+"; visit https://redux.js.org/Errors?code="+i+" for the full message or use the non-minified dev environment for full errors. "}var t_=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),n_=function(){return Math.random().toString(36).substring(7).split("").join(".")},i_={INIT:"@@redux/INIT"+n_(),REPLACE:"@@redux/REPLACE"+n_()};function zT(i){if(typeof i!="object"||i===null)return!1;for(var e=i;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(i)===e}function Ab(i,e,n){var s;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(On(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(On(1));return n(Ab)(i,e)}if(typeof i!="function")throw new Error(On(2));var o=i,c=e,d=[],h=d,p=!1;function g(){h===d&&(h=d.slice())}function _(){if(p)throw new Error(On(3));return c}function b(L){if(typeof L!="function")throw new Error(On(4));if(p)throw new Error(On(5));var x=!0;return g(),h.push(L),function(){if(x){if(p)throw new Error(On(6));x=!1,g();var Y=h.indexOf(L);h.splice(Y,1),d=null}}}function E(L){if(!zT(L))throw new Error(On(7));if(typeof L.type>"u")throw new Error(On(8));if(p)throw new Error(On(9));try{p=!0,c=o(c,L)}finally{p=!1}for(var x=d=h,P=0;P<x.length;P++){var Y=x[P];Y()}return L}function O(L){if(typeof L!="function")throw new Error(On(10));o=L,E({type:i_.REPLACE})}function T(){var L,x=b;return L={subscribe:function(Y){if(typeof Y!="object"||Y===null)throw new Error(On(11));function J(){Y.next&&Y.next(_())}J();var te=x(J);return{unsubscribe:te}}},L[t_]=function(){return this},L}return E({type:i_.INIT}),s={dispatch:E,subscribe:b,getState:_,replaceReducer:O},s[t_]=T,s}function Ne(i,e,...n){if(HT()&&e===void 0)throw new Error("invariant requires an error message argument");if(!i){let s;if(e===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let o=0;s=new Error(e.replace(/%s/g,function(){return n[o++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}function HT(){return typeof process<"u"&&!0}function BT(i,e,n){return e.split(".").reduce((s,o)=>s&&s[o]?s[o]:n||null,i)}function VT(i,e){return i.filter(n=>n!==e)}function Db(i){return typeof i=="object"}function $T(i,e){const n=new Map,s=c=>{n.set(c,n.has(c)?n.get(c)+1:1)};i.forEach(s),e.forEach(s);const o=[];return n.forEach((c,d)=>{c===1&&o.push(d)}),o}function GT(i,e){return i.filter(n=>e.indexOf(n)>-1)}const Vh="dnd-core/INIT_COORDS",jc="dnd-core/BEGIN_DRAG",$h="dnd-core/PUBLISH_DRAG_SOURCE",Mc="dnd-core/HOVER",Lc="dnd-core/DROP",Pc="dnd-core/END_DRAG";function r_(i,e){return{type:Vh,payload:{sourceClientOffset:e||null,clientOffset:i||null}}}const qT={type:Vh,payload:{clientOffset:null,sourceClientOffset:null}};function YT(i){return function(n=[],s={publishSource:!0}){const{publishSource:o=!0,clientOffset:c,getSourceClientOffset:d}=s,h=i.getMonitor(),p=i.getRegistry();i.dispatch(r_(c)),FT(n,h,p);const g=KT(n,h);if(g==null){i.dispatch(qT);return}let _=null;if(c){if(!d)throw new Error("getSourceClientOffset must be defined");WT(d),_=d(g)}i.dispatch(r_(c,_));const E=p.getSource(g).beginDrag(h,g);if(E==null)return;QT(E),p.pinSource(g);const O=p.getSourceType(g);return{type:jc,payload:{itemType:O,item:E,sourceId:g,clientOffset:c||null,sourceClientOffset:_||null,isSourcePublic:!!o}}}}function FT(i,e,n){Ne(!e.isDragging(),"Cannot call beginDrag while dragging."),i.forEach(function(s){Ne(n.getSource(s),"Expected sourceIds to be registered.")})}function WT(i){Ne(typeof i=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function QT(i){Ne(Db(i),"Item must be an object.")}function KT(i,e){let n=null;for(let s=i.length-1;s>=0;s--)if(e.canDragSource(i[s])){n=i[s];break}return n}function XT(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function ZT(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){XT(i,o,n[o])})}return i}function JT(i){return function(n={}){const s=i.getMonitor(),o=i.getRegistry();ew(s),iw(s).forEach((d,h)=>{const p=tw(d,h,o,s),g={type:Lc,payload:{dropResult:ZT({},n,p)}};i.dispatch(g)})}}function ew(i){Ne(i.isDragging(),"Cannot call drop while not dragging."),Ne(!i.didDrop(),"Cannot call drop twice during one drag operation.")}function tw(i,e,n,s){const o=n.getTarget(i);let c=o?o.drop(s,i):void 0;return nw(c),typeof c>"u"&&(c=e===0?{}:s.getDropResult()),c}function nw(i){Ne(typeof i>"u"||Db(i),"Drop result must either be an object or undefined.")}function iw(i){const e=i.getTargetIds().filter(i.canDropOnTarget,i);return e.reverse(),e}function rw(i){return function(){const n=i.getMonitor(),s=i.getRegistry();sw(n);const o=n.getSourceId();return o!=null&&(s.getSource(o,!0).endDrag(n,o),s.unpinSource()),{type:Pc}}}function sw(i){Ne(i.isDragging(),"Cannot call endDrag while not dragging.")}function $f(i,e){return e===null?i===null:Array.isArray(i)?i.some(n=>n===e):i===e}function aw(i){return function(n,{clientOffset:s}={}){ow(n);const o=n.slice(0),c=i.getMonitor(),d=i.getRegistry(),h=c.getItemType();return cw(o,d,h),lw(o,c,d),uw(o,c,d),{type:Mc,payload:{targetIds:o,clientOffset:s||null}}}}function ow(i){Ne(Array.isArray(i),"Expected targetIds to be an array.")}function lw(i,e,n){Ne(e.isDragging(),"Cannot call hover while not dragging."),Ne(!e.didDrop(),"Cannot call hover after drop.");for(let s=0;s<i.length;s++){const o=i[s];Ne(i.lastIndexOf(o)===s,"Expected targetIds to be unique in the passed array.");const c=n.getTarget(o);Ne(c,"Expected targetIds to be registered.")}}function cw(i,e,n){for(let s=i.length-1;s>=0;s--){const o=i[s],c=e.getTargetType(o);$f(c,n)||i.splice(s,1)}}function uw(i,e,n){i.forEach(function(s){n.getTarget(s).hover(e,s)})}function dw(i){return function(){if(i.getMonitor().isDragging())return{type:$h}}}function fw(i){return{beginDrag:YT(i),publishDragSource:dw(i),hover:aw(i),drop:JT(i),endDrag:rw(i)}}class hw{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function s(c){return(...d)=>{const h=c.apply(e,d);typeof h<"u"&&n(h)}}const o=fw(this);return Object.keys(o).reduce((c,d)=>{const h=o[d];return c[d]=s(h),c},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const s=this.store.getState().refCount>0;this.backend&&(s&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!s&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function pw(i,e){return{x:i.x+e.x,y:i.y+e.y}}function Ib(i,e){return{x:i.x-e.x,y:i.y-e.y}}function gw(i){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:s}=i;return!e||!n||!s?null:Ib(pw(e,s),n)}function mw(i){const{clientOffset:e,initialClientOffset:n}=i;return!e||!n?null:Ib(e,n)}const io=[],Gh=[];io.__IS_NONE__=!0;Gh.__IS_ALL__=!0;function vw(i,e){return i===io?!1:i===Gh||typeof e>"u"?!0:GT(e,i).length>0}class yw{subscribeToStateChange(e,n={}){const{handlerIds:s}=n;Ne(typeof e=="function","listener must be a function."),Ne(typeof s>"u"||Array.isArray(s),"handlerIds, when specified, must be an array of strings.");let o=this.store.getState().stateId;const c=()=>{const d=this.store.getState(),h=d.stateId;try{h===o||h===o+1&&!vw(d.dirtyHandlerIds,s)||e()}finally{o=h}};return this.store.subscribe(c)}subscribeToOffsetChange(e){Ne(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const s=()=>{const o=this.store.getState().dragOffset;o!==n&&(n=o,e())};return this.store.subscribe(s)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return Ne(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(Ne(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const s=this.registry.getTargetType(e),o=this.getItemType();return $f(s,o)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(Ne(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const s=this.registry.getSourceType(e),o=this.getItemType();return s!==o?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:s}=n;if(!this.isDragging())return!1;const o=this.registry.getTargetType(e),c=this.getItemType();if(c&&!$f(o,c))return!1;const d=this.getTargetIds();if(!d.length)return!1;const h=d.indexOf(e);return s?h===d.length-1:h>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return gw(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return mw(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const s_=typeof global<"u"?global:self,kb=s_.MutationObserver||s_.WebKitMutationObserver;function jb(i){return function(){const n=setTimeout(o,0),s=setInterval(o,50);function o(){clearTimeout(n),clearInterval(s),i()}}}function _w(i){let e=1;const n=new kb(i),s=document.createTextNode("");return n.observe(s,{characterData:!0}),function(){e=-e,s.data=e}}const bw=typeof kb=="function"?_w:jb;class Ew{enqueueTask(e){const{queue:n,requestFlush:s}=this;n.length||(s(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let s=0,o=e.length-this.index;s<o;s++)e[s]=e[s+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=bw(this.flush),this.requestErrorThrow=jb(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Sw{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class Cw{create(e){const n=this.freeTasks,s=n.length?n.pop():new Sw(this.onError,o=>n[n.length]=o);return s.task=e,s}constructor(e){this.onError=e,this.freeTasks=[]}}const Mb=new Ew,Tw=new Cw(Mb.registerPendingError);function ww(i){Mb.enqueueTask(Tw.create(i))}const qh="dnd-core/ADD_SOURCE",Yh="dnd-core/ADD_TARGET",Fh="dnd-core/REMOVE_SOURCE",Uc="dnd-core/REMOVE_TARGET";function Ow(i){return{type:qh,payload:{sourceId:i}}}function Rw(i){return{type:Yh,payload:{targetId:i}}}function Nw(i){return{type:Fh,payload:{sourceId:i}}}function xw(i){return{type:Uc,payload:{targetId:i}}}function Aw(i){Ne(typeof i.canDrag=="function","Expected canDrag to be a function."),Ne(typeof i.beginDrag=="function","Expected beginDrag to be a function."),Ne(typeof i.endDrag=="function","Expected endDrag to be a function.")}function Dw(i){Ne(typeof i.canDrop=="function","Expected canDrop to be a function."),Ne(typeof i.hover=="function","Expected hover to be a function."),Ne(typeof i.drop=="function","Expected beginDrag to be a function.")}function Gf(i,e){if(e&&Array.isArray(i)){i.forEach(n=>Gf(n,!1));return}Ne(typeof i=="string"||typeof i=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Rn;(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(Rn||(Rn={}));let Iw=0;function kw(){return Iw++}function jw(i){const e=kw().toString();switch(i){case Rn.SOURCE:return`S${e}`;case Rn.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${i}`)}}function a_(i){switch(i[0]){case"S":return Rn.SOURCE;case"T":return Rn.TARGET;default:throw new Error(`Cannot parse handler ID: ${i}`)}}function o_(i,e){const n=i.entries();let s=!1;do{const{done:o,value:[,c]}=n.next();if(c===e)return!0;s=!!o}while(!s);return!1}class Mw{addSource(e,n){Gf(e),Aw(n);const s=this.addHandler(Rn.SOURCE,e,n);return this.store.dispatch(Ow(s)),s}addTarget(e,n){Gf(e,!0),Dw(n);const s=this.addHandler(Rn.TARGET,e,n);return this.store.dispatch(Rw(s)),s}containsHandler(e){return o_(this.dragSources,e)||o_(this.dropTargets,e)}getSource(e,n=!1){return Ne(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Ne(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Ne(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Ne(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return a_(e)===Rn.SOURCE}isTargetId(e){return a_(e)===Rn.TARGET}removeSource(e){Ne(this.getSource(e),"Expected an existing source."),this.store.dispatch(Nw(e)),ww(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Ne(this.getTarget(e),"Expected an existing target."),this.store.dispatch(xw(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);Ne(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){Ne(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,s){const o=jw(e);return this.types.set(o,n),e===Rn.SOURCE?this.dragSources.set(o,s):e===Rn.TARGET&&this.dropTargets.set(o,s),o}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Lw=(i,e)=>i===e;function Pw(i,e){return!i&&!e?!0:!i||!e?!1:i.x===e.x&&i.y===e.y}function Uw(i,e,n=Lw){if(i.length!==e.length)return!1;for(let s=0;s<i.length;++s)if(!n(i[s],e[s]))return!1;return!0}function zw(i=io,e){switch(e.type){case Mc:break;case qh:case Yh:case Uc:case Fh:return io;case jc:case $h:case Pc:case Lc:default:return Gh}const{targetIds:n=[],prevTargetIds:s=[]}=e.payload,o=$T(n,s);if(!(o.length>0||!Uw(n,s)))return io;const d=s[s.length-1],h=n[n.length-1];return d!==h&&(d&&o.push(d),h&&o.push(h)),o}function Hw(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function Bw(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){Hw(i,o,n[o])})}return i}const l_={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Vw(i=l_,e){const{payload:n}=e;switch(e.type){case Vh:case jc:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case Mc:return Pw(i.clientOffset,n.clientOffset)?i:Bw({},i,{clientOffset:n.clientOffset});case Pc:case Lc:return l_;default:return i}}function $w(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function Ns(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){$w(i,o,n[o])})}return i}const Gw={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function qw(i=Gw,e){const{payload:n}=e;switch(e.type){case jc:return Ns({},i,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case $h:return Ns({},i,{isSourcePublic:!0});case Mc:return Ns({},i,{targetIds:n.targetIds});case Uc:return i.targetIds.indexOf(n.targetId)===-1?i:Ns({},i,{targetIds:VT(i.targetIds,n.targetId)});case Lc:return Ns({},i,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Pc:return Ns({},i,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return i}}function Yw(i=0,e){switch(e.type){case qh:case Yh:return i+1;case Fh:case Uc:return i-1;default:return i}}function Fw(i=0){return i+1}function Ww(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function Qw(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){Ww(i,o,n[o])})}return i}function Kw(i={},e){return{dirtyHandlerIds:zw(i.dirtyHandlerIds,{type:e.type,payload:Qw({},e.payload,{prevTargetIds:BT(i,"dragOperation.targetIds",[])})}),dragOffset:Vw(i.dragOffset,e),refCount:Yw(i.refCount,e),dragOperation:qw(i.dragOperation,e),stateId:Fw(i.stateId)}}function Xw(i,e=void 0,n={},s=!1){const o=Zw(s),c=new yw(o,new Mw(o)),d=new hw(o,c),h=i(d,e,n);return d.receiveBackend(h),d}function Zw(i){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Ab(Kw,i&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Jw(i,e){if(i==null)return{};var n=eO(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function eO(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}let c_=0;const nc=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var tO=A.memo(function(e){var{children:n}=e,s=Jw(e,["children"]);const[o,c]=nO(s);return A.useEffect(()=>{if(c){const d=Lb();return++c_,()=>{--c_===0&&(d[nc]=null)}}},[]),m.jsx(xb.Provider,{value:o,children:n})});function nO(i){if("manager"in i)return[{dragDropManager:i.manager},!1];const e=iO(i.backend,i.context,i.options,i.debugMode),n=!i.context;return[e,n]}function iO(i,e=Lb(),n,s){const o=e;return o[nc]||(o[nc]={dragDropManager:Xw(i,e,n,s)}),o[nc]}function Lb(){return typeof global<"u"?global:window}var mf,u_;function rO(){return u_||(u_=1,mf=function i(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var s,o,c;if(Array.isArray(e)){if(s=e.length,s!=n.length)return!1;for(o=s;o--!==0;)if(!i(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(c=Object.keys(e),s=c.length,s!==Object.keys(n).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,c[o]))return!1;for(o=s;o--!==0;){var d=c[o];if(!i(e[d],n[d]))return!1}return!0}return e!==e&&n!==n}),mf}var sO=rO();const aO=So(sO),Lr=typeof window<"u"?A.useLayoutEffect:A.useEffect;function oO(i,e,n){const[s,o]=A.useState(()=>e(i)),c=A.useCallback(()=>{const d=e(i);aO(s,d)||(o(d),n&&n())},[s,i,n]);return Lr(c),[s,c]}function lO(i,e,n){const[s,o]=oO(i,e,n);return Lr(function(){const d=i.getHandlerId();if(d!=null)return i.subscribeToStateChange(o,{handlerIds:[d]})},[i,o]),s}function Pb(i,e,n){return lO(e,i||(()=>({})),()=>n.reconnect())}function Ub(i,e){const n=[...e||[]];return e==null&&typeof i!="function"&&n.push(i),A.useMemo(()=>typeof i=="function"?i():i,n)}function cO(i){return A.useMemo(()=>i.hooks.dragSource(),[i])}function uO(i){return A.useMemo(()=>i.hooks.dragPreview(),[i])}let vf=!1,yf=!1;class dO{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Ne(!vf,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return vf=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{vf=!1}}isDragging(){if(!this.sourceId)return!1;Ne(!yf,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return yf=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{yf=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let _f=!1;class fO{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;Ne(!_f,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return _f=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{_f=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function hO(i,e,n){const s=n.getRegistry(),o=s.addTarget(i,e);return[o,()=>s.removeTarget(o)]}function pO(i,e,n){const s=n.getRegistry(),o=s.addSource(i,e);return[o,()=>s.removeSource(o)]}function qf(i,e,n,s){let o;if(o!==void 0)return!!o;if(i===e)return!0;if(typeof i!="object"||!i||typeof e!="object"||!e)return!1;const c=Object.keys(i),d=Object.keys(e);if(c.length!==d.length)return!1;const h=Object.prototype.hasOwnProperty.bind(e);for(let p=0;p<c.length;p++){const g=c[p];if(!h(g))return!1;const _=i[g],b=e[g];if(o=void 0,o===!1||o===void 0&&_!==b)return!1}return!0}function Yf(i){return i!==null&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function gO(i){if(typeof i.type=="string")return;const e=i.type.displayName||i.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function mO(i){return(e=null,n=null)=>{if(!A.isValidElement(e)){const c=e;return i(c,n),c}const s=e;return gO(s),vO(s,n?c=>i(c,n):i)}}function zb(i){const e={};return Object.keys(i).forEach(n=>{const s=i[n];if(n.endsWith("Ref"))e[n]=i[n];else{const o=mO(s);e[n]=()=>o}}),e}function d_(i,e){typeof i=="function"?i(e):i.current=e}function vO(i,e){const n=i.ref;return Ne(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?A.cloneElement(i,{ref:s=>{d_(n,s),d_(e,s)}}):A.cloneElement(i,{ref:e})}class yO{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,s=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(s&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}s&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!qf(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!qf(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=zb({dragSource:(n,s)=>{this.clearDragSource(),this.dragSourceOptions=s||null,Yf(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,s)=>{this.clearDragPreview(),this.dragPreviewOptions=s||null,Yf(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class _O{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!qf(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=zb({dropTarget:(n,s)=>{this.clearDropTarget(),this.dropTargetOptions=s,Yf(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Gs(){const{dragDropManager:i}=A.useContext(xb);return Ne(i!=null,"Expected drag drop context"),i}function bO(i,e){const n=Gs(),s=A.useMemo(()=>new yO(n.getBackend()),[n]);return Lr(()=>(s.dragSourceOptions=i||null,s.reconnect(),()=>s.disconnectDragSource()),[s,i]),Lr(()=>(s.dragPreviewOptions=e||null,s.reconnect(),()=>s.disconnectDragPreview()),[s,e]),s}function EO(){const i=Gs();return A.useMemo(()=>new dO(i),[i])}class SO{beginDrag(){const e=this.spec,n=this.monitor;let s=null;return typeof e.item=="object"?s=e.item:typeof e.item=="function"?s=e.item(n):s={},s??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const s=this.spec,o=this.monitor,{isDragging:c}=s;return c?c(o):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,s=this.connector,{end:o}=e;o&&o(n.getItem(),n),s.reconnect()}constructor(e,n,s){this.spec=e,this.monitor=n,this.connector=s}}function CO(i,e,n){const s=A.useMemo(()=>new SO(i,e,n),[e,n]);return A.useEffect(()=>{s.spec=i},[i]),s}function TO(i){return A.useMemo(()=>{const e=i.type;return Ne(e!=null,"spec.type must be defined"),e},[i])}function wO(i,e,n){const s=Gs(),o=CO(i,e,n),c=TO(i);Lr(function(){if(c!=null){const[h,p]=pO(c,o,s);return e.receiveHandlerId(h),n.receiveHandlerId(h),p}},[s,e,n,o,c])}function OO(i,e){const n=Ub(i,e);Ne(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const s=EO(),o=bO(n.options,n.previewOptions);return wO(n,s,o),[Pb(n.collect,s,o),cO(o),uO(o)]}function RO(i){return A.useMemo(()=>i.hooks.dropTarget(),[i])}function NO(i){const e=Gs(),n=A.useMemo(()=>new _O(e.getBackend()),[e]);return Lr(()=>(n.dropTargetOptions=i||null,n.reconnect(),()=>n.disconnectDropTarget()),[i]),n}function xO(){const i=Gs();return A.useMemo(()=>new fO(i),[i])}function AO(i){const{accept:e}=i;return A.useMemo(()=>(Ne(i.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class DO{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function IO(i,e){const n=A.useMemo(()=>new DO(i,e),[e]);return A.useEffect(()=>{n.spec=i},[i]),n}function kO(i,e,n){const s=Gs(),o=IO(i,e),c=AO(i);Lr(function(){const[h,p]=hO(c,o,s);return e.receiveHandlerId(h),n.receiveHandlerId(h),p},[s,e,o,n,c.map(d=>d.toString()).join("|")])}function Wh(i,e){const n=Ub(i,e),s=xO(),o=NO(n.options);return kO(n,s,o),[Pb(n.collect,s,o),RO(o)]}function Hb(i){let e=null;return()=>(e==null&&(e=i()),e)}function jO(i,e){return i.filter(n=>n!==e)}function MO(i,e){const n=new Set,s=c=>n.add(c);i.forEach(s),e.forEach(s);const o=[];return n.forEach(c=>o.push(c)),o}class LO{enter(e){const n=this.entered.length,s=o=>this.isNodeInDocument(o)&&(!o.contains||o.contains(e));return this.entered=MO(this.entered.filter(s),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=jO(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class PO{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(s=>{const o=this.config.exposeProperties[s];o!=null&&(n[s]={value:o(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Bb="__NATIVE_FILE__",Vb="__NATIVE_URL__",$b="__NATIVE_TEXT__",Gb="__NATIVE_HTML__",f_=Object.freeze(Object.defineProperty({__proto__:null,FILE:Bb,HTML:Gb,TEXT:$b,URL:Vb},Symbol.toStringTag,{value:"Module"}));function bf(i,e,n){const s=e.reduce((o,c)=>o||i.getData(c),"");return s??n}const Ff={[Bb]:{exposeProperties:{files:i=>Array.prototype.slice.call(i.files),items:i=>i.items,dataTransfer:i=>i},matchesTypes:["Files"]},[Gb]:{exposeProperties:{html:(i,e)=>bf(i,e,""),dataTransfer:i=>i},matchesTypes:["Html","text/html"]},[Vb]:{exposeProperties:{urls:(i,e)=>bf(i,e,"").split(`
`),dataTransfer:i=>i},matchesTypes:["Url","text/uri-list"]},[$b]:{exposeProperties:{text:(i,e)=>bf(i,e,""),dataTransfer:i=>i},matchesTypes:["Text","text/plain"]}};function UO(i,e){const n=Ff[i];if(!n)throw new Error(`native type ${i} has no configuration`);const s=new PO(n);return s.loadDataTransfer(e),s}function Ef(i){if(!i)return null;const e=Array.prototype.slice.call(i.types||[]);return Object.keys(Ff).filter(n=>{const s=Ff[n];return s!=null&&s.matchesTypes?s.matchesTypes.some(o=>e.indexOf(o)>-1):!1})[0]||null}const zO=Hb(()=>/firefox/i.test(navigator.userAgent)),qb=Hb(()=>!!window.safari);class h_{interpolate(e){const{xs:n,ys:s,c1s:o,c2s:c,c3s:d}=this;let h=n.length-1;if(e===n[h])return s[h];let p=0,g=d.length-1,_;for(;p<=g;){_=Math.floor(.5*(p+g));const O=n[_];if(O<e)p=_+1;else if(O>e)g=_-1;else return s[_]}h=Math.max(0,g);const b=e-n[h],E=b*b;return s[h]+o[h]*b+c[h]*E+d[h]*b*E}constructor(e,n){const{length:s}=e,o=[];for(let O=0;O<s;O++)o.push(O);o.sort((O,T)=>e[O]<e[T]?-1:1);const c=[],d=[];let h,p;for(let O=0;O<s-1;O++)h=e[O+1]-e[O],p=n[O+1]-n[O],c.push(h),d.push(p/h);const g=[d[0]];for(let O=0;O<c.length-1;O++){const T=d[O],L=d[O+1];if(T*L<=0)g.push(0);else{h=c[O];const x=c[O+1],P=h+x;g.push(3*P/((P+x)/T+(P+h)/L))}}g.push(d[d.length-1]);const _=[],b=[];let E;for(let O=0;O<g.length-1;O++){E=d[O];const T=g[O],L=1/c[O],x=T+g[O+1]-E-E;_.push((E-T-x)*L),b.push(x*L*L)}this.xs=e,this.ys=n,this.c1s=g,this.c2s=_,this.c3s=b}}const HO=1;function Yb(i){const e=i.nodeType===HO?i:i.parentElement;if(!e)return null;const{top:n,left:s}=e.getBoundingClientRect();return{x:s,y:n}}function Xl(i){return{x:i.clientX,y:i.clientY}}function BO(i){var e;return i.nodeName==="IMG"&&(zO()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(i)))}function VO(i,e,n,s){let o=i?e.width:n,c=i?e.height:s;return qb()&&i&&(c/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:c}}function $O(i,e,n,s,o){const c=BO(e),h=Yb(c?i:e),p={x:n.x-h.x,y:n.y-h.y},{offsetWidth:g,offsetHeight:_}=i,{anchorX:b,anchorY:E}=s,{dragPreviewWidth:O,dragPreviewHeight:T}=VO(c,e,g,_),L=()=>{let re=new h_([0,.5,1],[p.y,p.y/_*T,p.y+T-_]).interpolate(E);return qb()&&c&&(re+=(window.devicePixelRatio-1)*T),re},x=()=>new h_([0,.5,1],[p.x,p.x/g*O,p.x+O-g]).interpolate(b),{offsetX:P,offsetY:Y}=o,J=P===0||P,te=Y===0||Y;return{x:J?P:x(),y:te?Y:L()}}class GO{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}}function qO(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function p_(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){qO(i,o,n[o])})}return i}class YO{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,s){return this.sourcePreviewNodeOptions.set(e,s),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,s){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,s);const o=d=>this.handleDragStart(d,e),c=d=>this.handleSelectStart(d);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",o),n.addEventListener("selectstart",c),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",o),n.removeEventListener("selectstart",c),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const s=d=>this.handleDragEnter(d,e),o=d=>this.handleDragOver(d,e),c=d=>this.handleDrop(d,e);return n.addEventListener("dragenter",s),n.addEventListener("dragover",o),n.addEventListener("drop",c),()=>{n.removeEventListener("dragenter",s),n.removeEventListener("dragover",o),n.removeEventListener("drop",c)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return p_({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return p_({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(f_).some(n=>f_[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=UO(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var s;return(s=this.rootElement)===null||s===void 0?void 0:s.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,s){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=o=>{const c=this.sourceNodes.get(o);return c&&Yb(c)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=o=>!!(o&&this.document&&this.document.body&&this.document.body.contains(o)),this.endDragIfSourceWasRemovedFromDOM=()=>{const o=this.currentDragSourceNode;o==null||this.isNodeInDocument(o)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=o=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(o||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=o=>{if(o.defaultPrevented)return;const{dragStartSourceIds:c}=this;this.dragStartSourceIds=null;const d=Xl(o);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(c||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:d});const{dataTransfer:h}=o,p=Ef(h);if(this.monitor.isDragging()){if(h&&typeof h.setDragImage=="function"){const _=this.monitor.getSourceId(),b=this.sourceNodes.get(_),E=this.sourcePreviewNodes.get(_)||b;if(E){const{anchorX:O,anchorY:T,offsetX:L,offsetY:x}=this.getCurrentSourcePreviewNodeOptions(),J=$O(b,E,d,{anchorX:O,anchorY:T},{offsetX:L,offsetY:x});h.setDragImage(E,J.x,J.y)}}try{h==null||h.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(o.target);const{captureDraggingState:g}=this.getCurrentSourcePreviewNodeOptions();g?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(p)this.beginDragNativeItem(p);else{if(h&&!h.types&&(o.target&&!o.target.hasAttribute||!o.target.hasAttribute("draggable")))return;o.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=o=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var c;(c=this.currentNativeSource)===null||c===void 0||c.loadDataTransfer(o.dataTransfer)}if(!this.enterLeaveCounter.enter(o.target)||this.monitor.isDragging())return;const{dataTransfer:h}=o,p=Ef(h);p&&this.beginDragNativeItem(p,h)},this.handleTopDragEnter=o=>{const{dragEnterTargetIds:c}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=o.altKey,c.length>0&&this.actions.hover(c,{clientOffset:Xl(o)}),c.some(h=>this.monitor.canDropOnTarget(h))&&(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=o=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var c;(c=this.currentNativeSource)===null||c===void 0||c.loadDataTransfer(o.dataTransfer)}},this.handleTopDragOver=o=>{const{dragOverTargetIds:c}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none");return}this.altKeyPressed=o.altKey,this.lastClientOffset=Xl(o),this.scheduleHover(c),(c||[]).some(h=>this.monitor.canDropOnTarget(h))?(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?o.preventDefault():(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=o=>{this.isDraggingNativeItem()&&o.preventDefault(),this.enterLeaveCounter.leave(o.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=o=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var c;o.preventDefault(),(c=this.currentNativeSource)===null||c===void 0||c.loadDataTransfer(o.dataTransfer)}else Ef(o.dataTransfer)&&o.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=o=>{const{dropTargetIds:c}=this;this.dropTargetIds=[],this.actions.hover(c,{clientOffset:Xl(o)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=o=>{const c=o.target;typeof c.dragDrop=="function"&&(c.tagName==="INPUT"||c.tagName==="SELECT"||c.tagName==="TEXTAREA"||c.isContentEditable||(o.preventDefault(),c.dragDrop()))},this.options=new GO(n,s),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new LO(this.isNodeInDocument)}}const FO=function(e,n,s){return new YO(e,n,s)};var Sf={exports:{}},Cf,g_;function WO(){if(g_)return Cf;g_=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Cf=i,Cf}var Tf,m_;function QO(){if(m_)return Tf;m_=1;var i=WO();function e(){}function n(){}return n.resetWarningCache=e,Tf=function(){function s(d,h,p,g,_,b){if(b!==i){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}s.isRequired=s;function o(){return s}var c={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:e};return c.PropTypes=c,c},Tf}var v_;function KO(){return v_||(v_=1,Sf.exports=QO()()),Sf.exports}var XO=KO();const K=So(XO);function Wf(){return Wf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Wf.apply(this,arguments)}function ZO(i,e){if(i==null)return{};var n=JO(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function JO(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Qh=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=ZO(i,["color","size"]);return X.createElement("svg",Wf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),X.createElement("polyline",{points:"19 12 12 19 5 12"}))});Qh.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Qh.displayName="ArrowDown";function Qf(){return Qf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Qf.apply(this,arguments)}function e1(i,e){if(i==null)return{};var n=t1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function t1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Qi=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=e1(i,["color","size"]);return X.createElement("svg",Qf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),X.createElement("polyline",{points:"12 19 5 12 12 5"}))});Qi.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Qi.displayName="ArrowLeft";function Kf(){return Kf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Kf.apply(this,arguments)}function n1(i,e){if(i==null)return{};var n=i1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function i1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Kh=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=n1(i,["color","size"]);return X.createElement("svg",Kf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("circle",{cx:"12",cy:"8",r:"7"}),X.createElement("polyline",{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"}))});Kh.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Kh.displayName="Award";function Xf(){return Xf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Xf.apply(this,arguments)}function r1(i,e){if(i==null)return{};var n=s1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function s1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var lc=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=r1(i,["color","size"]);return X.createElement("svg",Xf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),X.createElement("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),X.createElement("line",{x1:"6",y1:"20",x2:"6",y2:"16"}))});lc.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};lc.displayName="BarChart";function Zf(){return Zf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Zf.apply(this,arguments)}function a1(i,e){if(i==null)return{};var n=o1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function o1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Co=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=a1(i,["color","size"]);return X.createElement("svg",Zf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"6 9 12 15 18 9"}))});Co.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Co.displayName="ChevronDown";function Jf(){return Jf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Jf.apply(this,arguments)}function l1(i,e){if(i==null)return{};var n=c1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function c1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Xh=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=l1(i,["color","size"]);return X.createElement("svg",Jf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"15 18 9 12 15 6"}))});Xh.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Xh.displayName="ChevronLeft";function eh(){return eh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},eh.apply(this,arguments)}function u1(i,e){if(i==null)return{};var n=d1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function d1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var zc=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=u1(i,["color","size"]);return X.createElement("svg",eh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"9 18 15 12 9 6"}))});zc.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};zc.displayName="ChevronRight";function th(){return th=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},th.apply(this,arguments)}function f1(i,e){if(i==null)return{};var n=h1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function h1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Zh=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=f1(i,["color","size"]);return X.createElement("svg",th({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"18 15 12 9 6 15"}))});Zh.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Zh.displayName="ChevronUp";function nh(){return nh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},nh.apply(this,arguments)}function p1(i,e){if(i==null)return{};var n=g1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function g1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Jh=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=p1(i,["color","size"]);return X.createElement("svg",nh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),X.createElement("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}))});Jh.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Jh.displayName="Clipboard";function ih(){return ih=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},ih.apply(this,arguments)}function m1(i,e){if(i==null)return{};var n=v1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function v1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var ep=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=m1(i,["color","size"]);return X.createElement("svg",ih({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}))});ep.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};ep.displayName="Edit2";function rh(){return rh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},rh.apply(this,arguments)}function y1(i,e){if(i==null)return{};var n=_1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function _1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var cc=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=y1(i,["color","size"]);return X.createElement("svg",rh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),X.createElement("circle",{cx:"12",cy:"12",r:"3"}))});cc.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};cc.displayName="Eye";function sh(){return sh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},sh.apply(this,arguments)}function b1(i,e){if(i==null)return{};var n=E1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function E1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var tp=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=b1(i,["color","size"]);return X.createElement("svg",sh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),X.createElement("polyline",{points:"14 2 14 8 20 8"}),X.createElement("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),X.createElement("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),X.createElement("polyline",{points:"10 9 9 9 8 9"}))});tp.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};tp.displayName="FileText";function ah(){return ah=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},ah.apply(this,arguments)}function S1(i,e){if(i==null)return{};var n=C1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function C1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var np=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=S1(i,["color","size"]);return X.createElement("svg",ah({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),X.createElement("polyline",{points:"2 17 12 22 22 17"}),X.createElement("polyline",{points:"2 12 12 17 22 12"}))});np.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};np.displayName="Layers";function oh(){return oh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},oh.apply(this,arguments)}function T1(i,e){if(i==null)return{};var n=w1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function w1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var ip=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=T1(i,["color","size"]);return X.createElement("svg",oh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),X.createElement("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}))});ip.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};ip.displayName="Link";function lh(){return lh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},lh.apply(this,arguments)}function O1(i,e){if(i==null)return{};var n=R1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function R1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var rp=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=O1(i,["color","size"]);return X.createElement("svg",lh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}))});rp.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};rp.displayName="MessageCircle";function ch(){return ch=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},ch.apply(this,arguments)}function N1(i,e){if(i==null)return{};var n=x1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function x1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var To=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=N1(i,["color","size"]);return X.createElement("svg",ch({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}))});To.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};To.displayName="MessageSquare";function uh(){return uh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},uh.apply(this,arguments)}function A1(i,e){if(i==null)return{};var n=D1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function D1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var sp=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=A1(i,["color","size"]);return X.createElement("svg",uh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}))});sp.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};sp.displayName="Moon";function dh(){return dh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},dh.apply(this,arguments)}function I1(i,e){if(i==null)return{};var n=k1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function k1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var ap=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=I1(i,["color","size"]);return X.createElement("svg",dh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),X.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),X.createElement("line",{x1:"8",y1:"12",x2:"16",y2:"12"}))});ap.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};ap.displayName="PlusSquare";function fh(){return fh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},fh.apply(this,arguments)}function j1(i,e){if(i==null)return{};var n=M1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function M1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Hc=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=j1(i,["color","size"]);return X.createElement("svg",fh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),X.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))});Hc.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Hc.displayName="Plus";function hh(){return hh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},hh.apply(this,arguments)}function L1(i,e){if(i==null)return{};var n=P1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function P1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var op=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=L1(i,["color","size"]);return X.createElement("svg",hh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("circle",{cx:"12",cy:"12",r:"3"}),X.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}))});op.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};op.displayName="Settings";function ph(){return ph=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},ph.apply(this,arguments)}function U1(i,e){if(i==null)return{};var n=z1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function z1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var lp=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=U1(i,["color","size"]);return X.createElement("svg",ph({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("circle",{cx:"12",cy:"12",r:"10"}),X.createElement("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),X.createElement("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),X.createElement("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"}))});lp.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};lp.displayName="Smile";function gh(){return gh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},gh.apply(this,arguments)}function H1(i,e){if(i==null)return{};var n=B1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function B1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Ir=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=H1(i,["color","size"]);return X.createElement("svg",gh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}))});Ir.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Ir.displayName="Star";function mh(){return mh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},mh.apply(this,arguments)}function V1(i,e){if(i==null)return{};var n=$1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function $1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var cp=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=V1(i,["color","size"]);return X.createElement("svg",mh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("circle",{cx:"12",cy:"12",r:"5"}),X.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),X.createElement("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),X.createElement("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),X.createElement("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),X.createElement("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),X.createElement("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),X.createElement("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),X.createElement("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}))});cp.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};cp.displayName="Sun";function vh(){return vh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},vh.apply(this,arguments)}function G1(i,e){if(i==null)return{};var n=q1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function q1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var up=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=G1(i,["color","size"]);return X.createElement("svg",vh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"}))});up.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};up.displayName="ThumbsUp";function yh(){return yh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},yh.apply(this,arguments)}function Y1(i,e){if(i==null)return{};var n=F1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function F1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var dp=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=Y1(i,["color","size"]);return X.createElement("svg",yh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"3 6 5 6 21 6"}),X.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),X.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),X.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))});dp.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};dp.displayName="Trash2";function _h(){return _h=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},_h.apply(this,arguments)}function W1(i,e){if(i==null)return{};var n=Q1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function Q1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var wo=A.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=W1(i,["color","size"]);return X.createElement("svg",_h({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),X.createElement("circle",{cx:"9",cy:"7",r:"4"}),X.createElement("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),X.createElement("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}))});wo.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};wo.displayName="Users";const K1=()=>{};var y_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=function(i,e){if(!i)throw qs(e)},qs=function(i){return new Error("Firebase Database ("+Fb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},X1=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],d=i[n++],h=i[n++],p=((o&7)<<18|(c&63)<<12|(d&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const c=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},fp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const c=i[o],d=o+1<i.length,h=d?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,_=c>>2,b=(c&3)<<4|h>>4;let E=(h&15)<<2|g>>6,O=g&63;p||(O=64,d||(E=64)),s.push(n[_],n[b],n[E],n[O])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Wb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):X1(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],h=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const b=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||h==null||g==null||b==null)throw new Z1;const E=c<<2|h>>4;if(s.push(E),g!==64){const O=h<<4&240|g>>2;if(s.push(O),b!==64){const T=g<<6&192|b;s.push(T)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Z1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qb=function(i){const e=Wb(i);return fp.encodeByteArray(e,!0)},uc=function(i){return Qb(i).replace(/\./g,"")},dc=function(i){try{return fp.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(i){return Kb(void 0,i)}function Kb(i,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!eR(n)||(i[n]=Kb(i[n],e[n]));return i}function eR(i){return i!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=()=>tR().__FIREBASE_DEFAULTS__,iR=()=>{if(typeof process>"u"||typeof y_>"u")return;const i=y_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},rR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&dc(i[1]);return e&&JSON.parse(e)},hp=()=>{try{return K1()||nR()||iR()||rR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Xb=i=>{var e,n;return(n=(e=hp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},sR=i=>{const e=Xb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Zb=()=>{var i;return(i=hp())===null||i===void 0?void 0:i.config},Jb=i=>{var e;return(e=hp())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[uc(JSON.stringify(n)),uc(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function oR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lR(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function e0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cR(){const i=qt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function uR(){return Fb.NODE_ADMIN===!0}function dR(){try{return typeof indexedDB=="object"}catch{return!1}}function fR(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="FirebaseError";class dr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=hR,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oo.prototype.create)}}class Oo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?pR(c,s):"Error",h=`${this.serviceName}: ${d} (${o}).`;return new dr(o,h,s)}}function pR(i,e){return i.replace(gR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const gR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(i){return JSON.parse(i)}function Tt(i){return JSON.stringify(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=function(i){let e={},n={},s={},o="";try{const c=i.split(".");e=fo(dc(c[0])||""),n=fo(dc(c[1])||""),o=c[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:o}},mR=function(i){const e=t0(i),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},vR=function(i){const e=t0(i).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function Us(i,e){if(Object.prototype.hasOwnProperty.call(i,e))return i[e]}function bh(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function fc(i,e,n){const s={};for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&(s[o]=e.call(n,i[o],o,i));return s}function Pr(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=i[o],d=e[o];if(__(c)&&__(d)){if(!Pr(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function __(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let b=0;b<16;b++)s[b]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let b=0;b<16;b++)s[b]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let b=16;b<80;b++){const E=s[b-3]^s[b-8]^s[b-14]^s[b-16];s[b]=(E<<1|E>>>31)&4294967295}let o=this.chain_[0],c=this.chain_[1],d=this.chain_[2],h=this.chain_[3],p=this.chain_[4],g,_;for(let b=0;b<80;b++){b<40?b<20?(g=h^c&(d^h),_=1518500249):(g=c^d^h,_=1859775393):b<60?(g=c&d|h&(c|d),_=2400959708):(g=c^d^h,_=3395469782);const E=(o<<5|o>>>27)+g+p+_+s[b]&4294967295;p=h,h=d,d=(c<<30|c>>>2)&4294967295,c=o,o=E}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let o=0;const c=this.buf_;let d=this.inbuf_;for(;o<n;){if(d===0)for(;o<=s;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(c[d]=e.charCodeAt(o),++d,++o,d===this.blockSize){this.compress_(c),d=0;break}}else for(;o<n;)if(c[d]=e[o],++d,++o,d===this.blockSize){this.compress_(c),d=0;break}}this.inbuf_=d,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let o=0;o<5;o++)for(let c=24;c>=0;c-=8)e[s]=this.chain_[o]>>c&255,++s;return e}}function _R(i,e){const n=new bR(i,e);return n.subscribe.bind(n)}class bR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");ER(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=wf),o.error===void 0&&(o.error=wf),o.complete===void 0&&(o.complete=wf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ER(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function wf(){}function gp(i,e){return`${i} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);if(o>=55296&&o<=56319){const c=o-55296;s++,ne(s<i.length,"Surrogate pair missing trail surrogate.");const d=i.charCodeAt(s)-56320;o=65536+(c<<10)+d}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Vc=function(i){let e=0;for(let n=0;n<i.length;n++){const s=i.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(i){return i&&i._delegate?i._delegate:i}class Ur{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Bc;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wR(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(c);s===h&&d.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:TR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TR(i){return i===Ar?void 0:i}function wR(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(nt||(nt={}));const RR={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},NR=nt.INFO,xR={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},AR=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=xR[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mp{constructor(e){this.name=e,this._logLevel=NR,this._logHandler=AR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const DR=(i,e)=>e.some(n=>i instanceof n);let b_,E_;function IR(){return b_||(b_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kR(){return E_||(E_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n0=new WeakMap,Eh=new WeakMap,i0=new WeakMap,Of=new WeakMap,vp=new WeakMap;function jR(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n(er(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&n0.set(n,i)}).catch(()=>{}),vp.set(e,i),e}function MR(i){if(Eh.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});Eh.set(i,e)}let Sh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Eh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||i0.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return er(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function LR(i){Sh=i(Sh)}function PR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Rf(this),e,...n);return i0.set(s,e.sort?e.sort():[e]),er(s)}:kR().includes(i)?function(...e){return i.apply(Rf(this),e),er(n0.get(this))}:function(...e){return er(i.apply(Rf(this),e))}}function UR(i){return typeof i=="function"?PR(i):(i instanceof IDBTransaction&&MR(i),DR(i,IR())?new Proxy(i,Sh):i)}function er(i){if(i instanceof IDBRequest)return jR(i);if(Of.has(i))return Of.get(i);const e=UR(i);return e!==i&&(Of.set(i,e),vp.set(e,i)),e}const Rf=i=>vp.get(i);function zR(i,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(i,e),h=er(d);return s&&d.addEventListener("upgradeneeded",p=>{s(er(d.result),p.oldVersion,p.newVersion,er(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),h.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const HR=["get","getKey","getAll","getAllKeys","count"],BR=["put","add","delete","clear"],Nf=new Map;function S_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=BR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||HR.includes(n)))return;const c=async function(d,...h){const p=this.transaction(d,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(h.shift())),(await Promise.all([g[n](...h),o&&p.done]))[0]};return Nf.set(e,c),c}LR(i=>({...i,get:(e,n,s)=>S_(e,n)||i.get(e,n,s),has:(e,n)=>!!S_(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($R(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function $R(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ch="@firebase/app",C_="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new mp("@firebase/app"),GR="@firebase/app-compat",qR="@firebase/analytics-compat",YR="@firebase/analytics",FR="@firebase/app-check-compat",WR="@firebase/app-check",QR="@firebase/auth",KR="@firebase/auth-compat",XR="@firebase/database",ZR="@firebase/data-connect",JR="@firebase/database-compat",eN="@firebase/functions",tN="@firebase/functions-compat",nN="@firebase/installations",iN="@firebase/installations-compat",rN="@firebase/messaging",sN="@firebase/messaging-compat",aN="@firebase/performance",oN="@firebase/performance-compat",lN="@firebase/remote-config",cN="@firebase/remote-config-compat",uN="@firebase/storage",dN="@firebase/storage-compat",fN="@firebase/firestore",hN="@firebase/vertexai",pN="@firebase/firestore-compat",gN="firebase",mN="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="[DEFAULT]",vN={[Ch]:"fire-core",[GR]:"fire-core-compat",[YR]:"fire-analytics",[qR]:"fire-analytics-compat",[WR]:"fire-app-check",[FR]:"fire-app-check-compat",[QR]:"fire-auth",[KR]:"fire-auth-compat",[XR]:"fire-rtdb",[ZR]:"fire-data-connect",[JR]:"fire-rtdb-compat",[eN]:"fire-fn",[tN]:"fire-fn-compat",[nN]:"fire-iid",[iN]:"fire-iid-compat",[rN]:"fire-fcm",[sN]:"fire-fcm-compat",[aN]:"fire-perf",[oN]:"fire-perf-compat",[lN]:"fire-rc",[cN]:"fire-rc-compat",[uN]:"fire-gcs",[dN]:"fire-gcs-compat",[fN]:"fire-fst",[pN]:"fire-fst-compat",[hN]:"fire-vertex","fire-js":"fire-js",[gN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,yN=new Map,wh=new Map;function T_(i,e){try{i.container.addComponent(e)}catch(n){yi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function zs(i){const e=i.name;if(wh.has(e))return yi.debug(`There were multiple attempts to register component ${e}.`),!1;wh.set(e,i);for(const n of hc.values())T_(n,i);for(const n of yN.values())T_(n,i);return!0}function yp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function kn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new Oo("app","Firebase",_N);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=mN;function r0(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Th,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw tr.create("bad-app-name",{appName:String(o)});if(n||(n=Zb()),!n)throw tr.create("no-options");const c=hc.get(o);if(c){if(Pr(n,c.options)&&Pr(s,c.config))return c;throw tr.create("duplicate-app",{appName:o})}const d=new OR(o);for(const p of wh.values())d.addComponent(p);const h=new bN(n,s,d);return hc.set(o,h),h}function s0(i=Th){const e=hc.get(i);if(!e&&i===Th&&Zb())return r0();if(!e)throw tr.create("no-app",{appName:i});return e}function nr(i,e,n){var s;let o=(s=vN[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const h=[`Unable to register library "${o}" with version "${e}":`];c&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&h.push("and"),d&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yi.warn(h.join(" "));return}zs(new Ur(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="firebase-heartbeat-database",SN=1,ho="firebase-heartbeat-store";let xf=null;function a0(){return xf||(xf=zR(EN,SN,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ho)}catch(n){console.warn(n)}}}}).catch(i=>{throw tr.create("idb-open",{originalErrorMessage:i.message})})),xf}async function CN(i){try{const n=(await a0()).transaction(ho),s=await n.objectStore(ho).get(o0(i));return await n.done,s}catch(e){if(e instanceof dr)yi.warn(e.message);else{const n=tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yi.warn(n.message)}}}async function w_(i,e){try{const s=(await a0()).transaction(ho,"readwrite");await s.objectStore(ho).put(e,o0(i)),await s.done}catch(n){if(n instanceof dr)yi.warn(n.message);else{const s=tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yi.warn(s.message)}}}function o0(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=1024,wN=30;class ON{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NN(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=O_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>wN){const d=xN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){yi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=O_(),{heartbeatsToSend:s,unsentEntries:o}=RN(this._heartbeatsCache.heartbeats),c=uc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return yi.warn(n),""}}}function O_(){return new Date().toISOString().substring(0,10)}function RN(i,e=TN){const n=[];let s=i.slice();for(const o of i){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),R_(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),R_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class NN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dR()?fR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return w_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return w_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function R_(i){return uc(JSON.stringify({version:2,heartbeats:i})).length}function xN(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(i){zs(new Ur("platform-logger",e=>new VR(e),"PRIVATE")),zs(new Ur("heartbeat",e=>new ON(e),"PRIVATE")),nr(Ch,C_,i),nr(Ch,C_,"esm2017"),nr("fire-js","")}AN("");var N_={};const x_="@firebase/database",A_="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l0="";function DN(i){l0=i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Tt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:fo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Si(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new IN(e)}}catch{}return new kN},kr=c0("localStorage"),jN=c0("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new mp("@firebase/database"),MN=function(){let i=1;return function(){return i++}}(),u0=function(i){const e=SR(i),n=new yR;n.update(e);const s=n.digest();return fp.encodeByteArray(s)},Ro=function(...i){let e="";for(let n=0;n<i.length;n++){const s=i[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Ro.apply(null,s):typeof s=="object"?e+=Tt(s):e+=s,e+=" "}return e};let ro=null,D_=!0;const LN=function(i,e){ne(!0,"Can't turn on custom loggers persistently."),Is.logLevel=nt.VERBOSE,ro=Is.log.bind(Is)},Bt=function(...i){if(D_===!0&&(D_=!1,ro===null&&jN.get("logging_enabled")===!0&&LN()),ro){const e=Ro.apply(null,i);ro(e)}},No=function(i){return function(...e){Bt(i,...e)}},Oh=function(...i){const e="FIREBASE INTERNAL ERROR: "+Ro(...i);Is.error(e)},_i=function(...i){const e=`FIREBASE FATAL ERROR: ${Ro(...i)}`;throw Is.error(e),new Error(e)},tn=function(...i){const e="FIREBASE WARNING: "+Ro(...i);Is.warn(e)},PN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},d0=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},UN=function(i){if(document.readyState==="complete")i();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Hs="[MIN_NAME]",zr="[MAX_NAME]",Ws=function(i,e){if(i===e)return 0;if(i===Hs||e===zr)return-1;if(e===Hs||i===zr)return 1;{const n=I_(i),s=I_(e);return n!==null?s!==null?n-s===0?i.length-e.length:n-s:-1:s!==null?1:i<e?-1:1}},zN=function(i,e){return i===e?0:i<e?-1:1},Za=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+Tt(e))},_p=function(i){if(typeof i!="object"||i===null)return Tt(i);const e=[];for(const s in i)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Tt(e[s]),n+=":",n+=_p(i[e[s]]);return n+="}",n},f0=function(i,e){const n=i.length;if(n<=e)return[i];const s=[];for(let o=0;o<n;o+=e)o+e>n?s.push(i.substring(o,n)):s.push(i.substring(o,o+e));return s};function nn(i,e){for(const n in i)i.hasOwnProperty(n)&&e(n,i[n])}const h0=function(i){ne(!d0(i),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let o,c,d,h,p;i===0?(c=0,d=0,o=1/i===-1/0?1:0):(o=i<0,i=Math.abs(i),i>=Math.pow(2,1-s)?(h=Math.min(Math.floor(Math.log(i)/Math.LN2),s),c=h+s,d=Math.round(i*Math.pow(2,n-h)-Math.pow(2,n))):(c=0,d=Math.round(i/Math.pow(2,1-s-n))));const g=[];for(p=n;p;p-=1)g.push(d%2?1:0),d=Math.floor(d/2);for(p=e;p;p-=1)g.push(c%2?1:0),c=Math.floor(c/2);g.push(o?1:0),g.reverse();const _=g.join("");let b="";for(p=0;p<64;p+=8){let E=parseInt(_.substr(p,8),2).toString(16);E.length===1&&(E="0"+E),b=b+E}return b.toLowerCase()},HN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},BN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function VN(i,e){let n="Unknown Error";i==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?n="Client doesn't have permission to access the desired data.":i==="unavailable"&&(n="The service is unavailable");const s=new Error(i+" at "+e._path.toString()+": "+n);return s.code=i.toUpperCase(),s}const $N=new RegExp("^-?(0*)\\d{1,10}$"),GN=-2147483648,qN=2147483647,I_=function(i){if($N.test(i)){const e=Number(i);if(e>=GN&&e<=qN)return e}return null},Qs=function(i){try{i()}catch(e){setTimeout(()=>{const n=e.stack||"";throw tn("Exception was thrown by user callback.",n),e},Math.floor(0))}},YN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},so=function(i,e){const n=setTimeout(i,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,kn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){tn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tn(e)}}class ic{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ic.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="5",p0="v",g0="s",m0="r",v0="f",y0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_0="ls",b0="p",Rh="ac",E0="websocket",S0="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n,s,o,c=!1,d="",h=!1,p=!1,g=null){this.secure=n,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=c,this.persistenceKey=d,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=kr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&kr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function QN(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function T0(i,e,n){ne(typeof e=="string","typeof type must == string"),ne(typeof n=="object","typeof params must == object");let s;if(e===E0)s=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(e===S0)s=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);QN(i)&&(n.ns=i.namespace);const o=[];return nn(n,(c,d)=>{o.push(c+"="+d)}),s+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.counters_={}}incrementCounter(e,n=1){Si(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return J1(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af={},Df={};function Ep(i){const e=i.toString();return Af[e]||(Af[e]=new KN),Af[e]}function XN(i,e){const n=i.toString();return Df[n]||(Df[n]=e()),Df[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&Qs(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="start",JN="close",ex="pLPCommand",tx="pRTLPCB",w0="id",O0="pw",R0="ser",nx="cb",ix="seg",rx="ts",sx="d",ax="dframe",N0=1870,x0=30,ox=N0-x0,lx=25e3,cx=3e4;class As{constructor(e,n,s,o,c,d,h){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=o,this.authToken=c,this.transportSessionId=d,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=No(e),this.stats_=Ep(n),this.urlFn=p=>(this.appCheckToken&&(p[Rh]=this.appCheckToken),T0(n,S0,p))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ZN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(cx)),UN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Sp((...c)=>{const[d,h,p,g,_]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===k_)this.id=h,this.password=p;else if(d===JN)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...c)=>{const[d,h]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(d,h)},()=>{this.onClosed_()},this.urlFn);const s={};s[k_]="t",s[R0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[nx]=this.scriptTagHolder.uniqueCallbackIdentifier),s[p0]=bp,this.transportSessionId&&(s[g0]=this.transportSessionId),this.lastSessionId&&(s[_0]=this.lastSessionId),this.applicationId&&(s[b0]=this.applicationId),this.appCheckToken&&(s[Rh]=this.appCheckToken),typeof location<"u"&&location.hostname&&y0.test(location.hostname)&&(s[m0]=v0);const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){As.forceAllow_=!0}static forceDisallow(){As.forceDisallow_=!0}static isAvailable(){return As.forceAllow_?!0:!As.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!HN()&&!BN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Tt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Qb(n),o=f0(s,ox);for(let c=0;c<o.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[c]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[ax]="t",s[w0]=e,s[O0]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Tt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Sp{constructor(e,n,s,o){this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=MN(),window[ex+this.uniqueCallbackIdentifier]=e,window[tx+this.uniqueCallbackIdentifier]=n,this.myIFrame=Sp.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(h){Bt("frame writing exception"),h.stack&&Bt(h.stack),Bt(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Bt("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[w0]=this.myID,e[O0]=this.myPW,e[R0]=this.currentSerial;let n=this.urlFn(e),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+x0+s.length<=N0;){const d=this.pendingSegs.shift();s=s+"&"+ix+o+"="+d.seg+"&"+rx+o+"="+d.ts+"&"+sx+o+"="+d.d,o++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(s,Math.floor(lx)),c=()=>{clearTimeout(o),s()};this.addTag(e,c)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||o==="loaded"||o==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Bt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=16384,dx=45e3;let pc=null;typeof MozWebSocket<"u"?pc=MozWebSocket:typeof WebSocket<"u"&&(pc=WebSocket);class jn{constructor(e,n,s,o,c,d,h){this.connId=e,this.applicationId=s,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=No(this.connId),this.stats_=Ep(n),this.connURL=jn.connectionURL_(n,d,h,o,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,o,c){const d={};return d[p0]=bp,typeof location<"u"&&location.hostname&&y0.test(location.hostname)&&(d[m0]=v0),n&&(d[g0]=n),s&&(d[_0]=s),o&&(d[Rh]=o),c&&(d[b0]=c),T0(e,E0,d)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,kr.set("previous_websocket_failure",!0);try{let s;uR(),this.mySock=new pc(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){jn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&pc!==null&&!jn.forceDisallow_}static previouslyFailed(){return kr.isInMemoryStorage||kr.get("previous_websocket_failure")===!0}markConnectionHealthy(){kr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=fo(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Tt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=f0(n,ux);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(dx))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}jn.responsesRequiredToBeHealthy=2;jn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{static get ALL_TRANSPORTS(){return[As,jn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=jn&&jn.isAvailable();let s=n&&!jn.previouslyFailed();if(e.webSocketOnly&&(n||tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[jn];else{const o=this.transports_=[];for(const c of po.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);po.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}po.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=6e4,hx=5e3,px=10*1024,gx=100*1024,If="t",j_="d",mx="s",M_="r",vx="e",L_="o",P_="a",U_="n",z_="p",yx="h";class _x{constructor(e,n,s,o,c,d,h,p,g,_){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=c,this.onMessage_=d,this.onReady_=h,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=No("c:"+this.id+":"),this.transportManager_=new po(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=so(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>gx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>px?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(If in e){const n=e[If];n===P_?this.upgradeIfSecondaryHealthy_():n===M_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===L_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Za("t",e),s=Za("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:z_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:P_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:U_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Za("t",e),s=Za("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Za(If,e);if(j_ in e){const s=e[j_];if(n===yx){const o=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===U_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===mx?this.onConnectionShutdown_(s):n===M_?this.onReset_(s):n===vx?Oh("Server Error: "+s):n===L_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Oh("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),bp!==s&&tn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),so(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(fx))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):so(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(hx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:z_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(kr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{put(e,n,s,o){}merge(e,n,s,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.allowedEvents_=e,this.listeners_={},ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const o=this.getInitialEvent(e);o&&n.apply(s,o)}off(e,n,s){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let c=0;c<o.length;c++)if(o[c].callback===n&&(!s||s===o[c].context)){o.splice(c,1);return}}validateEventType_(e){ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends D0{static getInstance(){return new gc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!pp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=32,B_=768;class st{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Fe(){return new st("")}function Le(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function or(i){return i.pieces_.length-i.pieceNum_}function ot(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new st(i.pieces_,e)}function I0(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function bx(i){let e="";for(let n=i.pieceNum_;n<i.pieces_.length;n++)i.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(i.pieces_[n])));return e||"/"}function k0(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function j0(i){if(i.pieceNum_>=i.pieces_.length)return null;const e=[];for(let n=i.pieceNum_;n<i.pieces_.length-1;n++)e.push(i.pieces_[n]);return new st(e,0)}function wt(i,e){const n=[];for(let s=i.pieceNum_;s<i.pieces_.length;s++)n.push(i.pieces_[s]);if(e instanceof st)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&n.push(s[o])}return new st(n,0)}function He(i){return i.pieceNum_>=i.pieces_.length}function Gt(i,e){const n=Le(i),s=Le(e);if(n===null)return e;if(n===s)return Gt(ot(i),ot(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function Cp(i,e){if(or(i)!==or(e))return!1;for(let n=i.pieceNum_,s=e.pieceNum_;n<=i.pieces_.length;n++,s++)if(i.pieces_[n]!==e.pieces_[s])return!1;return!0}function Ln(i,e){let n=i.pieceNum_,s=e.pieceNum_;if(or(i)>or(e))return!1;for(;n<i.pieces_.length;){if(i.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class Ex{constructor(e,n){this.errorPrefix_=n,this.parts_=k0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Vc(this.parts_[s]);M0(this)}}function Sx(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=Vc(e),M0(i)}function Cx(i){const e=i.parts_.pop();i.byteLength_-=Vc(e),i.parts_.length>0&&(i.byteLength_-=1)}function M0(i){if(i.byteLength_>B_)throw new Error(i.errorPrefix_+"has a key path longer than "+B_+" bytes ("+i.byteLength_+").");if(i.parts_.length>H_)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+H_+") or object contains a cycle "+Dr(i))}function Dr(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp extends D0{static getInstance(){return new Tp}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=1e3,Tx=60*5*1e3,V_=30*1e3,wx=1.3,Ox=3e4,Rx="server_kill",$_=3;class vi extends A0{constructor(e,n,s,o,c,d,h,p){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=h,this.authOverride_=p,this.id=vi.nextPersistentConnectionId_++,this.log_=No("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ja,this.maxReconnectDelay_=Tx,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&gc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const o=++this.requestNumber_,c={r:o,a:e,b:n};this.log_(Tt(c)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),s&&(this.requestCBHash_[o]=s)}get(e){this.initConnection_();const n=new Bc,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const h=d.d;d.s==="ok"?n.resolve(h):n.reject(h)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),n.promise}listen(e,n,s,o){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const h={onComplete:o,hashFn:n,query:e,tag:s};this.listens.get(d).set(c,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+s+" for "+o);const c={p:s},d="q";e.tag&&(c.q=n._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(d,c,h=>{const p=h.d,g=h.s;vi.warnOnListenWarnings_(p,n),(this.listens.get(s)&&this.listens.get(s).get(o))===e&&(this.log_("listen response",h),g!=="ok"&&this.removeListen_(s,o),e.onComplete&&e.onComplete(g,p))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Si(e,"w")){const s=Us(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',c=n._path.toString();tn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||vR(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=V_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=mR(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,o=>{const c=o.s,d=o.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,e._queryObject,n)}sendUnlisten_(e,n,s,o){this.log_("Unlisten on "+e+" for "+n);const c={p:e},d="n";o&&(c.q=s,c.t=o),this.sendRequest(d,c)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,o){const c={p:n,d:s};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(e,n,s,o){this.putInternal("p",e,n,s,o)}merge(e,n,s,o){this.putInternal("m",e,n,s,o)}putInternal(e,n,s,o,c){this.initConnection_();const d={p:n,d:s};c!==void 0&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:o}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,c=>{this.log_(n+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const c=s.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Tt(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Oh("Unrecognized action received from server: "+Tt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Ox&&(this.reconnectDelay_=Ja),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*wx)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+vi.nextConnectionId_++,c=this.lastSessionId;let d=!1,h=null;const p=function(){h?h.close():(d=!0,s())},g=function(b){ne(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(b)};this.realtime_={close:p,sendRequest:g};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[b,E]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);d?Bt("getToken() completed but was canceled"):(Bt("getToken() completed. Creating connection."),this.authToken_=b&&b.accessToken,this.appCheckToken_=E&&E.token,h=new _x(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,O=>{tn(O+" ("+this.repoInfo_.toString()+")"),this.interrupt(Rx)},c))}catch(b){this.log_("Failed to get token: "+b),d||(this.repoInfo_.nodeAdmin&&tn(b),p())}}}interrupt(e){Bt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Bt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],bh(this.interruptReasons_)&&(this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(c=>_p(c)).join("$"):s="default";const o=this.removeListen_(e,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const s=new st(e).toString();let o;if(this.listens.has(s)){const c=this.listens.get(s);o=c.get(n),c.delete(n),c.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(e,n){Bt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=$_&&(this.reconnectDelay_=V_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Bt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=$_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+l0.replace(/\./g,"-")]=1,pp()?e["framework.cordova"]=1:e0()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=gc.getInstance().currentlyOnline();return bh(this.interruptReasons_)&&e}}vi.nextPersistentConnectionId_=0;vi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Pe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Pe(Hs,e),o=new Pe(Hs,n);return this.compare(s,o)!==0}minPost(){return Pe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl;class L0 extends $c{static get __EMPTY_NODE(){return Zl}static set __EMPTY_NODE(e){Zl=e}compare(e,n){return Ws(e.name,n.name)}isDefinedOn(e){throw qs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Pe.MIN}maxPost(){return new Pe(zr,Zl)}makePost(e,n){return ne(typeof e=="string","KeyIndex indexValue must always be a string."),new Pe(e,Zl)}toString(){return".key"}}const ks=new L0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,s,o,c=null){this.isReverse_=o,this.resultGenerator_=c,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=n?s(e.key,n):1,o&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Dt{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??Dt.RED,this.left=o??en.EMPTY_NODE,this.right=c??en.EMPTY_NODE}copy(e,n,s,o,c){return new Dt(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return c<0?o=o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return en.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,o;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return en.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Dt.RED=!0;Dt.BLACK=!1;class Nx{copy(e,n,s,o,c){return this}insert(e,n,s){return new Dt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class en{constructor(e,n=en.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new en(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Dt.BLACK,null,null))}remove(e){return new en(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Dt.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,o=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(o=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Jl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Jl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Jl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Jl(this.root_,null,this.comparator_,!0,e)}}en.EMPTY_NODE=new Nx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(i,e){return Ws(i.name,e.name)}function wp(i,e){return Ws(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh;function Ax(i){Nh=i}const P0=function(i){return typeof i=="number"?"number:"+h0(i):"string:"+i},U0=function(i){if(i.isLeafNode()){const e=i.val();ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Si(e,".sv"),"Priority must be a string or number.")}else ne(i===Nh||i.isEmpty(),"priority of unexpected type.");ne(i===Nh||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G_;class xt{static set __childrenNodeConstructor(e){G_=e}static get __childrenNodeConstructor(){return G_}constructor(e,n=xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),U0(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new xt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return He(e)?this:Le(e)===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=Le(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(ne(s!==".priority"||or(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ot(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+P0(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=h0(this.value_):e+=this.value_,this.lazyHash_=u0(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===xt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof xt.__childrenNodeConstructor?-1:(ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,o=xt.VALUE_TYPE_ORDER.indexOf(n),c=xt.VALUE_TYPE_ORDER.indexOf(s);return ne(o>=0,"Unknown leaf type: "+n),ne(c>=0,"Unknown leaf type: "+s),o===c?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z0,H0;function Dx(i){z0=i}function Ix(i){H0=i}class kx extends $c{compare(e,n){const s=e.node.getPriority(),o=n.node.getPriority(),c=s.compareTo(o);return c===0?Ws(e.name,n.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Pe.MIN}maxPost(){return new Pe(zr,new xt("[PRIORITY-POST]",H0))}makePost(e,n){const s=z0(e);return new Pe(n,new xt("[PRIORITY-POST]",s))}toString(){return".priority"}}const mt=new kx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=Math.log(2);class Mx{constructor(e){const n=c=>parseInt(Math.log(c)/jx,10),s=c=>parseInt(Array(c+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=s(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const mc=function(i,e,n,s){i.sort(e);const o=function(p,g){const _=g-p;let b,E;if(_===0)return null;if(_===1)return b=i[p],E=n?n(b):b,new Dt(E,b.node,Dt.BLACK,null,null);{const O=parseInt(_/2,10)+p,T=o(p,O),L=o(O+1,g);return b=i[O],E=n?n(b):b,new Dt(E,b.node,Dt.BLACK,T,L)}},c=function(p){let g=null,_=null,b=i.length;const E=function(T,L){const x=b-T,P=b;b-=T;const Y=o(x+1,P),J=i[x],te=n?n(J):J;O(new Dt(te,J.node,L,null,Y))},O=function(T){g?(g.left=T,g=T):(_=T,g=T)};for(let T=0;T<p.count;++T){const L=p.nextBitIsOne(),x=Math.pow(2,p.count-(T+1));L?E(x,Dt.BLACK):(E(x,Dt.BLACK),E(x,Dt.RED))}return _},d=new Mx(i.length),h=c(d);return new en(s||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf;const xs={};class hi{static get Default(){return ne(xs&&mt,"ChildrenNode.ts has not been loaded"),kf=kf||new hi({".priority":xs},{".priority":mt}),kf}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Us(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof en?n:null}hasIndex(e){return Si(this.indexSet_,e.toString())}addIndex(e,n){ne(e!==ks,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const c=n.getIterator(Pe.Wrap);let d=c.getNext();for(;d;)o=o||e.isDefinedOn(d.node),s.push(d),d=c.getNext();let h;o?h=mc(s,e.getCompare()):h=xs;const p=e.toString(),g=Object.assign({},this.indexSet_);g[p]=e;const _=Object.assign({},this.indexes_);return _[p]=h,new hi(_,g)}addToIndexes(e,n){const s=fc(this.indexes_,(o,c)=>{const d=Us(this.indexSet_,c);if(ne(d,"Missing index implementation for "+c),o===xs)if(d.isDefinedOn(e.node)){const h=[],p=n.getIterator(Pe.Wrap);let g=p.getNext();for(;g;)g.name!==e.name&&h.push(g),g=p.getNext();return h.push(e),mc(h,d.getCompare())}else return xs;else{const h=n.get(e.name);let p=o;return h&&(p=p.remove(new Pe(e.name,h))),p.insert(e,e.node)}});return new hi(s,this.indexSet_)}removeFromIndexes(e,n){const s=fc(this.indexes_,o=>{if(o===xs)return o;{const c=n.get(e.name);return c?o.remove(new Pe(e.name,c)):o}});return new hi(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo;class Se{static get EMPTY_NODE(){return eo||(eo=new Se(new en(wp),null,hi.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&U0(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||eo}updatePriority(e){return this.children_.isEmpty()?this:new Se(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?eo:n}}getChild(e){const n=Le(e);return n===null?this:this.getImmediateChild(n).getChild(ot(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Pe(e,n);let o,c;n.isEmpty()?(o=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(e,n),c=this.indexMap_.addToIndexes(s,this.children_));const d=o.isEmpty()?eo:this.priorityNode_;return new Se(o,d,c)}}updateChild(e,n){const s=Le(e);if(s===null)return n;{ne(Le(e)!==".priority"||or(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(ot(e),n);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,o=0,c=!0;if(this.forEachChild(mt,(d,h)=>{n[d]=h.val(e),s++,c&&Se.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):c=!1}),!e&&c&&o<2*s){const d=[];for(const h in n)d[h]=n[h];return d}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+P0(this.getPriority().val())+":"),this.forEachChild(mt,(n,s)=>{const o=s.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":u0(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const o=this.resolveIndex_(s);if(o){const c=o.getPredecessorKey(new Pe(e,n));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Pe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Pe(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Pe.Wrap);let c=o.peek();for(;c!=null&&n.compare(c,e)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Pe.Wrap);let c=o.peek();for(;c!=null&&n.compare(c,e)>0;)o.getNext(),c=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===xo?-1:0}withIndex(e){if(e===ks||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Se(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ks||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(mt),o=n.getIterator(mt);let c=s.getNext(),d=o.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=s.getNext(),d=o.getNext()}return c===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===ks?null:this.indexMap_.get(e.toString())}}Se.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Lx extends Se{constructor(){super(new en(wp),Se.EMPTY_NODE,hi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Se.EMPTY_NODE}isEmpty(){return!1}}const xo=new Lx;Object.defineProperties(Pe,{MIN:{value:new Pe(Hs,Se.EMPTY_NODE)},MAX:{value:new Pe(zr,xo)}});L0.__EMPTY_NODE=Se.EMPTY_NODE;xt.__childrenNodeConstructor=Se;Ax(xo);Ix(xo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=!0;function It(i,e=null){if(i===null)return Se.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(e=i[".priority"]),ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const n=i;return new xt(n,It(e))}if(!(i instanceof Array)&&Px){const n=[];let s=!1;if(nn(i,(d,h)=>{if(d.substring(0,1)!=="."){const p=It(h);p.isEmpty()||(s=s||!p.getPriority().isEmpty(),n.push(new Pe(d,p)))}}),n.length===0)return Se.EMPTY_NODE;const c=mc(n,xx,d=>d.name,wp);if(s){const d=mc(n,mt.getCompare());return new Se(c,It(e),new hi({".priority":d},{".priority":mt}))}else return new Se(c,It(e),hi.Default)}else{let n=Se.EMPTY_NODE;return nn(i,(s,o)=>{if(Si(i,s)&&s.substring(0,1)!=="."){const c=It(o);(c.isLeafNode()||!c.isEmpty())&&(n=n.updateImmediateChild(s,c))}}),n.updatePriority(It(e))}}Dx(It);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux extends $c{constructor(e){super(),this.indexPath_=e,ne(!He(e)&&Le(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),o=this.extractChild(n.node),c=s.compareTo(o);return c===0?Ws(e.name,n.name):c}makePost(e,n){const s=It(e),o=Se.EMPTY_NODE.updateChild(this.indexPath_,s);return new Pe(n,o)}maxPost(){const e=Se.EMPTY_NODE.updateChild(this.indexPath_,xo);return new Pe(zr,e)}toString(){return k0(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx extends $c{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Ws(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Pe.MIN}maxPost(){return Pe.MAX}makePost(e,n){const s=It(e);return new Pe(n,s)}toString(){return".value"}}const Hx=new zx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(i){return{type:"value",snapshotNode:i}}function Bs(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function go(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function mo(i,e,n){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:n}}function Bx(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e){this.index_=e}updateChild(e,n,s,o,c,d){ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(n);return h.getChild(o).equals(s.getChild(o))&&h.isEmpty()===s.isEmpty()||(d!=null&&(s.isEmpty()?e.hasChild(n)?d.trackChildChange(go(n,h)):ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?d.trackChildChange(Bs(n,s)):d.trackChildChange(mo(n,s,h))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(mt,(o,c)=>{n.hasChild(o)||s.trackChildChange(go(o,c))}),n.isLeafNode()||n.forEachChild(mt,(o,c)=>{if(e.hasChild(o)){const d=e.getImmediateChild(o);d.equals(c)||s.trackChildChange(mo(o,c,d))}else s.trackChildChange(Bs(o,c))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Se.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.indexedFilter_=new Op(e.getIndex()),this.index_=e.getIndex(),this.startPost_=vo.getStartPost_(e),this.endPost_=vo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,o,c,d){return this.matches(new Pe(n,s))||(s=Se.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,o,c,d)}updateFullNode(e,n,s){n.isLeafNode()&&(n=Se.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(Se.EMPTY_NODE);const c=this;return n.forEachChild(mt,(d,h)=>{c.matches(new Pe(d,h))||(o=o.updateImmediateChild(d,Se.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new vo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,o,c,d){return this.rangedFilter_.matches(new Pe(n,s))||(s=Se.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,o,c,d):this.fullLimitUpdateChild_(e,n,s,c,d)}updateFullNode(e,n,s){let o;if(n.isLeafNode()||n.isEmpty())o=Se.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=Se.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;c.hasNext()&&d<this.limit_;){const h=c.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))o=o.updateImmediateChild(h.name,h.node),d++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(Se.EMPTY_NODE);let c;this.reverse_?c=o.getReverseIterator(this.index_):c=o.getIterator(this.index_);let d=0;for(;c.hasNext();){const h=c.getNext();d<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?d++:o=o.updateImmediateChild(h.name,Se.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,o,c){let d;if(this.reverse_){const b=this.index_.getCompare();d=(E,O)=>b(O,E)}else d=this.index_.getCompare();const h=e;ne(h.numChildren()===this.limit_,"");const p=new Pe(n,s),g=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),_=this.rangedFilter_.matches(p);if(h.hasChild(n)){const b=h.getImmediateChild(n);let E=o.getChildAfterChild(this.index_,g,this.reverse_);for(;E!=null&&(E.name===n||h.hasChild(E.name));)E=o.getChildAfterChild(this.index_,E,this.reverse_);const O=E==null?1:d(E,p);if(_&&!s.isEmpty()&&O>=0)return c!=null&&c.trackChildChange(mo(n,s,b)),h.updateImmediateChild(n,s);{c!=null&&c.trackChildChange(go(n,b));const L=h.updateImmediateChild(n,Se.EMPTY_NODE);return E!=null&&this.rangedFilter_.matches(E)?(c!=null&&c.trackChildChange(Bs(E.name,E.node)),L.updateImmediateChild(E.name,E.node)):L}}else return s.isEmpty()?e:_&&d(g,p)>=0?(c!=null&&(c.trackChildChange(go(g.name,g.node)),c.trackChildChange(Bs(n,s))),h.updateImmediateChild(n,s).updateImmediateChild(g.name,Se.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Hs}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mt}copy(){const e=new Rp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $x(i){return i.loadsAllData()?new Op(i.getIndex()):i.hasLimit()?new Vx(i):new vo(i)}function q_(i){const e={};if(i.isDefault())return e;let n;if(i.index_===mt?n="$priority":i.index_===Hx?n="$value":i.index_===ks?n="$key":(ne(i.index_ instanceof Ux,"Unrecognized index type!"),n=i.index_.toString()),e.orderBy=Tt(n),i.startSet_){const s=i.startAfterSet_?"startAfter":"startAt";e[s]=Tt(i.indexStartValue_),i.startNameSet_&&(e[s]+=","+Tt(i.indexStartName_))}if(i.endSet_){const s=i.endBeforeSet_?"endBefore":"endAt";e[s]=Tt(i.indexEndValue_),i.endNameSet_&&(e[s]+=","+Tt(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function Y_(i){const e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let n=i.viewFrom_;n===""&&(i.isViewFromLeft()?n="l":n="r"),e.vf=n}return i.index_!==mt&&(e.i=i.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends A0{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=No("p:rest:"),this.listens_={}}listen(e,n,s,o){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const d=vc.getListenId_(e,s),h={};this.listens_[d]=h;const p=q_(e._queryParams);this.restRequest_(c+".json",p,(g,_)=>{let b=_;if(g===404&&(b=null,g=null),g===null&&this.onDataUpdate_(c,b,!1,s),Us(this.listens_,d)===h){let E;g?g===401?E="permission_denied":E="rest_error:"+g:E="ok",o(E,null)}})}unlisten(e,n){const s=vc.getListenId_(e,n);delete this.listens_[s]}get(e){const n=q_(e._queryParams),s=e._path.toString(),o=new Bc;return this.restRequest_(s+".json",n,(c,d)=>{let h=d;c===404&&(h=null,c=null),c===null?(this.onDataUpdate_(s,h,!1,null),o.resolve(h)):o.reject(new Error(h))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,c])=>{o&&o.accessToken&&(n.auth=o.accessToken),c&&c.token&&(n.ac=c.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ys(n);this.log_("Sending REST request for "+d);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(s&&h.readyState===4){this.log_("REST Response for "+d+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=fo(h.responseText)}catch{tn("Failed to parse JSON response for "+d+": "+h.responseText)}s(null,p)}else h.status!==401&&h.status!==404&&tn("Got unsuccessful REST response for "+d+" Status: "+h.status),s(h.status);s=null}},h.open("GET",d,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.rootNode_=Se.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(){return{value:null,children:new Map}}function V0(i,e,n){if(He(e))i.value=n,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(e,n);else{const s=Le(e);i.children.has(s)||i.children.set(s,yc());const o=i.children.get(s);e=ot(e),V0(o,e,n)}}function xh(i,e,n){i.value!==null?n(e,i.value):qx(i,(s,o)=>{const c=new st(e.toString()+"/"+s);xh(o,c,n)})}function qx(i,e){i.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&nn(this.last_,(s,o)=>{n[s]=n[s]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=10*1e3,Fx=30*1e3,Wx=5*60*1e3;class Qx{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Yx(e);const s=F_+(Fx-F_)*Math.random();so(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;nn(e,(o,c)=>{c>0&&Si(this.statsToReport_,o)&&(n[o]=c,s=!0)}),s&&this.server_.reportStats(n),so(this.reportStats_.bind(this),Math.floor(Math.random()*2*Wx))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pn;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Pn||(Pn={}));function $0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Np(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function xp(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Pn.ACK_USER_WRITE,this.source=$0()}operationForChild(e){if(He(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new st(e));return new _c(Fe(),n,this.revert)}}else return ne(Le(this.path)===e,"operationForChild called for unrelated child."),new _c(ot(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){this.source=e,this.path=n,this.type=Pn.LISTEN_COMPLETE}operationForChild(e){return He(this.path)?new yo(this.source,Fe()):new yo(this.source,ot(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Pn.OVERWRITE}operationForChild(e){return He(this.path)?new Hr(this.source,Fe(),this.snap.getImmediateChild(e)):new Hr(this.source,ot(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Pn.MERGE}operationForChild(e){if(He(this.path)){const n=this.children.subtree(new st(e));return n.isEmpty()?null:n.value?new Hr(this.source,Fe(),n.value):new _o(this.source,Fe(),n)}else return ne(Le(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _o(this.source,ot(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(He(e))return this.isFullyInitialized()&&!this.filtered_;const n=Le(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Xx(i,e,n,s){const o=[],c=[];return e.forEach(d=>{d.type==="child_changed"&&i.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&c.push(Bx(d.childName,d.snapshotNode))}),to(i,o,"child_removed",e,s,n),to(i,o,"child_added",e,s,n),to(i,o,"child_moved",c,s,n),to(i,o,"child_changed",e,s,n),to(i,o,"value",e,s,n),o}function to(i,e,n,s,o,c){const d=s.filter(h=>h.type===n);d.sort((h,p)=>Jx(i,h,p)),d.forEach(h=>{const p=Zx(i,h,c);o.forEach(g=>{g.respondsTo(h.type)&&e.push(g.createEvent(p,i.query_))})})}function Zx(i,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}function Jx(i,e,n){if(e.childName==null||n.childName==null)throw qs("Should only compare child_ events.");const s=new Pe(e.childName,e.snapshotNode),o=new Pe(n.childName,n.snapshotNode);return i.index_.compare(s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(i,e){return{eventCache:i,serverCache:e}}function ao(i,e,n,s){return Gc(new lr(e,n,s),i.serverCache)}function G0(i,e,n,s){return Gc(i.eventCache,new lr(e,n,s))}function bc(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function Br(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jf;const eA=()=>(jf||(jf=new en(zN)),jf);class ut{static fromObject(e){let n=new ut(null);return nn(e,(s,o)=>{n=n.set(new st(s),o)}),n}constructor(e,n=eA()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Fe(),value:this.value};if(He(e))return null;{const s=Le(e),o=this.children.get(s);if(o!==null){const c=o.findRootMostMatchingPathAndValue(ot(e),n);return c!=null?{path:wt(new st(s),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(He(e))return this;{const n=Le(e),s=this.children.get(n);return s!==null?s.subtree(ot(e)):new ut(null)}}set(e,n){if(He(e))return new ut(n,this.children);{const s=Le(e),c=(this.children.get(s)||new ut(null)).set(ot(e),n),d=this.children.insert(s,c);return new ut(this.value,d)}}remove(e){if(He(e))return this.children.isEmpty()?new ut(null):new ut(null,this.children);{const n=Le(e),s=this.children.get(n);if(s){const o=s.remove(ot(e));let c;return o.isEmpty()?c=this.children.remove(n):c=this.children.insert(n,o),this.value===null&&c.isEmpty()?new ut(null):new ut(this.value,c)}else return this}}get(e){if(He(e))return this.value;{const n=Le(e),s=this.children.get(n);return s?s.get(ot(e)):null}}setTree(e,n){if(He(e))return n;{const s=Le(e),c=(this.children.get(s)||new ut(null)).setTree(ot(e),n);let d;return c.isEmpty()?d=this.children.remove(s):d=this.children.insert(s,c),new ut(this.value,d)}}fold(e){return this.fold_(Fe(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((o,c)=>{s[o]=c.fold_(wt(e,o),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Fe(),n)}findOnPath_(e,n,s){const o=this.value?s(n,this.value):!1;if(o)return o;if(He(e))return null;{const c=Le(e),d=this.children.get(c);return d?d.findOnPath_(ot(e),wt(n,c),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Fe(),n)}foreachOnPath_(e,n,s){if(He(e))return this;{this.value&&s(n,this.value);const o=Le(e),c=this.children.get(o);return c?c.foreachOnPath_(ot(e),wt(n,o),s):new ut(null)}}foreach(e){this.foreach_(Fe(),e)}foreach_(e,n){this.children.inorderTraversal((s,o)=>{o.foreach_(wt(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.writeTree_=e}static empty(){return new zn(new ut(null))}}function oo(i,e,n){if(He(e))return new zn(new ut(n));{const s=i.writeTree_.findRootMostValueAndPath(e);if(s!=null){const o=s.path;let c=s.value;const d=Gt(o,e);return c=c.updateChild(d,n),new zn(i.writeTree_.set(o,c))}else{const o=new ut(n),c=i.writeTree_.setTree(e,o);return new zn(c)}}}function W_(i,e,n){let s=i;return nn(n,(o,c)=>{s=oo(s,wt(e,o),c)}),s}function Q_(i,e){if(He(e))return zn.empty();{const n=i.writeTree_.setTree(e,new ut(null));return new zn(n)}}function Ah(i,e){return $r(i,e)!=null}function $r(i,e){const n=i.writeTree_.findRootMostValueAndPath(e);return n!=null?i.writeTree_.get(n.path).getChild(Gt(n.path,e)):null}function K_(i){const e=[],n=i.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(mt,(s,o)=>{e.push(new Pe(s,o))}):i.writeTree_.children.inorderTraversal((s,o)=>{o.value!=null&&e.push(new Pe(s,o.value))}),e}function ir(i,e){if(He(e))return i;{const n=$r(i,e);return n!=null?new zn(new ut(n)):new zn(i.writeTree_.subtree(e))}}function Dh(i){return i.writeTree_.isEmpty()}function Vs(i,e){return q0(Fe(),i.writeTree_,e)}function q0(i,e,n){if(e.value!=null)return n.updateChild(i,e.value);{let s=null;return e.children.inorderTraversal((o,c)=>{o===".priority"?(ne(c.value!==null,"Priority writes must always be leaf nodes"),s=c.value):n=q0(wt(i,o),c,n)}),!n.getChild(i).isEmpty()&&s!==null&&(n=n.updateChild(wt(i,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(i,e){return Q0(e,i)}function tA(i,e,n,s,o){ne(s>i.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),i.allWrites.push({path:e,snap:n,writeId:s,visible:o}),o&&(i.visibleWrites=oo(i.visibleWrites,e,n)),i.lastWriteId=s}function nA(i,e){for(let n=0;n<i.allWrites.length;n++){const s=i.allWrites[n];if(s.writeId===e)return s}return null}function iA(i,e){const n=i.allWrites.findIndex(h=>h.writeId===e);ne(n>=0,"removeWrite called with nonexistent writeId.");const s=i.allWrites[n];i.allWrites.splice(n,1);let o=s.visible,c=!1,d=i.allWrites.length-1;for(;o&&d>=0;){const h=i.allWrites[d];h.visible&&(d>=n&&rA(h,s.path)?o=!1:Ln(s.path,h.path)&&(c=!0)),d--}if(o){if(c)return sA(i),!0;if(s.snap)i.visibleWrites=Q_(i.visibleWrites,s.path);else{const h=s.children;nn(h,p=>{i.visibleWrites=Q_(i.visibleWrites,wt(s.path,p))})}return!0}else return!1}function rA(i,e){if(i.snap)return Ln(i.path,e);for(const n in i.children)if(i.children.hasOwnProperty(n)&&Ln(wt(i.path,n),e))return!0;return!1}function sA(i){i.visibleWrites=Y0(i.allWrites,aA,Fe()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function aA(i){return i.visible}function Y0(i,e,n){let s=zn.empty();for(let o=0;o<i.length;++o){const c=i[o];if(e(c)){const d=c.path;let h;if(c.snap)Ln(n,d)?(h=Gt(n,d),s=oo(s,h,c.snap)):Ln(d,n)&&(h=Gt(d,n),s=oo(s,Fe(),c.snap.getChild(h)));else if(c.children){if(Ln(n,d))h=Gt(n,d),s=W_(s,h,c.children);else if(Ln(d,n))if(h=Gt(d,n),He(h))s=W_(s,Fe(),c.children);else{const p=Us(c.children,Le(h));if(p){const g=p.getChild(ot(h));s=oo(s,Fe(),g)}}}else throw qs("WriteRecord should have .snap or .children")}}return s}function F0(i,e,n,s,o){if(!s&&!o){const c=$r(i.visibleWrites,e);if(c!=null)return c;{const d=ir(i.visibleWrites,e);if(Dh(d))return n;if(n==null&&!Ah(d,Fe()))return null;{const h=n||Se.EMPTY_NODE;return Vs(d,h)}}}else{const c=ir(i.visibleWrites,e);if(!o&&Dh(c))return n;if(!o&&n==null&&!Ah(c,Fe()))return null;{const d=function(g){return(g.visible||o)&&(!s||!~s.indexOf(g.writeId))&&(Ln(g.path,e)||Ln(e,g.path))},h=Y0(i.allWrites,d,e),p=n||Se.EMPTY_NODE;return Vs(h,p)}}}function oA(i,e,n){let s=Se.EMPTY_NODE;const o=$r(i.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(mt,(c,d)=>{s=s.updateImmediateChild(c,d)}),s;if(n){const c=ir(i.visibleWrites,e);return n.forEachChild(mt,(d,h)=>{const p=Vs(ir(c,new st(d)),h);s=s.updateImmediateChild(d,p)}),K_(c).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}else{const c=ir(i.visibleWrites,e);return K_(c).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}}function lA(i,e,n,s,o){ne(s||o,"Either existingEventSnap or existingServerSnap must exist");const c=wt(e,n);if(Ah(i.visibleWrites,c))return null;{const d=ir(i.visibleWrites,c);return Dh(d)?o.getChild(n):Vs(d,o.getChild(n))}}function cA(i,e,n,s){const o=wt(e,n),c=$r(i.visibleWrites,o);if(c!=null)return c;if(s.isCompleteForChild(n)){const d=ir(i.visibleWrites,o);return Vs(d,s.getNode().getImmediateChild(n))}else return null}function uA(i,e){return $r(i.visibleWrites,e)}function dA(i,e,n,s,o,c,d){let h;const p=ir(i.visibleWrites,e),g=$r(p,Fe());if(g!=null)h=g;else if(n!=null)h=Vs(p,n);else return[];if(h=h.withIndex(d),!h.isEmpty()&&!h.isLeafNode()){const _=[],b=d.getCompare(),E=c?h.getReverseIteratorFrom(s,d):h.getIteratorFrom(s,d);let O=E.getNext();for(;O&&_.length<o;)b(O,s)!==0&&_.push(O),O=E.getNext();return _}else return[]}function fA(){return{visibleWrites:zn.empty(),allWrites:[],lastWriteId:-1}}function Ec(i,e,n,s){return F0(i.writeTree,i.treePath,e,n,s)}function Ap(i,e){return oA(i.writeTree,i.treePath,e)}function X_(i,e,n,s){return lA(i.writeTree,i.treePath,e,n,s)}function Sc(i,e){return uA(i.writeTree,wt(i.treePath,e))}function hA(i,e,n,s,o,c){return dA(i.writeTree,i.treePath,e,n,s,o,c)}function Dp(i,e,n){return cA(i.writeTree,i.treePath,e,n)}function W0(i,e){return Q0(wt(i.treePath,e),i.writeTree)}function Q0(i,e){return{treePath:i,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ne(s!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const c=o.type;if(n==="child_added"&&c==="child_removed")this.changeMap.set(s,mo(s,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&c==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&c==="child_changed")this.changeMap.set(s,go(s,o.oldSnap));else if(n==="child_changed"&&c==="child_added")this.changeMap.set(s,Bs(s,e.snapshotNode));else if(n==="child_changed"&&c==="child_changed")this.changeMap.set(s,mo(s,e.snapshotNode,o.oldSnap));else throw qs("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const K0=new gA;class Ip{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new lr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Dp(this.writes_,e,s)}}getChildAfterChild(e,n,s){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Br(this.viewCache_),c=hA(this.writes_,o,n,1,s,e);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(i){return{filter:i}}function vA(i,e){ne(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),ne(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function yA(i,e,n,s,o){const c=new pA;let d,h;if(n.type===Pn.OVERWRITE){const g=n;g.source.fromUser?d=Ih(i,e,g.path,g.snap,s,o,c):(ne(g.source.fromServer,"Unknown source."),h=g.source.tagged||e.serverCache.isFiltered()&&!He(g.path),d=Cc(i,e,g.path,g.snap,s,o,h,c))}else if(n.type===Pn.MERGE){const g=n;g.source.fromUser?d=bA(i,e,g.path,g.children,s,o,c):(ne(g.source.fromServer,"Unknown source."),h=g.source.tagged||e.serverCache.isFiltered(),d=kh(i,e,g.path,g.children,s,o,h,c))}else if(n.type===Pn.ACK_USER_WRITE){const g=n;g.revert?d=CA(i,e,g.path,s,o,c):d=EA(i,e,g.path,g.affectedTree,s,o,c)}else if(n.type===Pn.LISTEN_COMPLETE)d=SA(i,e,n.path,s,c);else throw qs("Unknown operation type: "+n.type);const p=c.getChanges();return _A(e,d,p),{viewCache:d,changes:p}}function _A(i,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),c=bc(i);(n.length>0||!i.eventCache.isFullyInitialized()||o&&!s.getNode().equals(c)||!s.getNode().getPriority().equals(c.getPriority()))&&n.push(B0(bc(e)))}}function X0(i,e,n,s,o,c){const d=e.eventCache;if(Sc(s,n)!=null)return e;{let h,p;if(He(n))if(ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=Br(e),_=g instanceof Se?g:Se.EMPTY_NODE,b=Ap(s,_);h=i.filter.updateFullNode(e.eventCache.getNode(),b,c)}else{const g=Ec(s,Br(e));h=i.filter.updateFullNode(e.eventCache.getNode(),g,c)}else{const g=Le(n);if(g===".priority"){ne(or(n)===1,"Can't have a priority with additional path components");const _=d.getNode();p=e.serverCache.getNode();const b=X_(s,n,_,p);b!=null?h=i.filter.updatePriority(_,b):h=d.getNode()}else{const _=ot(n);let b;if(d.isCompleteForChild(g)){p=e.serverCache.getNode();const E=X_(s,n,d.getNode(),p);E!=null?b=d.getNode().getImmediateChild(g).updateChild(_,E):b=d.getNode().getImmediateChild(g)}else b=Dp(s,g,e.serverCache);b!=null?h=i.filter.updateChild(d.getNode(),g,b,_,o,c):h=d.getNode()}}return ao(e,h,d.isFullyInitialized()||He(n),i.filter.filtersNodes())}}function Cc(i,e,n,s,o,c,d,h){const p=e.serverCache;let g;const _=d?i.filter:i.filter.getIndexedFilter();if(He(n))g=_.updateFullNode(p.getNode(),s,null);else if(_.filtersNodes()&&!p.isFiltered()){const O=p.getNode().updateChild(n,s);g=_.updateFullNode(p.getNode(),O,null)}else{const O=Le(n);if(!p.isCompleteForPath(n)&&or(n)>1)return e;const T=ot(n),x=p.getNode().getImmediateChild(O).updateChild(T,s);O===".priority"?g=_.updatePriority(p.getNode(),x):g=_.updateChild(p.getNode(),O,x,T,K0,null)}const b=G0(e,g,p.isFullyInitialized()||He(n),_.filtersNodes()),E=new Ip(o,b,c);return X0(i,b,n,o,E,h)}function Ih(i,e,n,s,o,c,d){const h=e.eventCache;let p,g;const _=new Ip(o,e,c);if(He(n))g=i.filter.updateFullNode(e.eventCache.getNode(),s,d),p=ao(e,g,!0,i.filter.filtersNodes());else{const b=Le(n);if(b===".priority")g=i.filter.updatePriority(e.eventCache.getNode(),s),p=ao(e,g,h.isFullyInitialized(),h.isFiltered());else{const E=ot(n),O=h.getNode().getImmediateChild(b);let T;if(He(E))T=s;else{const L=_.getCompleteChild(b);L!=null?I0(E)===".priority"&&L.getChild(j0(E)).isEmpty()?T=L:T=L.updateChild(E,s):T=Se.EMPTY_NODE}if(O.equals(T))p=e;else{const L=i.filter.updateChild(h.getNode(),b,T,E,_,d);p=ao(e,L,h.isFullyInitialized(),i.filter.filtersNodes())}}}return p}function Z_(i,e){return i.eventCache.isCompleteForChild(e)}function bA(i,e,n,s,o,c,d){let h=e;return s.foreach((p,g)=>{const _=wt(n,p);Z_(e,Le(_))&&(h=Ih(i,h,_,g,o,c,d))}),s.foreach((p,g)=>{const _=wt(n,p);Z_(e,Le(_))||(h=Ih(i,h,_,g,o,c,d))}),h}function J_(i,e,n){return n.foreach((s,o)=>{e=e.updateChild(s,o)}),e}function kh(i,e,n,s,o,c,d,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,g;He(n)?g=s:g=new ut(null).setTree(n,s);const _=e.serverCache.getNode();return g.children.inorderTraversal((b,E)=>{if(_.hasChild(b)){const O=e.serverCache.getNode().getImmediateChild(b),T=J_(i,O,E);p=Cc(i,p,new st(b),T,o,c,d,h)}}),g.children.inorderTraversal((b,E)=>{const O=!e.serverCache.isCompleteForChild(b)&&E.value===null;if(!_.hasChild(b)&&!O){const T=e.serverCache.getNode().getImmediateChild(b),L=J_(i,T,E);p=Cc(i,p,new st(b),L,o,c,d,h)}}),p}function EA(i,e,n,s,o,c,d){if(Sc(o,n)!=null)return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(s.value!=null){if(He(n)&&p.isFullyInitialized()||p.isCompleteForPath(n))return Cc(i,e,n,p.getNode().getChild(n),o,c,h,d);if(He(n)){let g=new ut(null);return p.getNode().forEachChild(ks,(_,b)=>{g=g.set(new st(_),b)}),kh(i,e,n,g,o,c,h,d)}else return e}else{let g=new ut(null);return s.foreach((_,b)=>{const E=wt(n,_);p.isCompleteForPath(E)&&(g=g.set(_,p.getNode().getChild(E)))}),kh(i,e,n,g,o,c,h,d)}}function SA(i,e,n,s,o){const c=e.serverCache,d=G0(e,c.getNode(),c.isFullyInitialized()||He(n),c.isFiltered());return X0(i,d,n,s,K0,o)}function CA(i,e,n,s,o,c){let d;if(Sc(s,n)!=null)return e;{const h=new Ip(s,e,o),p=e.eventCache.getNode();let g;if(He(n)||Le(n)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=Ec(s,Br(e));else{const b=e.serverCache.getNode();ne(b instanceof Se,"serverChildren would be complete if leaf node"),_=Ap(s,b)}_=_,g=i.filter.updateFullNode(p,_,c)}else{const _=Le(n);let b=Dp(s,_,e.serverCache);b==null&&e.serverCache.isCompleteForChild(_)&&(b=p.getImmediateChild(_)),b!=null?g=i.filter.updateChild(p,_,b,ot(n),h,c):e.eventCache.getNode().hasChild(_)?g=i.filter.updateChild(p,_,Se.EMPTY_NODE,ot(n),h,c):g=p,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=Ec(s,Br(e)),d.isLeafNode()&&(g=i.filter.updateFullNode(g,d,c)))}return d=e.serverCache.isFullyInitialized()||Sc(s,Fe())!=null,ao(e,g,d,i.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new Op(s.getIndex()),c=$x(s);this.processor_=mA(c);const d=n.serverCache,h=n.eventCache,p=o.updateFullNode(Se.EMPTY_NODE,d.getNode(),null),g=c.updateFullNode(Se.EMPTY_NODE,h.getNode(),null),_=new lr(p,d.isFullyInitialized(),o.filtersNodes()),b=new lr(g,h.isFullyInitialized(),c.filtersNodes());this.viewCache_=Gc(b,_),this.eventGenerator_=new Kx(this.query_)}get query(){return this.query_}}function wA(i){return i.viewCache_.serverCache.getNode()}function OA(i){return bc(i.viewCache_)}function RA(i,e){const n=Br(i.viewCache_);return n&&(i.query._queryParams.loadsAllData()||!He(e)&&!n.getImmediateChild(Le(e)).isEmpty())?n.getChild(e):null}function eb(i){return i.eventRegistrations_.length===0}function NA(i,e){i.eventRegistrations_.push(e)}function tb(i,e,n){const s=[];if(n){ne(e==null,"A cancel should cancel all event registrations.");const o=i.query._path;i.eventRegistrations_.forEach(c=>{const d=c.createCancelEvent(n,o);d&&s.push(d)})}if(e){let o=[];for(let c=0;c<i.eventRegistrations_.length;++c){const d=i.eventRegistrations_[c];if(!d.matches(e))o.push(d);else if(e.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(c+1));break}}i.eventRegistrations_=o}else i.eventRegistrations_=[];return s}function nb(i,e,n,s){e.type===Pn.MERGE&&e.source.queryId!==null&&(ne(Br(i.viewCache_),"We should always have a full cache before handling merges"),ne(bc(i.viewCache_),"Missing event cache, even though we have a server cache"));const o=i.viewCache_,c=yA(i.processor_,o,e,n,s);return vA(i.processor_,c.viewCache),ne(c.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=c.viewCache,Z0(i,c.changes,c.viewCache.eventCache.getNode(),null)}function xA(i,e){const n=i.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(mt,(c,d)=>{s.push(Bs(c,d))}),n.isFullyInitialized()&&s.push(B0(n.getNode())),Z0(i,s,n.getNode(),e)}function Z0(i,e,n,s){const o=s?[s]:i.eventRegistrations_;return Xx(i.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc;class J0{constructor(){this.views=new Map}}function AA(i){ne(!Tc,"__referenceConstructor has already been defined"),Tc=i}function DA(){return ne(Tc,"Reference.ts has not been loaded"),Tc}function IA(i){return i.views.size===0}function kp(i,e,n,s){const o=e.source.queryId;if(o!==null){const c=i.views.get(o);return ne(c!=null,"SyncTree gave us an op for an invalid query."),nb(c,e,n,s)}else{let c=[];for(const d of i.views.values())c=c.concat(nb(d,e,n,s));return c}}function eE(i,e,n,s,o){const c=e._queryIdentifier,d=i.views.get(c);if(!d){let h=Ec(n,o?s:null),p=!1;h?p=!0:s instanceof Se?(h=Ap(n,s),p=!1):(h=Se.EMPTY_NODE,p=!1);const g=Gc(new lr(h,p,!1),new lr(s,o,!1));return new TA(e,g)}return d}function kA(i,e,n,s,o,c){const d=eE(i,e,s,o,c);return i.views.has(e._queryIdentifier)||i.views.set(e._queryIdentifier,d),NA(d,n),xA(d,n)}function jA(i,e,n,s){const o=e._queryIdentifier,c=[];let d=[];const h=cr(i);if(o==="default")for(const[p,g]of i.views.entries())d=d.concat(tb(g,n,s)),eb(g)&&(i.views.delete(p),g.query._queryParams.loadsAllData()||c.push(g.query));else{const p=i.views.get(o);p&&(d=d.concat(tb(p,n,s)),eb(p)&&(i.views.delete(o),p.query._queryParams.loadsAllData()||c.push(p.query)))}return h&&!cr(i)&&c.push(new(DA())(e._repo,e._path)),{removed:c,events:d}}function tE(i){const e=[];for(const n of i.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function rr(i,e){let n=null;for(const s of i.views.values())n=n||RA(s,e);return n}function nE(i,e){if(e._queryParams.loadsAllData())return Yc(i);{const s=e._queryIdentifier;return i.views.get(s)}}function iE(i,e){return nE(i,e)!=null}function cr(i){return Yc(i)!=null}function Yc(i){for(const e of i.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc;function MA(i){ne(!wc,"__referenceConstructor has already been defined"),wc=i}function LA(){return ne(wc,"Reference.ts has not been loaded"),wc}let PA=1;class ib{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ut(null),this.pendingWriteTree_=fA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function rE(i,e,n,s,o){return tA(i.pendingWriteTree_,e,n,s,o),o?Do(i,new Hr($0(),e,n)):[]}function jr(i,e,n=!1){const s=nA(i.pendingWriteTree_,e);if(iA(i.pendingWriteTree_,e)){let c=new ut(null);return s.snap!=null?c=c.set(Fe(),!0):nn(s.children,d=>{c=c.set(new st(d),!0)}),Do(i,new _c(s.path,c,n))}else return[]}function Ao(i,e,n){return Do(i,new Hr(Np(),e,n))}function UA(i,e,n){const s=ut.fromObject(n);return Do(i,new _o(Np(),e,s))}function zA(i,e){return Do(i,new yo(Np(),e))}function HA(i,e,n){const s=Mp(i,n);if(s){const o=Lp(s),c=o.path,d=o.queryId,h=Gt(c,e),p=new yo(xp(d),h);return Pp(i,c,p)}else return[]}function Oc(i,e,n,s,o=!1){const c=e._path,d=i.syncPointTree_.get(c);let h=[];if(d&&(e._queryIdentifier==="default"||iE(d,e))){const p=jA(d,e,n,s);IA(d)&&(i.syncPointTree_=i.syncPointTree_.remove(c));const g=p.removed;if(h=p.events,!o){const _=g.findIndex(E=>E._queryParams.loadsAllData())!==-1,b=i.syncPointTree_.findOnPath(c,(E,O)=>cr(O));if(_&&!b){const E=i.syncPointTree_.subtree(c);if(!E.isEmpty()){const O=$A(E);for(let T=0;T<O.length;++T){const L=O[T],x=L.query,P=lE(i,L);i.listenProvider_.startListening(lo(x),bo(i,x),P.hashFn,P.onComplete)}}}!b&&g.length>0&&!s&&(_?i.listenProvider_.stopListening(lo(e),null):g.forEach(E=>{const O=i.queryToTagMap.get(Fc(E));i.listenProvider_.stopListening(lo(E),O)}))}GA(i,g)}return h}function sE(i,e,n,s){const o=Mp(i,s);if(o!=null){const c=Lp(o),d=c.path,h=c.queryId,p=Gt(d,e),g=new Hr(xp(h),p,n);return Pp(i,d,g)}else return[]}function BA(i,e,n,s){const o=Mp(i,s);if(o){const c=Lp(o),d=c.path,h=c.queryId,p=Gt(d,e),g=ut.fromObject(n),_=new _o(xp(h),p,g);return Pp(i,d,_)}else return[]}function jh(i,e,n,s=!1){const o=e._path;let c=null,d=!1;i.syncPointTree_.foreachOnPath(o,(E,O)=>{const T=Gt(E,o);c=c||rr(O,T),d=d||cr(O)});let h=i.syncPointTree_.get(o);h?(d=d||cr(h),c=c||rr(h,Fe())):(h=new J0,i.syncPointTree_=i.syncPointTree_.set(o,h));let p;c!=null?p=!0:(p=!1,c=Se.EMPTY_NODE,i.syncPointTree_.subtree(o).foreachChild((O,T)=>{const L=rr(T,Fe());L&&(c=c.updateImmediateChild(O,L))}));const g=iE(h,e);if(!g&&!e._queryParams.loadsAllData()){const E=Fc(e);ne(!i.queryToTagMap.has(E),"View does not exist, but we have a tag");const O=qA();i.queryToTagMap.set(E,O),i.tagToQueryMap.set(O,E)}const _=qc(i.pendingWriteTree_,o);let b=kA(h,e,n,_,c,p);if(!g&&!d&&!s){const E=nE(h,e);b=b.concat(YA(i,e,E))}return b}function jp(i,e,n){const o=i.pendingWriteTree_,c=i.syncPointTree_.findOnPath(e,(d,h)=>{const p=Gt(d,e),g=rr(h,p);if(g)return g});return F0(o,e,c,n,!0)}function VA(i,e){const n=e._path;let s=null;i.syncPointTree_.foreachOnPath(n,(g,_)=>{const b=Gt(g,n);s=s||rr(_,b)});let o=i.syncPointTree_.get(n);o?s=s||rr(o,Fe()):(o=new J0,i.syncPointTree_=i.syncPointTree_.set(n,o));const c=s!=null,d=c?new lr(s,!0,!1):null,h=qc(i.pendingWriteTree_,e._path),p=eE(o,e,h,c?d.getNode():Se.EMPTY_NODE,c);return OA(p)}function Do(i,e){return aE(e,i.syncPointTree_,null,qc(i.pendingWriteTree_,Fe()))}function aE(i,e,n,s){if(He(i.path))return oE(i,e,n,s);{const o=e.get(Fe());n==null&&o!=null&&(n=rr(o,Fe()));let c=[];const d=Le(i.path),h=i.operationForChild(d),p=e.children.get(d);if(p&&h){const g=n?n.getImmediateChild(d):null,_=W0(s,d);c=c.concat(aE(h,p,g,_))}return o&&(c=c.concat(kp(o,i,s,n))),c}}function oE(i,e,n,s){const o=e.get(Fe());n==null&&o!=null&&(n=rr(o,Fe()));let c=[];return e.children.inorderTraversal((d,h)=>{const p=n?n.getImmediateChild(d):null,g=W0(s,d),_=i.operationForChild(d);_&&(c=c.concat(oE(_,h,p,g)))}),o&&(c=c.concat(kp(o,i,s,n))),c}function lE(i,e){const n=e.query,s=bo(i,n);return{hashFn:()=>(wA(e)||Se.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return s?HA(i,n._path,s):zA(i,n._path);{const c=VN(o,n);return Oc(i,n,null,c)}}}}function bo(i,e){const n=Fc(e);return i.queryToTagMap.get(n)}function Fc(i){return i._path.toString()+"$"+i._queryIdentifier}function Mp(i,e){return i.tagToQueryMap.get(e)}function Lp(i){const e=i.indexOf("$");return ne(e!==-1&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new st(i.substr(0,e))}}function Pp(i,e,n){const s=i.syncPointTree_.get(e);ne(s,"Missing sync point for query tag that we're tracking");const o=qc(i.pendingWriteTree_,e);return kp(s,n,o,null)}function $A(i){return i.fold((e,n,s)=>{if(n&&cr(n))return[Yc(n)];{let o=[];return n&&(o=tE(n)),nn(s,(c,d)=>{o=o.concat(d)}),o}})}function lo(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(LA())(i._repo,i._path):i}function GA(i,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const o=Fc(s),c=i.queryToTagMap.get(o);i.queryToTagMap.delete(o),i.tagToQueryMap.delete(c)}}}function qA(){return PA++}function YA(i,e,n){const s=e._path,o=bo(i,e),c=lE(i,n),d=i.listenProvider_.startListening(lo(e),o,c.hashFn,c.onComplete),h=i.syncPointTree_.subtree(s);if(o)ne(!cr(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((g,_,b)=>{if(!He(g)&&_&&cr(_))return[Yc(_).query];{let E=[];return _&&(E=E.concat(tE(_).map(O=>O.query))),nn(b,(O,T)=>{E=E.concat(T)}),E}});for(let g=0;g<p.length;++g){const _=p[g];i.listenProvider_.stopListening(lo(_),bo(i,_))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Up(n)}node(){return this.node_}}class zp{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=wt(this.path_,e);return new zp(this.syncTree_,n)}node(){return jp(this.syncTree_,this.path_)}}const FA=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},rb=function(i,e,n){if(!i||typeof i!="object")return i;if(ne(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return WA(i[".sv"],e,n);if(typeof i[".sv"]=="object")return QA(i[".sv"],e);ne(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},WA=function(i,e,n){switch(i){case"timestamp":return n.timestamp;default:ne(!1,"Unexpected server value: "+i)}},QA=function(i,e,n){i.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const s=i.increment;typeof s!="number"&&ne(!1,"Unexpected increment value: "+s);const o=e.node();if(ne(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const d=o.getValue();return typeof d!="number"?s:d+s},KA=function(i,e,n,s){return Hp(e,new zp(n,i),s)},cE=function(i,e,n){return Hp(i,new Up(e),n)};function Hp(i,e,n){const s=i.getPriority().val(),o=rb(s,e.getImmediateChild(".priority"),n);let c;if(i.isLeafNode()){const d=i,h=rb(d.getValue(),e,n);return h!==d.getValue()||o!==d.getPriority().val()?new xt(h,It(o)):i}else{const d=i;return c=d,o!==d.getPriority().val()&&(c=c.updatePriority(new xt(o))),d.forEachChild(mt,(h,p)=>{const g=Hp(p,e.getImmediateChild(h),n);g!==p&&(c=c.updateImmediateChild(h,g))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function Vp(i,e){let n=e instanceof st?e:new st(e),s=i,o=Le(n);for(;o!==null;){const c=Us(s.node.children,o)||{children:{},childCount:0};s=new Bp(o,s,c),n=ot(n),o=Le(n)}return s}function Ks(i){return i.node.value}function uE(i,e){i.node.value=e,Mh(i)}function dE(i){return i.node.childCount>0}function XA(i){return Ks(i)===void 0&&!dE(i)}function Wc(i,e){nn(i.node.children,(n,s)=>{e(new Bp(n,i,s))})}function fE(i,e,n,s){n&&e(i),Wc(i,o=>{fE(o,e,!0)})}function ZA(i,e,n){let s=i.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function Io(i){return new st(i.parent===null?i.name:Io(i.parent)+"/"+i.name)}function Mh(i){i.parent!==null&&JA(i.parent,i.name,i)}function JA(i,e,n){const s=XA(n),o=Si(i.node.children,e);s&&o?(delete i.node.children[e],i.node.childCount--,Mh(i)):!s&&!o&&(i.node.children[e]=n.node,i.node.childCount++,Mh(i))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=/[\[\].#$\/\u0000-\u001F\u007F]/,tD=/[\[\].#$\u0000-\u001F\u007F]/,Mf=10*1024*1024,hE=function(i){return typeof i=="string"&&i.length!==0&&!eD.test(i)},pE=function(i){return typeof i=="string"&&i.length!==0&&!tD.test(i)},nD=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),pE(i)},iD=function(i,e,n,s){$p(gp(i,"value"),e,n)},$p=function(i,e,n){const s=n instanceof st?new Ex(n,i):n;if(e===void 0)throw new Error(i+"contains undefined "+Dr(s));if(typeof e=="function")throw new Error(i+"contains a function "+Dr(s)+" with contents = "+e.toString());if(d0(e))throw new Error(i+"contains "+e.toString()+" "+Dr(s));if(typeof e=="string"&&e.length>Mf/3&&Vc(e)>Mf)throw new Error(i+"contains a string greater than "+Mf+" utf8 bytes "+Dr(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,c=!1;if(nn(e,(d,h)=>{if(d===".value")o=!0;else if(d!==".priority"&&d!==".sv"&&(c=!0,!hE(d)))throw new Error(i+" contains an invalid key ("+d+") "+Dr(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Sx(s,d),$p(i,h,s),Cx(s)}),o&&c)throw new Error(i+' contains ".value" child '+Dr(s)+" in addition to actual children.")}},gE=function(i,e,n,s){if(!pE(n))throw new Error(gp(i,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},rD=function(i,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gE(i,e,n)},mE=function(i,e){if(Le(e)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},sD=function(i,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!hE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!nD(n))throw new Error(gp(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Gp(i,e){let n=null;for(let s=0;s<e.length;s++){const o=e[s],c=o.getPath();n!==null&&!Cp(c,n.path)&&(i.eventLists_.push(n),n=null),n===null&&(n={events:[],path:c}),n.events.push(o)}n&&i.eventLists_.push(n)}function vE(i,e,n){Gp(i,n),yE(i,s=>Cp(s,e))}function Qn(i,e,n){Gp(i,n),yE(i,s=>Ln(s,e)||Ln(e,s))}function yE(i,e){i.recursionDepth_++;let n=!0;for(let s=0;s<i.eventLists_.length;s++){const o=i.eventLists_[s];if(o){const c=o.path;e(c)?(oD(i.eventLists_[s]),i.eventLists_[s]=null):n=!1}}n&&(i.eventLists_=[]),i.recursionDepth_--}function oD(i){for(let e=0;e<i.events.length;e++){const n=i.events[e];if(n!==null){i.events[e]=null;const s=n.getEventRunner();ro&&Bt("event: "+n.toString()),Qs(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="repo_interrupt",cD=25;class uD{constructor(e,n,s,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new aD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yc(),this.transactionQueueTree_=new Bp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dD(i,e,n){if(i.stats_=Ep(i.repoInfo_),i.forceRestClient_||YN())i.server_=new vc(i.repoInfo_,(s,o,c,d)=>{sb(i,s,o,c,d)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>ab(i,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Tt(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}i.persistentConnection_=new vi(i.repoInfo_,e,(s,o,c,d)=>{sb(i,s,o,c,d)},s=>{ab(i,s)},s=>{hD(i,s)},i.authTokenProvider_,i.appCheckProvider_,n),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(s=>{i.server_.refreshAuthToken(s)}),i.appCheckProvider_.addTokenChangeListener(s=>{i.server_.refreshAppCheckToken(s.token)}),i.statsReporter_=XN(i.repoInfo_,()=>new Qx(i.stats_,i.server_)),i.infoData_=new Gx,i.infoSyncTree_=new ib({startListening:(s,o,c,d)=>{let h=[];const p=i.infoData_.getNode(s._path);return p.isEmpty()||(h=Ao(i.infoSyncTree_,s._path,p),setTimeout(()=>{d("ok")},0)),h},stopListening:()=>{}}),Yp(i,"connected",!1),i.serverSyncTree_=new ib({startListening:(s,o,c,d)=>(i.server_.listen(s,c,o,(h,p)=>{const g=d(h,p);Qn(i.eventQueue_,s._path,g)}),[]),stopListening:(s,o)=>{i.server_.unlisten(s,o)}})}function fD(i){const n=i.infoData_.getNode(new st(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function qp(i){return FA({timestamp:fD(i)})}function sb(i,e,n,s,o){i.dataUpdateCount++;const c=new st(e);n=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,n):n;let d=[];if(o)if(s){const p=fc(n,g=>It(g));d=BA(i.serverSyncTree_,c,p,o)}else{const p=It(n);d=sE(i.serverSyncTree_,c,p,o)}else if(s){const p=fc(n,g=>It(g));d=UA(i.serverSyncTree_,c,p)}else{const p=It(n);d=Ao(i.serverSyncTree_,c,p)}let h=c;d.length>0&&(h=Kc(i,c)),Qn(i.eventQueue_,h,d)}function ab(i,e){Yp(i,"connected",e),e===!1&&mD(i)}function hD(i,e){nn(e,(n,s)=>{Yp(i,n,s)})}function Yp(i,e,n){const s=new st("/.info/"+e),o=It(n);i.infoData_.updateSnapshot(s,o);const c=Ao(i.infoSyncTree_,s,o);Qn(i.eventQueue_,s,c)}function _E(i){return i.nextWriteId_++}function pD(i,e,n){const s=VA(i.serverSyncTree_,e);return s!=null?Promise.resolve(s):i.server_.get(e).then(o=>{const c=It(o).withIndex(e._queryParams.getIndex());jh(i.serverSyncTree_,e,n,!0);let d;if(e._queryParams.loadsAllData())d=Ao(i.serverSyncTree_,e._path,c);else{const h=bo(i.serverSyncTree_,e);d=sE(i.serverSyncTree_,e._path,c,h)}return Qn(i.eventQueue_,e._path,d),Oc(i.serverSyncTree_,e,n,null,!0),c},o=>(Qc(i,"get for query "+Tt(e)+" failed: "+o),Promise.reject(new Error(o))))}function gD(i,e,n,s,o){Qc(i,"set",{path:e.toString(),value:n,priority:s});const c=qp(i),d=It(n,s),h=jp(i.serverSyncTree_,e),p=cE(d,h,c),g=_E(i),_=rE(i.serverSyncTree_,e,p,g,!0);Gp(i.eventQueue_,_),i.server_.put(e.toString(),d.val(!0),(E,O)=>{const T=E==="ok";T||tn("set at "+e+" failed: "+E);const L=jr(i.serverSyncTree_,g,!T);Qn(i.eventQueue_,e,L),_D(i,o,E,O)});const b=wE(i,e);Kc(i,b),Qn(i.eventQueue_,b,[])}function mD(i){Qc(i,"onDisconnectEvents");const e=qp(i),n=yc();xh(i.onDisconnect_,Fe(),(o,c)=>{const d=KA(o,c,i.serverSyncTree_,e);V0(n,o,d)});let s=[];xh(n,Fe(),(o,c)=>{s=s.concat(Ao(i.serverSyncTree_,o,c));const d=wE(i,o);Kc(i,d)}),i.onDisconnect_=yc(),Qn(i.eventQueue_,Fe(),s)}function vD(i,e,n){let s;Le(e._path)===".info"?s=jh(i.infoSyncTree_,e,n):s=jh(i.serverSyncTree_,e,n),vE(i.eventQueue_,e._path,s)}function bE(i,e,n){let s;Le(e._path)===".info"?s=Oc(i.infoSyncTree_,e,n):s=Oc(i.serverSyncTree_,e,n),vE(i.eventQueue_,e._path,s)}function yD(i){i.persistentConnection_&&i.persistentConnection_.interrupt(lD)}function Qc(i,...e){let n="";i.persistentConnection_&&(n=i.persistentConnection_.id+":"),Bt(n,...e)}function _D(i,e,n,s){e&&Qs(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let c=o;s&&(c+=": "+s);const d=new Error(c);d.code=o,e(d)}})}function EE(i,e,n){return jp(i.serverSyncTree_,e,n)||Se.EMPTY_NODE}function Fp(i,e=i.transactionQueueTree_){if(e||Xc(i,e),Ks(e)){const n=CE(i,e);ne(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&bD(i,Io(e),n)}else dE(e)&&Wc(e,n=>{Fp(i,n)})}function bD(i,e,n){const s=n.map(g=>g.currentWriteId),o=EE(i,e,s);let c=o;const d=o.hash();for(let g=0;g<n.length;g++){const _=n[g];ne(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const b=Gt(e,_.path);c=c.updateChild(b,_.currentOutputSnapshotRaw)}const h=c.val(!0),p=e;i.server_.put(p.toString(),h,g=>{Qc(i,"transaction put response",{path:p.toString(),status:g});let _=[];if(g==="ok"){const b=[];for(let E=0;E<n.length;E++)n[E].status=2,_=_.concat(jr(i.serverSyncTree_,n[E].currentWriteId)),n[E].onComplete&&b.push(()=>n[E].onComplete(null,!0,n[E].currentOutputSnapshotResolved)),n[E].unwatcher();Xc(i,Vp(i.transactionQueueTree_,e)),Fp(i,i.transactionQueueTree_),Qn(i.eventQueue_,e,_);for(let E=0;E<b.length;E++)Qs(b[E])}else{if(g==="datastale")for(let b=0;b<n.length;b++)n[b].status===3?n[b].status=4:n[b].status=0;else{tn("transaction at "+p.toString()+" failed: "+g);for(let b=0;b<n.length;b++)n[b].status=4,n[b].abortReason=g}Kc(i,e)}},d)}function Kc(i,e){const n=SE(i,e),s=Io(n),o=CE(i,n);return ED(i,o,s),s}function ED(i,e,n){if(e.length===0)return;const s=[];let o=[];const d=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],g=Gt(n,p.path);let _=!1,b;if(ne(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)_=!0,b=p.abortReason,o=o.concat(jr(i.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=cD)_=!0,b="maxretry",o=o.concat(jr(i.serverSyncTree_,p.currentWriteId,!0));else{const E=EE(i,p.path,d);p.currentInputSnapshot=E;const O=e[h].update(E.val());if(O!==void 0){$p("transaction failed: Data returned ",O,p.path);let T=It(O);typeof O=="object"&&O!=null&&Si(O,".priority")||(T=T.updatePriority(E.getPriority()));const x=p.currentWriteId,P=qp(i),Y=cE(T,E,P);p.currentOutputSnapshotRaw=T,p.currentOutputSnapshotResolved=Y,p.currentWriteId=_E(i),d.splice(d.indexOf(x),1),o=o.concat(rE(i.serverSyncTree_,p.path,Y,p.currentWriteId,p.applyLocally)),o=o.concat(jr(i.serverSyncTree_,x,!0))}else _=!0,b="nodata",o=o.concat(jr(i.serverSyncTree_,p.currentWriteId,!0))}Qn(i.eventQueue_,n,o),o=[],_&&(e[h].status=2,function(E){setTimeout(E,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(b==="nodata"?s.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):s.push(()=>e[h].onComplete(new Error(b),!1,null))))}Xc(i,i.transactionQueueTree_);for(let h=0;h<s.length;h++)Qs(s[h]);Fp(i,i.transactionQueueTree_)}function SE(i,e){let n,s=i.transactionQueueTree_;for(n=Le(e);n!==null&&Ks(s)===void 0;)s=Vp(s,n),e=ot(e),n=Le(e);return s}function CE(i,e){const n=[];return TE(i,e,n),n.sort((s,o)=>s.order-o.order),n}function TE(i,e,n){const s=Ks(e);if(s)for(let o=0;o<s.length;o++)n.push(s[o]);Wc(e,o=>{TE(i,o,n)})}function Xc(i,e){const n=Ks(e);if(n){let s=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[s]=n[o],s++);n.length=s,uE(e,n.length>0?n:void 0)}Wc(e,s=>{Xc(i,s)})}function wE(i,e){const n=Io(SE(i,e)),s=Vp(i.transactionQueueTree_,e);return ZA(s,o=>{Lf(i,o)}),Lf(i,s),fE(s,o=>{Lf(i,o)}),n}function Lf(i,e){const n=Ks(e);if(n){const s=[];let o=[],c=-1;for(let d=0;d<n.length;d++)n[d].status===3||(n[d].status===1?(ne(c===d-1,"All SENT items should be at beginning of queue."),c=d,n[d].status=3,n[d].abortReason="set"):(ne(n[d].status===0,"Unexpected transaction status in abort"),n[d].unwatcher(),o=o.concat(jr(i.serverSyncTree_,n[d].currentWriteId,!0)),n[d].onComplete&&s.push(n[d].onComplete.bind(null,new Error("set"),!1,null))));c===-1?uE(e,void 0):n.length=c+1,Qn(i.eventQueue_,Io(e),o);for(let d=0;d<s.length;d++)Qs(s[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(i){let e="";const n=i.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let o=n[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function CD(i){const e={};i.charAt(0)==="?"&&(i=i.substring(1));for(const n of i.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):tn(`Invalid query segment '${n}' in query '${i}'`)}return e}const ob=function(i,e){const n=TD(i),s=n.namespace;n.domain==="firebase.com"&&_i(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&_i("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||PN();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new C0(n.host,n.secure,s,o,e,"",s!==n.subdomain),path:new st(n.pathString)}},TD=function(i){let e="",n="",s="",o="",c="",d=!0,h="https",p=443;if(typeof i=="string"){let g=i.indexOf("//");g>=0&&(h=i.substring(0,g-1),i=i.substring(g+2));let _=i.indexOf("/");_===-1&&(_=i.length);let b=i.indexOf("?");b===-1&&(b=i.length),e=i.substring(0,Math.min(_,b)),_<b&&(o=SD(i.substring(_,b)));const E=CD(i.substring(Math.min(i.length,b)));g=e.indexOf(":"),g>=0?(d=h==="https"||h==="wss",p=parseInt(e.substring(g+1),10)):g=e.length;const O=e.slice(0,g);if(O.toLowerCase()==="localhost")n="localhost";else if(O.split(".").length<=2)n=O;else{const T=e.indexOf(".");s=e.substring(0,T).toLowerCase(),n=e.substring(T+1),c=s}"ns"in E&&(c=E.ns)}return{host:e,port:p,domain:n,subdomain:s,secure:d,scheme:h,pathString:o,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n,s,o){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Tt(this.snapshot.exportVal())}}class RE{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,s,o){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=o}get key(){return He(this._path)?null:I0(this._path)}get ref(){return new Kn(this._repo,this._path)}get _queryIdentifier(){const e=Y_(this._queryParams),n=_p(e);return n==="{}"?"default":n}get _queryObject(){return Y_(this._queryParams)}isEqual(e){if(e=Nn(e),!(e instanceof Wp))return!1;const n=this._repo===e._repo,s=Cp(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&s&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+bx(this._path)}}class Kn extends Wp{constructor(e,n){super(e,n,new Rp,!1)}get parent(){const e=j0(this._path);return e===null?null:new Kn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class $s{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new st(e),s=Rc(this.ref,e);return new $s(this._node.getChild(n),s,mt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,o)=>e(new $s(o,Rc(this.ref,s),mt)))}hasChild(e){const n=new st(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ye(i,e){return i=Nn(i),i._checkNotDeleted("ref"),e!==void 0?Rc(i._root,e):i._root}function Rc(i,e){return i=Nn(i),Le(i._path)===null?rD("child","path",e):gE("child","path",e),new Kn(i._repo,wt(i._path,e))}function At(i){return mE("remove",i._path),De(i,null)}function De(i,e){i=Nn(i),mE("set",i._path),iD("set",e,i._path);const n=new Bc;return gD(i._repo,i._path,e,null,n.wrapCallback(()=>{})),n.promise}function wD(i){i=Nn(i);const e=new NE(()=>{}),n=new ko(e);return pD(i._repo,i,n).then(s=>new $s(s,new Kn(i._repo,i._path),i._queryParams.getIndex()))}class ko{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new OE("value",this,new $s(e.snapshotNode,new Kn(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new RE(this,e,n):null}matches(e){return e instanceof ko?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Qp{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new RE(this,e,n):null}createEvent(e,n){ne(e.childName!=null,"Child events should have a childName.");const s=Rc(new Kn(n._repo,n._path),e.childName),o=n._queryParams.getIndex();return new OE(e.type,this,new $s(e.snapshotNode,s,o),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Qp?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function OD(i,e,n,s,o){const c=new NE(n,void 0),d=new ko(c);return vD(i._repo,i,d),()=>bE(i._repo,i,d)}function Pf(i,e,n,s){return OD(i,"value",e)}function Uf(i,e,n){let s=null;const o=null;e==="value"?s=new ko(o):e&&(s=new Qp(e,o)),bE(i._repo,i,s)}AA(Kn);MA(Kn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="FIREBASE_DATABASE_EMULATOR_HOST",Lh={};let ND=!1;function xD(i,e,n,s){i.repoInfo_=new C0(e,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(i.authTokenProvider_=s)}function AD(i,e,n,s,o){let c=s||i.options.databaseURL;c===void 0&&(i.options.projectId||_i("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bt("Using default host for project ",i.options.projectId),c=`${i.options.projectId}-default-rtdb.firebaseio.com`);let d=ob(c,o),h=d.repoInfo,p;typeof process<"u"&&N_&&(p=N_[RD]),p?(c=`http://${p}?ns=${h.namespace}`,d=ob(c,o),h=d.repoInfo):d.repoInfo.secure;const g=new WN(i.name,i.options,e);sD("Invalid Firebase Database URL",d),He(d.path)||_i("Database URL must point to the root of a Firebase Database (not including a child path).");const _=ID(h,i,g,new FN(i,n));return new kD(_,i)}function DD(i,e){const n=Lh[e];(!n||n[i.key]!==i)&&_i(`Database ${e}(${i.repoInfo_}) has already been deleted.`),yD(i),delete n[i.key]}function ID(i,e,n,s){let o=Lh[e.name];o||(o={},Lh[e.name]=o);let c=o[i.toURLString()];return c&&_i("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new uD(i,ND,n,s),o[i.toURLString()]=c,c}class kD{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Kn(this._repo,Fe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(DD(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&_i("Cannot call "+e+" on a deleted database.")}}function jD(i=s0(),e){const n=yp(i,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=sR("database");s&&MD(n,...s)}return n}function MD(i,e,n,s={}){i=Nn(i),i._checkNotDeleted("useEmulator");const o=`${e}:${n}`,c=i._repoInternal;if(i._instanceStarted){if(o===i._repoInternal.repoInfo_.host&&Pr(s,c.repoInfo_.emulatorOptions))return;_i("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(c.repoInfo_.nodeAdmin)s.mockUserToken&&_i('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new ic(ic.OWNER);else if(s.mockUserToken){const h=typeof s.mockUserToken=="string"?s.mockUserToken:aR(s.mockUserToken,i.app.options.projectId);d=new ic(h)}xD(c,o,s,d)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(i){DN(Fs),zs(new Ur("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return AD(s,o,c,n)},"PUBLIC").setMultipleInstances(!0)),nr(x_,A_,i),nr(x_,A_,"esm2017")}vi.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)};vi.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)};LD();var PD="firebase",UD="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(PD,UD,"app");function Kp(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function xE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zD=xE,AE=new Oo("auth","Firebase",xE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new mp("@firebase/auth");function HD(i,...e){Nc.logLevel<=nt.WARN&&Nc.warn(`Auth (${Fs}): ${i}`,...e)}function rc(i,...e){Nc.logLevel<=nt.ERROR&&Nc.error(`Auth (${Fs}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(i,...e){throw Xp(i,...e)}function Fn(i,...e){return Xp(i,...e)}function DE(i,e,n){const s=Object.assign(Object.assign({},zD()),{[e]:n});return new Oo("auth","Firebase",s).create(e,{appName:i.name})}function sr(i){return DE(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xp(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return AE.create(i,...e)}function Oe(i,e,...n){if(!i)throw Xp(e,...n)}function pi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw rc(e),new Error(e)}function Ei(i,e){i||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function BD(){return lb()==="http:"||lb()==="https:"}function lb(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BD()||lR()||"connection"in navigator)?navigator.onLine:!0}function $D(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ei(n>e,"Short delay should be less than long delay!"),this.isMobile=pp()||e0()}get(){return VD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(i,e){Ei(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YD=new jo(3e4,6e4);function Zc(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Xs(i,e,n,s,o={}){return kE(i,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const h=Ys(Object.assign({key:i.config.apiKey},d)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},c);return oR()||(g.referrerPolicy="no-referrer"),IE.fetch()(await ME(i,i.config.apiHost,n,h),g)})}async function kE(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},GD),e);try{const o=new FD(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw ec(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const h=c.ok?d.errorMessage:d.error.message,[p,g]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ec(i,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw ec(i,"email-already-in-use",d);if(p==="USER_DISABLED")throw ec(i,"user-disabled",d);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw DE(i,_,g);bi(i,_)}}catch(o){if(o instanceof dr)throw o;bi(i,"network-request-failed",{message:String(o)})}}async function jE(i,e,n,s,o={}){const c=await Xs(i,e,n,s,o);return"mfaPendingCredential"in c&&bi(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function ME(i,e,n,s){const o=`${e}${n}?${s}`,c=i,d=c.config.emulator?Zp(i.config,o):`${i.config.apiScheme}://${o}`;return qD.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class FD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Fn(this.auth,"network-request-failed")),YD.get())})}}function ec(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Fn(i,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(i,e){return Xs(i,"POST","/v1/accounts:delete",e)}async function xc(i,e){return Xs(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QD(i,e=!1){const n=Nn(i),s=await n.getIdToken(e),o=Jp(s);Oe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:s,authTime:co(zf(o.auth_time)),issuedAtTime:co(zf(o.iat)),expirationTime:co(zf(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function zf(i){return Number(i)*1e3}function Jp(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return rc("JWT malformed, contained fewer than 3 sections"),null;try{const o=dc(n);return o?JSON.parse(o):(rc("Failed to decode base64 JWT payload"),null)}catch(o){return rc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function cb(i){const e=Jp(i);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof dr&&KD(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function KD({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=co(this.lastLoginAt),this.creationTime=co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(i){var e;const n=i.auth,s=await i.getIdToken(),o=await Eo(i,xc(n,{idToken:s}));Oe(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];i._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?LE(c.providerUserInfo):[],h=JD(i.providerData,d),p=i.isAnonymous,g=!(i.email&&c.passwordHash)&&!(h!=null&&h.length),_=p?g:!1,b={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:h,metadata:new Uh(c.createdAt,c.lastLoginAt),isAnonymous:_};Object.assign(i,b)}async function ZD(i){const e=Nn(i);await Ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JD(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function LE(i){return i.map(e=>{var{providerId:n}=e,s=Kp(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(i,e){const n=await kE(i,{},async()=>{const s=Ys({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,d=await ME(i,o,"/v1/token",`key=${c}`),h=await i._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",IE.fetch()(d,{method:"POST",headers:h,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tI(i,e){return Xs(i,"POST","/v2/accounts:revokeToken",Zc(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=cb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await eI(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new js;return s&&(Oe(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Oe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Oe(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new js,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(i,e){Oe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Un{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,c=Kp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Uh(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await Eo(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QD(this,e)}reload(){return ZD(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Un(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ac(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(sr(this.auth));const e=await this.getIdToken();return await Eo(this,WD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,c,d,h,p,g,_;const b=(s=n.displayName)!==null&&s!==void 0?s:void 0,E=(o=n.email)!==null&&o!==void 0?o:void 0,O=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,T=(d=n.photoURL)!==null&&d!==void 0?d:void 0,L=(h=n.tenantId)!==null&&h!==void 0?h:void 0,x=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,P=(g=n.createdAt)!==null&&g!==void 0?g:void 0,Y=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:J,emailVerified:te,isAnonymous:W,providerData:re,stsTokenManager:de}=n;Oe(J&&de,e,"internal-error");const se=js.fromJSON(this.name,de);Oe(typeof J=="string",e,"internal-error"),Wi(b,e.name),Wi(E,e.name),Oe(typeof te=="boolean",e,"internal-error"),Oe(typeof W=="boolean",e,"internal-error"),Wi(O,e.name),Wi(T,e.name),Wi(L,e.name),Wi(x,e.name),Wi(P,e.name),Wi(Y,e.name);const fe=new Un({uid:J,auth:e,email:E,emailVerified:te,displayName:b,isAnonymous:W,photoURL:T,phoneNumber:O,tenantId:L,stsTokenManager:se,createdAt:P,lastLoginAt:Y});return re&&Array.isArray(re)&&(fe.providerData=re.map(Re=>Object.assign({},Re))),x&&(fe._redirectEventId=x),fe}static async _fromIdTokenResponse(e,n,s=!1){const o=new js;o.updateFromServerResponse(n);const c=new Un({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ac(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Oe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?LE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),h=new js;h.updateFromIdToken(s);const p=new Un({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Uh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new Map;function gi(i){Ei(i instanceof Function,"Expected a class definition");let e=ub.get(i);return e?(Ei(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,ub.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}PE.type="NONE";const db=PE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(i,e,n){return`firebase:${i}:${e}:${n}`}class Ms{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=sc(this.userKey,o.apiKey,c),this.fullPersistenceKey=sc("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await xc(this.auth,{idToken:e}).catch(()=>{});return n?Un._fromGetAccountInfoResponse(this.auth,n,e):null}return Un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ms(gi(db),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=o[0]||gi(db);const d=sc(s,e.config.apiKey,e.name);let h=null;for(const g of n)try{const _=await g._get(d);if(_){let b;if(typeof _=="string"){const E=await xc(e,{idToken:_}).catch(()=>{});if(!E)break;b=await Un._fromGetAccountInfoResponse(e,E,_)}else b=Un._fromJSON(e,_);g!==c&&(h=b),c=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Ms(c,e,s):(c=p[0],h&&await c._set(d,h.toJSON()),await Promise.all(n.map(async g=>{if(g!==c)try{await g._remove(d)}catch{}})),new Ms(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($E(e))return"Blackberry";if(GE(e))return"Webos";if(zE(e))return"Safari";if((e.includes("chrome/")||HE(e))&&!e.includes("edge/"))return"Chrome";if(VE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function UE(i=qt()){return/firefox\//i.test(i)}function zE(i=qt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HE(i=qt()){return/crios\//i.test(i)}function BE(i=qt()){return/iemobile/i.test(i)}function VE(i=qt()){return/android/i.test(i)}function $E(i=qt()){return/blackberry/i.test(i)}function GE(i=qt()){return/webos/i.test(i)}function eg(i=qt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function nI(i=qt()){var e;return eg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iI(){return cR()&&document.documentMode===10}function qE(i=qt()){return eg(i)||VE(i)||GE(i)||$E(i)||/windows phone/i.test(i)||BE(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(i,e=[]){let n;switch(i){case"Browser":n=fb(qt());break;case"Worker":n=`${fb(qt())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fs}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,h)=>{try{const p=e(c);d(p)}catch(p){h(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(i,e={}){return Xs(i,"GET","/v2/passwordPolicy",Zc(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=6;class oI{constructor(e){var n,s,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:aI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,c,d,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(c=p.containsUppercaseLetter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hb(this),this.idTokenSubscription=new hb(this),this.beforeStateQueue=new rI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gi(n)),this._initializationPromise=this.queue(async()=>{var s,o,c;if(!this._deleted&&(this.persistenceManager=await Ms.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xc(this,{idToken:e}),s=await Un._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(h,h))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===h)&&(p!=null&&p.user)&&(o=p.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ac(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$D()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(sr(this));const n=e?Nn(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(sr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(sr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sI(this),n=new oI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Oo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await tI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gi(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await Ms.create(this,[gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(h,this,"internal-error"),h.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&HD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Jc(i){return Nn(i)}class hb{constructor(e){this.auth=e,this.observer=null,this.addObserver=_R(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cI(i){tg=i}function uI(i){return tg.loadJS(i)}function dI(){return tg.gapiScript}function fI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(i,e){const n=yp(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Pr(c,e??{}))return o;bi(o,"already-initialized")}return n.initialize({options:e})}function pI(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(gi);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function gI(i,e,n){const s=Jc(i);Oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=FE(e),{host:d,port:h}=mI(e),p=h===null?"":`:${h}`,g={url:`${c}//${d}${p}/`},_=Object.freeze({host:d,port:h,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Oe(Pr(g,s.config.emulator)&&Pr(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,vI()}function FE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function mI(i){const e=FE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:pb(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:pb(d)}}}function pb(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function vI(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,n){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(i,e){return jE(i,"POST","/v1/accounts:signInWithIdp",Zc(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="http://localhost";class Vr extends WE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Vr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,c=Kp(n,["providerId","signInMethod"]);if(!s||!o)return null;const d=new Vr(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Ls(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ls(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ls(e,n)}buildRequest(){const e={requestUri:yI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ys(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends QE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Mo{constructor(){super("facebook.com")}static credential(e){return Vr._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Mo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Vr._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Xi.credential(n,s)}catch{return null}}}Xi.GOOGLE_SIGN_IN_METHOD="google.com";Xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Mo{constructor(){super("github.com")}static credential(e){return Vr._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.GITHUB_SIGN_IN_METHOD="github.com";Zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Mo{constructor(){super("twitter.com")}static credential(e,n){return Vr._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ji.credential(n,s)}catch{return null}}}Ji.TWITTER_SIGN_IN_METHOD="twitter.com";Ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _I(i,e){return jE(i,"POST","/v1/accounts:signUp",Zc(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await Un._fromIdTokenResponse(e,s,o),d=gb(s);return new ur({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=gb(s);return new ur({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function gb(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(i){var e;if(kn(i.app))return Promise.reject(sr(i));const n=Jc(i);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ur({user:n.currentUser,providerId:null,operationType:"signIn"});const s=await _I(n,{returnSecureToken:!0}),o=await ur._fromIdTokenResponse(n,"signIn",s,!0);return await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends dr{constructor(e,n,s,o){var c;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Dc.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Dc(e,n,s,o)}}function KE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Dc._fromErrorAndOperation(i,c,e,s):c})}async function EI(i,e,n=!1){const s=await Eo(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return ur._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(i,e,n=!1){const{auth:s}=i;if(kn(s.app))return Promise.reject(sr(s));const o="reauthenticate";try{const c=await Eo(i,KE(s,o,e,i),n);Oe(c.idToken,s,"internal-error");const d=Jp(c.idToken);Oe(d,s,"internal-error");const{sub:h}=d;return Oe(i.uid===h,s,"user-mismatch"),ur._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&bi(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(i,e,n=!1){if(kn(i.app))return Promise.reject(sr(i));const s="signIn",o=await KE(i,s,e),c=await ur._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(c.user),c}function TI(i,e,n,s){return Nn(i).onIdTokenChanged(e,n,s)}function wI(i,e,n){return Nn(i).beforeAuthStateChanged(e,n)}const Ic="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ic,"1"),this.storage.removeItem(Ic),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=1e3,RI=10;class ZE extends XE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,h,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);iI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,RI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},OI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZE.type="LOCAL";const NI=ZE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE extends XE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}JE.type="SESSION";const eS=JE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new eu(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const h=Array.from(d).map(async g=>g(n.origin,c)),p=await xI(h);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}eu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((h,p)=>{const g=ng("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(b){const E=b;if(E.data.eventId===g)switch(E.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),h(E.data.response);break;default:clearTimeout(_),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return window}function DI(i){Wn().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}async function II(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kI(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function jI(){return tS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="firebaseLocalStorageDb",MI=1,kc="firebaseLocalStorage",iS="fbase_key";class Lo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function tu(i,e){return i.transaction([kc],e?"readwrite":"readonly").objectStore(kc)}function LI(){const i=indexedDB.deleteDatabase(nS);return new Lo(i).toPromise()}function zh(){const i=indexedDB.open(nS,MI);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(kc,{keyPath:iS})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(kc)?e(s):(s.close(),await LI(),e(await zh()))})})}async function mb(i,e,n){const s=tu(i,!0).put({[iS]:e,value:n});return new Lo(s).toPromise()}async function PI(i,e){const n=tu(i,!1).get(e),s=await new Lo(n).toPromise();return s===void 0?null:s.value}function vb(i,e){const n=tu(i,!0).delete(e);return new Lo(n).toPromise()}const UI=800,zI=3;class rS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>zI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eu._getInstance(jI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await II(),!this.activeServiceWorker)return;this.sender=new AI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zh();return await mb(e,Ic,"1"),await vb(e,Ic),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>mb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>PI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=tu(o,!1).getAll();return new Lo(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rS.type="LOCAL";const HI=rS;new jo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(i,e){return e?gi(e):(Oe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends WE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ls(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ls(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ls(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VI(i){return CI(i.auth,new ig(i),i.bypassAuthState)}function $I(i){const{auth:e,user:n}=i;return Oe(n,e,"internal-error"),SI(n,new ig(i),i.bypassAuthState)}async function GI(i){const{auth:e,user:n}=i;return Oe(n,e,"internal-error"),EI(n,new ig(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:h}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VI;case"linkViaPopup":case"linkViaRedirect":return GI;case"reauthViaPopup":case"reauthViaRedirect":return $I;default:bi(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=new jo(2e3,1e4);class Ds extends sS{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qI.get())};e()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="pendingRedirect",ac=new Map;class FI extends sS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ac.get(this.auth._key());if(!e){try{const s=await WI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ac.set(this.auth._key(),e)}return this.bypassAuthState||ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WI(i,e){const n=XI(e),s=KI(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function QI(i,e){ac.set(i._key(),e)}function KI(i){return gi(i._redirectPersistence)}function XI(i){return sc(YI,i.config.apiKey,i.name)}async function ZI(i,e,n=!1){if(kn(i.app))return Promise.reject(sr(i));const s=Jc(i),o=BI(s,e),d=await new FI(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=10*60*1e3;class e2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!t2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!aS(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Fn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JI&&this.cachedEventUids.clear(),this.cachedEventUids.has(yb(e))}saveEventToCache(e){this.cachedEventUids.add(yb(e)),this.lastProcessedEventTime=Date.now()}}function yb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function aS({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function t2(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aS(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(i,e={}){return Xs(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r2=/^https?/;async function s2(i){if(i.config.emulator)return;const{authorizedDomains:e}=await n2(i);for(const n of e)try{if(a2(n))return}catch{}bi(i,"unauthorized-domain")}function a2(i){const e=Ph(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!r2.test(n))return!1;if(i2.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=new jo(3e4,6e4);function _b(){const i=Wn().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function l2(i){return new Promise((e,n)=>{var s,o,c;function d(){_b(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_b(),n(Fn(i,"network-request-failed"))},timeout:o2.get()})}if(!((o=(s=Wn().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Wn().gapi)===null||c===void 0)&&c.load)d();else{const h=fI("iframefcb");return Wn()[h]=()=>{gapi.load?d():n(Fn(i,"network-request-failed"))},uI(`${dI()}?onload=${h}`).catch(p=>n(p))}}).catch(e=>{throw oc=null,e})}let oc=null;function c2(i){return oc=oc||l2(i),oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new jo(5e3,15e3),d2="__/auth/iframe",f2="emulator/auth/iframe",h2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g2(i){const e=i.config;Oe(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Zp(e,f2):`https://${i.config.authDomain}/${d2}`,s={apiKey:e.apiKey,appName:i.name,v:Fs},o=p2.get(i.config.apiHost);o&&(s.eid=o);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Ys(s).slice(1)}`}async function m2(i){const e=await c2(i),n=Wn().gapi;return Oe(n,i,"internal-error"),e.open({where:document.body,url:g2(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h2,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=Fn(i,"network-request-failed"),h=Wn().setTimeout(()=>{c(d)},u2.get());function p(){Wn().clearTimeout(h),o(s)}s.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y2=500,_2=600,b2="_blank",E2="http://localhost";class bb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function S2(i,e,n,s=y2,o=_2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const p=Object.assign(Object.assign({},v2),{width:s.toString(),height:o.toString(),top:c,left:d}),g=qt().toLowerCase();n&&(h=HE(g)?b2:n),UE(g)&&(e=e||E2,p.scrollbars="yes");const _=Object.entries(p).reduce((E,[O,T])=>`${E}${O}=${T},`,"");if(nI(g)&&h!=="_self")return C2(e||"",h),new bb(null);const b=window.open(e||"",h,_);Oe(b,i,"popup-blocked");try{b.focus()}catch{}return new bb(b)}function C2(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="__/auth/handler",w2="emulator/auth/handler",O2=encodeURIComponent("fac");async function Eb(i,e,n,s,o,c){Oe(i.config.authDomain,i,"auth-domain-config-required"),Oe(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Fs,eventId:o};if(e instanceof QE){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",bh(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))d[_]=b}if(e instanceof Mo){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(d.scopes=_.join(","))}i.tenantId&&(d.tid=i.tenantId);const h=d;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const p=await i._getAppCheckToken(),g=p?`#${O2}=${encodeURIComponent(p)}`:"";return`${R2(i)}?${Ys(h).slice(1)}${g}`}function R2({config:i}){return i.emulator?Zp(i,w2):`https://${i.authDomain}/${T2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="webStorageSupport";class N2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eS,this._completeRedirectFn=ZI,this._overrideRedirectResult=QI}async _openPopup(e,n,s,o){var c;Ei((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await Eb(e,n,s,Ph(),o);return S2(e,d,ng())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await Eb(e,n,s,Ph(),o);return DI(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Ei(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await m2(e),s=new e2(e);return n.register("authEvent",o=>(Oe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hf,{type:Hf},o=>{var c;const d=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[Hf];d!==void 0&&n(!!d),bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=s2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qE()||zE()||eg()}}const x2=N2;var Sb="@firebase/auth",Cb="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function I2(i){zs(new Ur("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:h}=s.options;Oe(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:h,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YE(i)},g=new lI(s,o,c,p);return pI(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),zs(new Ur("auth-internal",e=>{const n=Jc(e.getProvider("auth").getImmediate());return(s=>new A2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(Sb,Cb,D2(i)),nr(Sb,Cb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=5*60,j2=Jb("authIdTokenMaxAge")||k2;let Tb=null;const M2=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>j2)return;const o=n==null?void 0:n.token;Tb!==o&&(Tb=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function L2(i=s0()){const e=yp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=hI(i,{popupRedirectResolver:x2,persistence:[HI,NI,eS]}),s=Jb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=M2(c.toString());wI(n,d,()=>d(n.currentUser)),TI(n,h=>d(h))}}const o=Xb("auth");return o&&gI(n,`http://${o}`),n}function P2(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}cI({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const c=Fn("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",P2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});I2("Browser");const U2={apiKey:"AIzaSyBIAM_tIBqFUYQl5r-f7e78lNPzc0fIDcM",authDomain:"big-orca.firebaseapp.com",projectId:"big-orca",storageBucket:"big-orca.firebasestorage.app",messagingSenderId:"338206440353",appId:"1:338206440353:web:a6af4374836968379d29e0",databaseURL:"https://big-orca-default-rtdb.firebaseio.com"},oS=r0(U2),_e=jD(oS),wb=L2(oS);function Ps(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function z2(){const i=[],e=o=>![[127462,127487],[127995,127999],[129456,129459]].some(([d,h])=>o>=d&&o<=h);for(let o=128512;o<=128591;o++)e(o)&&i.push(String.fromCodePoint(o));for(let o=127744;o<=128511;o++)e(o)&&i.push(String.fromCodePoint(o));for(let o=128640;o<=128767;o++)e(o)&&i.push(String.fromCodePoint(o));for(let o=129280;o<=129519;o++)e(o)&&i.push(String.fromCodePoint(o));return[9728,9729,9730,9731,9732,9733,9748,9749,9752,9757,9760,9762,9763,9766,9770,9774,9775,9784,9785,9786,9792,9794,9800,9801,9802,9803,9804,9805,9806,9807,9808,9809,9810,9811,9824,9827,9829,9830,9832,9851,9854,9855,9874,9875,9876,9877,9878,9879,9881,9883,9884,9888,9889,9898,9899,9904,9905,9917,9918,9924,9925,9928,9934,9935,9937,9939,9940,9961,9962,9968,9969,9970,9971,9972,9973,9975,9976,9977,9978,9981].forEach(o=>{i.push(String.fromCodePoint(o))}),["❤️","💔","💯","💪","🙏","👍","👎","👏","🙌","🤝","👀","🧠","💡","⚡","✨","⭐","🏆","🎉","🚀","🌈","✅","❌","❗","❓","⚠️","🔥","💰","💎","🎯","🎪"].forEach(o=>{i.includes(o)||i.push(o)}),i}const Ob=z2();function H2(i){const n={"😀":["grinning","face","smile","happy","joy"],"😃":["grinning","face","big","smile","happy","joy"],"😄":["grinning","face","smile","happy","joy","laugh"],"😁":["beaming","face","smile","happy","joy","laugh"],"😆":["grinning","squinting","face","smile","happy","joy","laugh"],"😅":["grinning","face","sweat","smile","happy","relief"],"🤣":["rolling","floor","laughing","face","happy","joy","funny"],"😂":["face","tears","joy","laugh","happy","cry"],"🙂":["slightly","smiling","face","smile","happy"],"🙃":["upside","down","face","smile","silly"],"😉":["winking","face","smile","flirt"],"😊":["smiling","face","eyes","smile","happy","blush"],"😇":["smiling","face","halo","angel","innocent"],"🥰":["smiling","face","hearts","love","adore"],"😍":["smiling","face","heart","eyes","love","crush"],"🤩":["star","struck","face","eyes","amazing"],"😘":["face","blowing","kiss","love"],"😗":["kissing","face","love"],"😚":["kissing","face","closed","eyes","love"],"😙":["kissing","face","smiling","eyes","love"],"😋":["face","savoring","food","yum","delicious"],"😛":["face","tongue","silly"],"😜":["winking","face","tongue","silly"],"🤪":["zany","face","silly","crazy"],"😝":["squinting","face","tongue","silly"],"🤑":["money","mouth","face","rich","dollar"],"🤗":["hugging","face","hug","love"],"🤭":["face","hand","mouth","quiet","secret"],"🤫":["shushing","face","quiet","secret"],"🤔":["thinking","face","hmm","consider"],"🤐":["zipper","mouth","face","quiet","secret"],"🤨":["face","raised","eyebrow","skeptical"],"😐":["neutral","face","expressionless"],"😑":["expressionless","face","blank"],"😶":["face","without","mouth","quiet"],"😏":["smirking","face","smug"],"😒":["unamused","face","unhappy"],"🙄":["face","rolling","eyes","annoyed"],"😬":["grimacing","face","awkward"],"🤥":["lying","face","pinocchio"],"😔":["pensive","face","sad","sorry"],"😕":["confused","face","worried"],"🙁":["slightly","frowning","face","sad"],"☹️":["frowning","face","sad"],"😣":["persevering","face","struggle"],"😖":["confounded","face","frustrated"],"😫":["tired","face","exhausted"],"😩":["weary","face","tired"],"🥺":["pleading","face","puppy","eyes"],"😢":["crying","face","tear","sad"],"😭":["loudly","crying","face","sad","sob"],"😤":["face","steam","nose","angry"],"😠":["angry","face","mad"],"😡":["pouting","face","angry","mad"],"🤬":["face","symbols","mouth","swearing"],"🤯":["exploding","head","mind","blown"],"😳":["flushed","face","embarrassed"],"🥵":["hot","face","heat","sweat"],"🥶":["cold","face","freezing"],"😱":["face","screaming","fear","shocked"],"😨":["fearful","face","scared"],"😰":["anxious","face","sweat","worried"],"😥":["sad","relieved","face"],"😓":["downcast","face","sweat","sad"],"😴":["sleeping","face","sleep","tired"],"😪":["sleepy","face","tired"],"😵":["dizzy","face","confused"],"🥴":["woozy","face","dizzy"],"🤢":["nauseated","face","sick"],"🤮":["face","vomiting","sick"],"🤧":["sneezing","face","sick"],"😷":["face","medical","mask","sick"],"🤒":["face","thermometer","sick"],"🤕":["face","head","bandage","hurt"],"❤️":["red","heart","love"],"🧡":["orange","heart","love"],"💛":["yellow","heart","love"],"💚":["green","heart","love"],"💙":["blue","heart","love"],"💜":["purple","heart","love"],"🖤":["black","heart","love"],"🤍":["white","heart","love"],"🤎":["brown","heart","love"],"💔":["broken","heart","sad","breakup"],"❣️":["heavy","heart","exclamation","love"],"💕":["two","hearts","love"],"💞":["revolving","hearts","love"],"💓":["beating","heart","love"],"💗":["growing","heart","love"],"💖":["sparkling","heart","love"],"💘":["heart","arrow","love","cupid"],"💝":["heart","ribbon","gift","love"],"💟":["heart","decoration","love"],"👍":["thumbs","up","good","yes","like"],"👎":["thumbs","down","bad","no","dislike"],"👌":["ok","hand","good","perfect"],"✌️":["victory","hand","peace"],"🤞":["crossed","fingers","luck","hope"],"🤟":["love","you","gesture"],"🤘":["sign","horns","rock"],"🤙":["call","me","hand"],"👈":["backhand","index","pointing","left"],"👉":["backhand","index","pointing","right"],"👆":["backhand","index","pointing","up"],"👇":["backhand","index","pointing","down"],"☝️":["index","pointing","up"],"✋":["raised","hand","stop"],"🤚":["raised","back","hand"],"🖐️":["hand","fingers","splayed"],"🖖":["vulcan","salute","spock"],"👋":["waving","hand","hello","goodbye"],"🤝":["handshake","deal","agreement"],"👏":["clapping","hands","applause","good"],"🙌":["raising","hands","celebration","praise"],"👐":["open","hands","hug"],"🤲":["palms","up","together"],"🙏":["folded","hands","prayer","please","thanks"],"🔥":["fire","hot","burn","lit"],"💯":["hundred","points","perfect","score"],"💪":["flexed","biceps","strong","muscle"],"👀":["eyes","looking","watching"],"🧠":["brain","smart","think"],"💡":["light","bulb","idea","bright"],"⚡":["lightning","bolt","fast","power"],"✨":["sparkles","stars","magic","clean"],"⭐":["star","favorite","good"],"🏆":["trophy","award","winner","champion"],"🎉":["party","popper","celebration","confetti"],"🚀":["rocket","space","fast","launch"],"🌈":["rainbow","colorful","weather"],"✅":["check","mark","button","done","complete"],"❌":["cross","mark","x","wrong","no"],"❗":["exclamation","mark","warning","important"],"❓":["question","mark","confused","what"],"⚠️":["warning","sign","caution","alert"],"💰":["money","bag","dollar","rich"],"💎":["gem","stone","diamond","precious"],"🎯":["target","goal","aim","bullseye"],"🎪":["circus","tent","entertainment"],"🐶":["dog","face","pet","puppy"],"🐱":["cat","face","pet","kitten"],"🐭":["mouse","face","rodent"],"🐹":["hamster","face","pet"],"🐰":["rabbit","face","bunny"],"🦊":["fox","face"],"🐻":["bear","face"],"🐼":["panda","face"],"🐨":["koala","face"],"🐯":["tiger","face"],"🦁":["lion","face"],"🐸":["frog","face"],"🐵":["monkey","face"],"🍎":["apple","fruit","red"],"🍌":["banana","fruit","yellow"],"🍇":["grapes","fruit","purple"],"🍓":["strawberry","fruit","red"],"🍊":["orange","fruit"],"🍕":["pizza","food","slice"],"🍔":["hamburger","burger","food"],"🍟":["french","fries","food"],"🌭":["hot","dog","food"],"🍗":["poultry","leg","chicken","food"],"🍖":["meat","bone","food"],"🍳":["cooking","egg","food"],"🍞":["bread","food"],"🧀":["cheese","wedge","food"],"🥗":["green","salad","food"],"🍝":["spaghetti","pasta","food"],"🍜":["steaming","bowl","food","soup"],"🍲":["pot","food","stew"],"🍰":["shortcake","cake","dessert"],"🎂":["birthday","cake","celebration"],"🍮":["custard","dessert"],"🍭":["lollipop","candy","sweet"],"🍬":["candy","sweet"],"🍫":["chocolate","bar","sweet"],"☕":["coffee","drink","hot"],"🍵":["tea","drink","hot"],"🥤":["cup","straw","drink"],"🍺":["beer","mug","drink","alcohol"],"🍻":["clinking","beer","mugs","cheers"],"🍷":["wine","glass","drink","alcohol"],"☀️":["sun","sunny","weather","bright"],"🌤️":["sun","behind","small","cloud","weather"],"⛅":["sun","behind","cloud","weather"],"☁️":["cloud","weather"],"🌧️":["cloud","rain","weather"],"⛈️":["cloud","lightning","rain","weather"],"🌩️":["cloud","lightning","weather"],"❄️":["snowflake","snow","cold","winter"],"☃️":["snowman","snow","winter"],"⛄":["snowman","without","snow"],"🌊":["water","wave","ocean","sea"],"💧":["droplet","water","sweat"],"🌸":["cherry","blossom","flower","spring"],"🌺":["hibiscus","flower"],"🌻":["sunflower","flower","yellow"],"🌹":["rose","flower","red"],"🌷":["tulip","flower"],"🌿":["herb","leaf","green"],"🍀":["four","leaf","clover","luck"],"🌳":["deciduous","tree","nature"],"🌲":["evergreen","tree","nature"],"🌵":["cactus","desert","plant"],"🚗":["automobile","car","vehicle"],"🚙":["sport","utility","vehicle","suv"],"🚌":["bus","vehicle"],"🚎":["trolleybus","vehicle"],"🏎️":["racing","car","vehicle","fast"],"🚓":["police","car","vehicle"],"🚑":["ambulance","vehicle","emergency"],"🚒":["fire","engine","vehicle"],"🚐":["minibus","vehicle"],"🚚":["delivery","truck","vehicle"],"🚛":["articulated","lorry","truck"],"🚜":["tractor","vehicle","farm"],"🏍️":["motorcycle","vehicle"],"🛵":["motor","scooter","vehicle"],"🚲":["bicycle","bike","vehicle"],"🛴":["kick","scooter","vehicle"],"✈️":["airplane","plane","travel"],"🚁":["helicopter","vehicle"],"🚂":["locomotive","train","vehicle"],"🚃":["railway","car","train"],"🚄":["high","speed","train"],"🚅":["bullet","train","fast"],"🚆":["train","vehicle"],"🚇":["metro","subway","train"],"🚈":["light","rail","train"],"🚉":["station","train"],"🚊":["tram","vehicle"],"🚝":["monorail","vehicle"],"🚞":["mountain","railway","train"],"🚟":["suspension","railway"],"🚠":["mountain","cableway"],"🚡":["aerial","tramway"],"🛳️":["passenger","ship","boat"],"⛵":["sailboat","boat","sail"],"🚤":["speedboat","boat","fast"],"🛥️":["motor","boat"],"🚢":["ship","boat","large"],"⚽":["soccer","ball","football","sport"],"🏀":["basketball","ball","sport"],"🏈":["american","football","ball","sport"],"⚾":["baseball","ball","sport"],"🥎":["softball","ball","sport"],"🎾":["tennis","ball","sport"],"🏐":["volleyball","ball","sport"],"🏉":["rugby","football","ball","sport"],"🥏":["flying","disc","frisbee","sport"],"🎱":["pool","8","ball","billiards"],"🏓":["ping","pong","table","tennis"],"🏸":["badminton","sport"],"🥅":["goal","net","sport"],"⛳":["flag","hole","golf"],"🏌️":["golfer","golf","sport"],"🏄":["surfer","surfing","sport"],"🏊":["swimmer","swimming","sport"],"🤽":["water","polo","sport"],"🚣":["rowing","boat","sport"],"🧗":["climbing","sport"],"🚴":["biking","cycling","sport"],"🚵":["mountain","biking","sport"],"🤸":["cartwheeling","gymnastics","sport"],"🤼":["wrestling","sport"],"🤾":["handball","sport"],"🏇":["horse","racing","sport"],"⛷️":["skier","skiing","sport"],"🏂":["snowboarder","snowboarding","sport"],"🏋️":["weight","lifter","gym","sport"],"🤺":["fencing","sport"],"🥊":["boxing","glove","sport"],"🥋":["martial","arts","uniform","sport"],"🎮":["video","game","controller","gaming"],"🎲":["game","die","dice"],"🎸":["guitar","music","instrument"],"🎹":["musical","keyboard","piano"],"🥁":["drum","music","instrument"],"🎤":["microphone","sing","music"],"🎧":["headphone","music","listen"],"🎵":["musical","note","music"],"🎶":["musical","notes","music"],"🎼":["musical","score","music"]}[i]||[];n.push(i);try{const s=i.codePointAt(0);s&&(s>=128512&&s<=128591?n.push("face","emotion","smiley"):s>=127744&&s<=128511?n.push("symbol","misc","object"):s>=128640&&s<=128767?n.push("transport","vehicle","map"):s>=129280&&s<=129535&&n.push("supplemental","modern"))}catch{}return n}function tc(i){if(typeof i!="string")return;const e=i.trim().toLowerCase();if(["true","1","yes","on"].includes(e))return!0;if(["false","0","no","off"].includes(e))return!1}function Rb(i){try{const e=typeof i=="string"?i:"",n=new URLSearchParams(e.startsWith("?")?e:`?${e}`),s={},o=tc(n.get("voting"));o!==void 0&&(s.votingEnabled=o);const c=tc(n.get("downvotes"));c!==void 0&&(s.downvotingEnabled=c);const d=tc(n.get("multivote"));d!==void 0&&(s.multipleVotesAllowed=d);const h=n.get("votes");if(h!=null&&h!==""){const E=parseInt(h,10);!Number.isNaN(E)&&E>0&&E<1e3&&(s.votesPerUser=E)}const p=tc(n.get("retro"));p!==void 0&&(s.retrospectiveMode=p);const g=n.get("sort");if(typeof g=="string"){const E=g.trim().toLowerCase();E==="votes"&&(s.sortByVotes=!0),(E==="chrono"||E==="chronological"||E==="time")&&(s.sortByVotes=!1)}const _={},b=n.get("theme");if(typeof b=="string"){const E=b.trim().toLowerCase();E==="dark"&&(_.darkMode=!0),E==="light"&&(_.darkMode=!1)}return{boardSettings:s,uiPrefs:_}}catch{return{boardSettings:{},uiPrefs:{}}}}const Bf=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&=/]*)/;function lS(i){if(!i||typeof i!="string"||!Bf.test(i))return i;const e=new RegExp(`(${Bf.source})`,"g");return i.split(e).filter(o=>o!=="").map((o,c)=>Bf.test(o)?X.createElement("a",{key:c,href:o,target:"_blank",rel:"noopener noreferrer",className:"auto-link"},o):o)}const ue={CREATION:"CREATION",GROUPING:"GROUPING",INTERACTIONS:"INTERACTIONS",INTERACTION_REVEAL:"INTERACTION_REVEAL",RESULTS:"RESULTS",POLL:"POLL",POLL_RESULTS:"POLL_RESULTS"},uo=(i,e=!1)=>e?i===ue.GROUPING:!1,ar=(i,e=!1)=>e?i===ue.INTERACTIONS:!0,mi=(i,e=!1)=>e?i===ue.INTERACTIONS||i===ue.INTERACTION_REVEAL||i===ue.RESULTS:!0,cS=(i,e=!1)=>e?i===ue.INTERACTION_REVEAL||i===ue.RESULTS:!0,B2=(i,e=!1)=>e?i===ue.CREATION:!1,V2=(i,e=!1)=>e?i===ue.GROUPING||i===ue.INTERACTIONS||i===ue.INTERACTION_REVEAL||i===ue.RESULTS:!0,Mn=(i,e=!1)=>e?i===ue.INTERACTION_REVEAL||i===ue.RESULTS:!1,uS=(i,e=!1)=>e?i===ue.CREATION||i===ue.GROUPING:!0,Vf=(i,e=!1)=>e?i===ue.CREATION:!0,$2=(i,e=!1)=>e?i===ue.GROUPING:!0,Mr="Untitled Board",dS=A.createContext(),rn=()=>{const i=A.useContext(dS);if(!i)throw new Error("useBoardContext must be used within a BoardProvider");return i},G2=({children:i})=>{const[e,n]=A.useState(null),[s,o]=A.useState(null),[c,d]=A.useState(Mr),[h,p]=A.useState({}),[g,_]=A.useState(!1),[b,E]=A.useState(!0),[O,T]=A.useState(!0),[L,x]=A.useState(!1),[P,Y]=A.useState(3),[J,te]=A.useState(!1),[W,re]=A.useState(ue.CREATION),[de,se]=A.useState(0),[fe,Re]=A.useState({}),[Ce,he]=A.useState(null),[xe,Ze]=A.useState(null),[je,M]=A.useState(!0),[ee,ce]=A.useState(0),[Te,C]=A.useState({});A.useEffect(()=>{const I=wb.onAuthStateChanged(Q=>{if(Q){console.log("User authenticated:",Q.uid),n(Q);const q=ye(_e,`users/${Q.uid}/preferences`);wD(q).then(ie=>{if(ie.exists()){const ve=ie.val();ve.darkMode!==void 0&&M(ve.darkMode)}}).catch(ie=>{console.error("Error loading user preferences:",ie)})}else console.log("No user, signing in anonymously"),bI(wb).catch(q=>{console.error("Error signing in:",q)})});return()=>I()},[]),A.useEffect(()=>{je?document.documentElement.classList.remove("light-mode"):document.documentElement.classList.add("light-mode")},[je]),A.useEffect(()=>{if(s&&e){const I=ye(_e,`boards/${s}`);return Ze(I),Pf(I,Q=>{const q=Q.val();q&&(q.title&&d(q.title),p(q.columns||{}),q.settings&&(q.settings.votingEnabled!==void 0&&E(q.settings.votingEnabled),q.settings.downvotingEnabled!==void 0&&T(q.settings.downvotingEnabled),q.settings.multipleVotesAllowed!==void 0&&x(q.settings.multipleVotesAllowed),q.settings.votesPerUser!==void 0&&Y(q.settings.votesPerUser),q.settings.sortByVotes!==void 0&&_(q.settings.sortByVotes),q.settings.retrospectiveMode!==void 0&&te(q.settings.retrospectiveMode),q.settings.workflowPhase!==void 0&&re(q.settings.workflowPhase),q.settings.resultsViewIndex!==void 0&&se(q.settings.resultsViewIndex)),q.poll?(Re(q.poll.votes||{}),e&&q.poll.votes&&q.poll.votes[e.uid]?he(q.poll.votes[e.uid]):he(null)):(Re({}),he(null)))}),()=>{Uf(I)}}},[s,e]),A.useEffect(()=>{if(s&&e){const I=ye(_e,`boards/${s}/presence/${e.uid}`),Q=ye(_e,`boards/${s}/presence`);De(I,{lastSeen:Date.now(),uid:e.uid});const q=ve=>{if(ve.exists()){const Ie=ve.val(),Ge=Date.now(),lt=3e4,Pt=Object.values(Ie).filter(ct=>ct.lastSeen&&Ge-ct.lastSeen<lt).length;ce(Pt)}else ce(0)};Pf(Q,q);const ie=setInterval(()=>{De(I,{lastSeen:Date.now(),uid:e.uid})},1e4);return()=>{if(Uf(Q,q),clearInterval(ie),At(I),e!=null&&e.uid){const ve=ye(_e,`boards/${s}/cardCreationActivity/${e.uid}`);At(ve)}}}},[s,e]),A.useEffect(()=>{if(s&&e){const I=ye(_e,`boards/${s}/cardCreationActivity`),Q=q=>{if(q.exists()){const ie=q.val();C(ie)}else C({})};return Pf(I,Q),()=>{Uf(I,Q)}}},[s,e]),A.useEffect(()=>{if(s&&e){const I=()=>{const Q=ye(_e,`boards/${s}/cardCreationActivity/${e.uid}`);At(Q)};return window.addEventListener("beforeunload",I),()=>{window.removeEventListener("beforeunload",I)}}},[s,e]);const $=(I=null,Q=Mr,q=null)=>{if(!e)return null;const ie=Ps(),ve=ye(_e,`boards/${ie}`),Ie=I||["To Do","In Progress","Done"],Ge={},lt="abcdefghijklmnopqrstuvwxyz";Ie.forEach((We,Et)=>{const Vt=Et<26?lt[Et]:`col${Et}`;Ge[`${Vt}_${Ps()}`]={title:We,cards:{}}});const Pt=["votingEnabled","downvotingEnabled","multipleVotesAllowed","votesPerUser","retrospectiveMode","sortByVotes"],ct={};q&&typeof q=="object"&&Pt.forEach(We=>{q[We]!==void 0&&(ct[We]=q[We])});const it={title:Q,created:Date.now(),owner:e.uid,columns:Ge,settings:{votingEnabled:!0,downvotingEnabled:!0,multipleVotesAllowed:!1,sortByVotes:!1,retrospectiveMode:!1,workflowPhase:ue.CREATION,resultsViewIndex:0,...ct}};return De(ve,it).then(()=>{console.log("New board created with ID:",ie),o(ie),d(Mr)}).catch(We=>{console.error("Error creating board:",We)}),ie},U=I=>{console.log("Opening board with ID:",I),o(I)},B=I=>{if(d(I),s&&e){const Q=ye(_e,`boards/${s}/title`);De(Q,I).then(()=>{console.log("Board title updated")}).catch(q=>{console.error("Error updating board title:",q)})}},F=I=>{if(s&&e){const Q=ye(_e,`boards/${s}/settings`),q={votingEnabled:b,downvotingEnabled:O,multipleVotesAllowed:L,votesPerUser:P,sortByVotes:g,retrospectiveMode:J,workflowPhase:W,resultsViewIndex:de,...I};De(Q,q).then(()=>{console.log("Board settings updated:",q),I.votingEnabled!==void 0&&E(I.votingEnabled),I.downvotingEnabled!==void 0&&T(I.downvotingEnabled),I.multipleVotesAllowed!==void 0&&x(I.multipleVotesAllowed),I.votesPerUser!==void 0&&Y(I.votesPerUser),I.sortByVotes!==void 0&&_(I.sortByVotes),I.retrospectiveMode!==void 0&&te(I.retrospectiveMode),I.workflowPhase!==void 0&&re(I.workflowPhase),I.resultsViewIndex!==void 0&&se(I.resultsViewIndex)}).catch(ie=>{console.error("Error updating board settings:",ie)})}else I.votingEnabled!==void 0&&E(I.votingEnabled),I.downvotingEnabled!==void 0&&T(I.downvotingEnabled),I.multipleVotesAllowed!==void 0&&x(I.multipleVotesAllowed),I.votesPerUser!==void 0&&Y(I.votesPerUser),I.sortByVotes!==void 0&&_(I.sortByVotes),I.retrospectiveMode!==void 0&&te(I.retrospectiveMode),I.workflowPhase!==void 0&&re(I.workflowPhase),I.resultsViewIndex!==void 0&&se(I.resultsViewIndex)},me=I=>{F({votingEnabled:I})},ae=I=>{F({downvotingEnabled:I})},Z=I=>{F({multipleVotesAllowed:I})},z=I=>{F({votesPerUser:I})},oe=I=>{F({sortByVotes:I})},ge=I=>{F(I?{retrospectiveMode:I}:{retrospectiveMode:I,workflowPhase:ue.CREATION,resultsViewIndex:0})},$e=()=>{F({workflowPhase:ue.GROUPING,retrospectiveMode:!0})},Be=()=>{F({workflowPhase:ue.INTERACTIONS})},fn=()=>{F({workflowPhase:ue.INTERACTION_REVEAL})},Lt=()=>{F({workflowPhase:ue.RESULTS,resultsViewIndex:0})},Hn=()=>{F({workflowPhase:ue.POLL})},Zs=()=>{F({workflowPhase:ue.POLL_RESULTS})},Yt=()=>{F({workflowPhase:ue.CREATION,retrospectiveMode:!1,resultsViewIndex:0})},Js=I=>{if(!s||!e||I<1||I>5)return;const Q=ye(_e,`boards/${s}/poll/votes/${e.uid}`);De(Q,I).then(()=>{he(I)}).catch(q=>{console.error("Error submitting poll vote:",q)})},Gr=()=>{const I=Object.values(fe);if(I.length===0)return{average:0,distribution:[0,0,0,0,0],totalVotes:0};const Q=[0,0,0,0,0];let q=0;return I.forEach(ve=>{ve>=1&&ve<=5&&(Q[ve-1]++,q+=ve)}),{average:q/I.length,distribution:Q,totalVotes:I.length}},fr=()=>{if(!s||!e)return Promise.resolve();const I=[];return Object.entries(h).forEach(([Q,q])=>{q.groups&&Object.entries(q.groups).forEach(([ie,ve])=>{ve.cardIds&&ve.cardIds.forEach(Ge=>{const lt=ye(_e,`boards/${s}/columns/${Q}/cards/${Ge}/groupId`);I.push(At(lt))});const Ie=ye(_e,`boards/${s}/columns/${Q}/groups/${ie}`);I.push(At(Ie))})}),Promise.all(I).then(()=>{console.log("All grouping removed from board")}).catch(Q=>{throw console.error("Error removing all grouping:",Q),Q})},Ci=()=>{switch(W){case ue.GROUPING:{if(Object.values(h).some(Q=>Q.groups&&Object.keys(Q.groups).length>0)){if(!window.confirm("Going back to the creation phase will remove all card grouping. This cannot be undone. Are you sure you want to continue?"))return;fr().then(()=>{F({workflowPhase:ue.CREATION})}).catch(q=>{console.error("Failed to remove grouping:",q)})}else F({workflowPhase:ue.CREATION});break}case ue.INTERACTIONS:F({workflowPhase:ue.GROUPING});break;case ue.INTERACTION_REVEAL:F({workflowPhase:ue.INTERACTIONS});break;case ue.RESULTS:F({workflowPhase:ue.INTERACTION_REVEAL});break;case ue.POLL:F({workflowPhase:ue.RESULTS});break;case ue.POLL_RESULTS:F({workflowPhase:ue.POLL});break}},Ve=I=>{if(W!==ue.RESULTS)return;const q=hn().length-1;let ie=de;I==="next"&&de<q?ie=de+1:I==="prev"&&de>0&&(ie=de-1),F({resultsViewIndex:ie})},hn=()=>{const I=[];return Object.keys(h).forEach(Q=>{const q=h[Q];Object.keys(q.cards||{}).forEach(ie=>{const ve=q.cards[ie];ve.groupId||I.push({type:"card",id:ie,columnId:Q,data:ve,votes:ve.votes||0})}),Object.keys(q.groups||{}).forEach(ie=>{const ve=q.groups[ie];I.push({type:"group",id:ie,columnId:Q,data:ve,votes:ve.votes||0})})}),I.sort((Q,q)=>q.votes-Q.votes)},Po=()=>!s||!e||!window.confirm("Are you sure you want to reset all votes to zero? This cannot be undone.")?!1:(Object.entries(h).forEach(([Q,q])=>{q.cards&&Object.entries(q.cards).forEach(([ie,ve])=>{const Ie=ye(_e,`boards/${s}/columns/${Q}/cards/${ie}`),Ge={...ve,votes:0,voters:{}};De(Ie,Ge).catch(lt=>{console.error(`Error resetting votes for card ${ie}:`,lt)})}),q.groups&&Object.entries(q.groups).forEach(([ie,ve])=>{const Ie=ye(_e,`boards/${s}/columns/${Q}/groups/${ie}`),Ge={...ve,votes:0,voters:{}};De(Ie,Ge).catch(lt=>{console.error(`Error resetting votes for group ${ie}:`,lt)})})}),!0),Uo=()=>{let I=0;return Object.values(h).forEach(Q=>{Q.cards&&Object.values(Q.cards).forEach(q=>{I+=q.votes||0}),Q.groups&&Object.values(Q.groups).forEach(q=>{I+=q.votes||0})}),I},Ti=I=>{if(!I)return 0;let Q=0;return Object.values(h).forEach(q=>{q.cards&&Object.values(q.cards).forEach(ie=>{ie.voters&&ie.voters[I]&&(Q+=Math.abs(ie.voters[I]))}),q.groups&&Object.values(q.groups).forEach(ie=>{ie.voters&&ie.voters[I]&&(Q+=Math.abs(ie.voters[I]))})}),Q},zo={user:e,boardId:s,setBoardId:o,boardTitle:c,setBoardTitle:d,columns:h,updateBoardTitle:B,sortByVotes:g,setSortByVotes:oe,votingEnabled:b,setVotingEnabled:E,updateVotingEnabled:me,downvotingEnabled:O,setDownvotingEnabled:T,updateDownvotingEnabled:ae,multipleVotesAllowed:L,setMultipleVotesAllowed:x,updateMultipleVotesAllowed:Z,votesPerUser:P,setVotesPerUser:Y,updateVotesPerUser:z,retrospectiveMode:J,setRetrospectiveMode:te,updateRetrospectiveMode:ge,updateBoardSettings:F,boardRef:xe,createNewBoard:$,openExistingBoard:U,moveCard:(I,Q,q,ie=null)=>{var Ge,lt,Pt,ct,it,We,Et,Vt,ia,Ho;if(!s||!e)return;const ve=(lt=(Ge=h[Q])==null?void 0:Ge.cards)==null?void 0:lt[I];if(!ve){console.error("Card not found");return}const Ie=[];if(Q===q){const pn=ve.groupId;if(pn===ie)return;const Bn=ye(_e,`boards/${s}/columns/${Q}/cards/${I}/groupId`);if(ie){Ie.push(De(Bn,ie));const gn=(ct=(Pt=h[q])==null?void 0:Pt.groups)==null?void 0:ct[ie];if(gn){const Qt=gn.cardIds||[];if(!Qt.includes(I)){const mn=[...Qt,I],Ut=ye(_e,`boards/${s}/columns/${q}/groups/${ie}/cardIds`);Ie.push(De(Ut,mn))}}}else Ie.push(At(Bn));if(pn){const gn=(We=(it=h[Q])==null?void 0:it.groups)==null?void 0:We[pn];if(gn&&gn.cardIds&&gn.cardIds.includes(I)){const Qt=gn.cardIds.filter(Ut=>Ut!==I),mn=ye(_e,`boards/${s}/columns/${Q}/groups/${pn}/cardIds`);Ie.push(De(mn,Qt))}}}else{const pn=ye(_e,`boards/${s}/columns/${Q}/cards/${I}`),Bn=ye(_e,`boards/${s}/columns/${q}/cards/${I}`),{groupId:gn,...Qt}=ve,mn=ie?{...Qt,groupId:ie}:Qt;if(Ie.push(At(pn)),Ie.push(De(Bn,mn)),ie){const Ut=(Vt=(Et=h[q])==null?void 0:Et.groups)==null?void 0:Vt[ie];if(Ut){const xn=Ut.cardIds||[];if(!xn.includes(I)){const ht=[...xn,I],Yr=ye(_e,`boards/${s}/columns/${q}/groups/${ie}/cardIds`);Ie.push(De(Yr,ht))}}}if(ve.groupId){const Ut=(Ho=(ia=h[Q])==null?void 0:ia.groups)==null?void 0:Ho[ve.groupId];if(Ut&&Ut.cardIds){const xn=Ut.cardIds.filter(Yr=>Yr!==I),ht=ye(_e,`boards/${s}/columns/${Q}/groups/${ve.groupId}/cardIds`);Ie.push(De(ht,xn))}}}return Promise.all(Ie).then(()=>{console.log(`Card ${I} moved from ${Q} to ${q}${ie?` (group ${ie})`:""}`)}).catch(pn=>{throw console.error("Error moving card:",pn),pn})},resetAllVotes:Po,getTotalVotes:Uo,getUserVoteCount:Ti,getTotalVotesRemaining:()=>{if(!ee||ee===0)return 0;const I=ee*P,Q=Uo();return Math.max(0,I-Q)},darkMode:je,updateDarkMode:I=>{if(e){const Q=ye(_e,`users/${e.uid}/preferences`);De(Q,{darkMode:I}).then(()=>{console.log("Dark mode preference updated:",I),M(I)}).catch(q=>{console.error("Error updating dark mode preference:",q)})}else M(I)},activeUsers:ee,workflowPhase:W,setWorkflowPhase:re,resultsViewIndex:de,setResultsViewIndex:se,startGroupingPhase:$e,startInteractionsPhase:Be,startInteractionRevealPhase:fn,startResultsPhase:Lt,startPollPhase:Hn,startPollResultsPhase:Zs,goToCreationPhase:Yt,goToPreviousPhase:Ci,navigateResults:Ve,getSortedItemsForResults:hn,pollVotes:fe,userPollVote:Ce,submitPollVote:Js,getPollStats:Gr,createCardGroup:(I,Q,q="New Group",ie=null)=>{if(!s||!e||!Q.length)return;const ve=Ps(),Ie=ye(_e,`boards/${s}/columns/${I}/groups/${ve}`),Ge=ie||Date.now(),lt={name:q,created:Ge,expanded:!0,votes:0,voters:{},cardIds:Q},Pt=Q.map(ct=>{const it=ye(_e,`boards/${s}/columns/${I}/cards/${ct}/groupId`);return De(it,ve)});Promise.all([De(Ie,lt),...Pt]).then(()=>{console.log(`Group ${ve} created with ${Q.length} cards`)}).catch(ct=>{console.error("Error creating group:",ct)})},ungroupCards:(I,Q)=>{var Ie,Ge;if(!s||!e)return;const q=(Ge=(Ie=h[I])==null?void 0:Ie.groups)==null?void 0:Ge[Q];if(!q||!q.cardIds)return;const ie=[];q.cardIds.forEach(lt=>{const Pt=ye(_e,`boards/${s}/columns/${I}/cards/${lt}/groupId`);ie.push(At(Pt))});const ve=ye(_e,`boards/${s}/columns/${I}/groups/${Q}`);Promise.all([...ie,At(ve)]).then(()=>{console.log(`Group ${Q} ungrouped`)}).catch(lt=>{console.error("Error ungrouping cards:",lt)})},removeAllGrouping:fr,updateGroupName:(I,Q,q)=>{if(!s||!e)return;const ie=ye(_e,`boards/${s}/columns/${I}/groups/${Q}/name`);De(ie,q).then(()=>{console.log("Group name updated")}).catch(ve=>{console.error("Error updating group name:",ve)})},toggleGroupExpanded:(I,Q,q)=>{if(!s||!e)return;const ie=ye(_e,`boards/${s}/columns/${I}/groups/${Q}/expanded`);De(ie,q).catch(ve=>{console.error("Error updating group expanded state:",ve)})},upvoteGroup:(I,Q,q=0,ie)=>{var We,Et;if(!s||!e)return;const ve=(Et=(We=h[I])==null?void 0:We.groups)==null?void 0:Et[Q];if(!ve)return;const Ie=ve.voters||{},Ge=e.uid;if(J){const Vt=Ti(Ge);if(L){if(Vt>=P){ie(`You've reached your vote limit (${P} votes)`);return}}else if((Ie[Ge]||0)===0&&Vt>=P){ie(`You've reached your vote limit (${P} votes)`);return}}if(!L&&Ie[Ge]&&Ie[Ge]>0){ie("You have already voted on this group");return}const lt=q+1,Pt={...Ie,[Ge]:(Ie[Ge]||0)+1},ct=ye(_e,`boards/${s}/columns/${I}/groups/${Q}/votes`),it=ye(_e,`boards/${s}/columns/${I}/groups/${Q}/voters`);Promise.all([De(ct,lt),De(it,Pt)]).then(()=>{ie("Upvoted group")}).catch(Vt=>{console.error("Error updating group votes:",Vt)})},downvoteGroup:(I,Q,q=0,ie)=>{var We,Et;if(!s||!e)return;const ve=(Et=(We=h[I])==null?void 0:We.groups)==null?void 0:Et[Q];if(!ve)return;const Ie=ve.voters||{},Ge=e.uid;if(!L&&Ie[Ge]&&Ie[Ge]<0){ie("You have already voted on this group");return}const lt=q-1,Pt={...Ie,[Ge]:(Ie[Ge]||0)-1},ct=ye(_e,`boards/${s}/columns/${I}/groups/${Q}/votes`),it=ye(_e,`boards/${s}/columns/${I}/groups/${Q}/voters`);Promise.all([De(ct,lt),De(it,Pt)]).then(()=>{ie("Downvoted group")}).catch(Vt=>{console.error("Error updating group votes:",Vt)})},usersAddingCards:Te,startCardCreation:I=>{if(!s||!e)return;const Q=ye(_e,`boards/${s}/cardCreationActivity/${e.uid}`);De(Q,{columnId:I,lastUpdated:Date.now(),uid:e.uid}).catch(q=>{console.error("Error starting card creation tracking:",q)})},stopCardCreation:()=>{if(!s||!e)return;const I=ye(_e,`boards/${s}/cardCreationActivity/${e.uid}`);At(I).catch(Q=>{console.error("Error stopping card creation tracking:",Q)})},getUsersAddingCardsInColumn:I=>Object.entries(Te).filter(([Q,q])=>q.columnId===I).map(([Q,q])=>({userId:Q,...q})),getAllUsersAddingCards:()=>Object.entries(Te).map(([I,Q])=>({userId:I,...Q}))};return m.jsx(dS.Provider,{value:zo,children:i})};function q2(i,e="New Column"){if(!i)return Promise.reject(new Error("Board ID is required"));const n=Ps(),s={title:e,cards:{}},o=ye(_e,`boards/${i}/columns/${n}`);return De(o,s)}function Y2(i,e,n,s=null){if(!i)return Promise.reject(new Error("Board ID is required"));if(!e)return Promise.reject(new Error("Column ID is required"));if(!n||!n.trim())return Promise.reject(new Error("Card content is required"));const o=Ps(),c={content:n.trim(),votes:0,created:Date.now(),createdBy:s?s.uid:null},d=ye(_e,`boards/${i}/columns/${e}/cards/${o}`);return De(d,c).then(()=>o)}const F2=({usersAddingCards:i,currentUserId:e})=>{const n=(i==null?void 0:i.filter(c=>c.userId!==e))||[];if(!n||n.length===0)return null;const s=n.length,o=s===1?"Someone is adding a card":`${s} people are adding cards`;return m.jsxs("div",{className:"card-creation-indicator",children:[m.jsx("span",{className:"typing-text",children:o}),m.jsxs("div",{className:"typing-dots",children:[m.jsx("span",{}),m.jsx("span",{}),m.jsx("span",{})]})]})},fS=(i,e)=>{const n=V2(e,i),s=Mn(e,i);return i&&!n||s},W2=(i,e)=>fS(i,e)?Mn(e,i)?"frozen":"cards-not-revealed":null,hS=(i,e)=>i&&e!=="frozen",Hh=i=>i==="frozen",pS=i=>{switch(i){case"frozen":return"Interactions are now frozen - no more changes allowed";case"cards-not-revealed":default:return"Reactions disabled until cards are revealed"}},Q2=i=>{switch(i){case"frozen":return null;case"cards-not-revealed":default:return"Comments are disabled until cards are revealed"}};function K2({boardId:i,columnId:e,cardId:n,cardData:s,user:o,showNotification:c,multipleVotesAllowed:d=!1,retrospectiveMode:h=!1,workflowPhase:p="CREATION",votesPerUser:g=3,getUserVoteCount:_=()=>0}){const[b,E]=A.useState(!1),[O,T]=A.useState(s.content||""),[L,x]=A.useState(!1),[P,Y]=A.useState(!1),[J,te]=A.useState(""),[W,re]=A.useState({top:0,left:0}),de=A.useCallback(()=>s.createdBy?s.createdBy&&(o==null?void 0:o.uid)&&s.createdBy===o.uid:!0,[s.createdBy,o==null?void 0:o.uid]),se=A.useCallback(Z=>Z.createdBy?Z.createdBy&&(o==null?void 0:o.uid)&&Z.createdBy===o.uid:!0,[o==null?void 0:o.uid]),fe=A.useCallback(()=>fS(h,p),[h,p]),Re=A.useMemo(()=>ye(_e,`boards/${i}/columns/${e}/cards/${n}`),[i,e,n]),Ce=A.useCallback(Z=>{if(Z&&Z.stopPropagation(),!de()){c("Only the author can edit this card");return}h&&!uS(p,h)||(E(!b),T(s.content||""))},[b,s.content,de,c,h,p]),he=A.useCallback(async()=>{if(!i)return;const Z=O.trim();try{if(!Z){await At(Re),c("Card deleted");return}await De(Re,{...s,content:Z}),c("Card saved"),E(!1)}catch(z){console.error("Error saving card:",z)}},[i,Re,s,O,c]),xe=A.useCallback(async Z=>{if(Z.stopPropagation(),!!i&&window.confirm("Are you sure you want to delete this card?"))try{await At(Re),c("Card deleted")}catch(z){console.error("Error deleting card:",z)}},[i,Re,c]),Ze=A.useCallback(Z=>{Z.key==="Enter"&&!Z.shiftKey?(Z.preventDefault(),he()):Z.key==="Escape"&&(E(!1),T(s.content||""))},[he,s.content]),je=A.useCallback(async(Z,z,oe)=>{if(z.stopPropagation(),!i||!o)return;if(fe()){Mn(p,h)?c("Voting is now frozen - no more changes allowed"):c("Voting is disabled until cards are revealed");return}const ge=s.votes||0;if(Z<0&&ge<=0){c("Can't have negative votes");return}const $e=s.voters&&s.voters[o.uid]?s.voters[o.uid]:0;if(Z>0&&h){const Be=_(o.uid);if(d){if(Be>=g){c(`You've reached your vote limit (${g} votes)`);return}}else if($e===0&&Be>=g){c(`You've reached your vote limit (${g} votes)`);return}}if(!d){if($e===Z){c("You've already voted");return}$e!==0&&(Z=-$e)}try{const Be=ge+Z,fn=ye(_e,`boards/${i}/columns/${e}/cards/${n}/votes`);await De(fn,Be);const Lt=ye(_e,`boards/${i}/columns/${e}/cards/${n}/voters/${o.uid}`);let Hn;d?Hn=$e+Z:Hn=$e!==0&&Z===-$e?0:Z,Hn===0?await At(Lt):await De(Lt,Hn),!d&&$e!==0&&Z===-$e?c("Vote removed"):c(oe)}catch(Be){console.error("Error updating votes:",Be)}},[i,e,n,s.votes,s.voters,c,d,o,fe,p,h,g,_]),M=A.useCallback(Z=>{je(1,Z,"Upvoted card")},[je]),ee=A.useCallback(Z=>{je(-1,Z,"Downvoted card")},[je]),ce=A.useCallback(Z=>Z?Z.split(`
`).map((z,oe)=>m.jsxs(A.Fragment,{children:[lS(z),oe<Z.split(`
`).length-1&&m.jsx("br",{})]},oe)):"",[]),Te=A.useCallback(Z=>!!(s.reactions&&s.reactions[Z]&&s.reactions[Z].users&&s.reactions[Z].users[o==null?void 0:o.uid]),[s.reactions,o==null?void 0:o.uid]),C=A.useCallback(Z=>s.reactions&&s.reactions[Z]&&s.reactions[Z].count||0,[s.reactions]),$=A.useCallback(Z=>{const z=`boards/${i}/columns/${e}/cards/${n}/reactions/${Z}`;return{userRef:ye(_e,`${z}/users/${o==null?void 0:o.uid}`),countRef:ye(_e,`${z}/count`)}},[i,e,n,o==null?void 0:o.uid]),U=A.useCallback(async(Z,z)=>{if(Z.stopPropagation(),!i||!o)return;if(fe()){Mn(p,h)?c("Interactions are now frozen - no more changes allowed"):c("Reactions are disabled until cards are revealed");return}const{userRef:oe,countRef:ge}=$(z),$e=Te(z);try{if($e){await At(oe);const Be=Math.max(0,C(z)-1);await De(ge,Be),c("Your reaction removed")}else{await De(oe,!0);const Be=C(z)+1;await De(ge,Be),c("Reaction added")}}catch(Be){console.error("Error managing reaction:",Be)}},[i,o,$,Te,C,c,fe,p,h]),B=A.useCallback(async()=>{if(!(!i||!J.trim())){if(fe()){Mn(p,h)?c("Comments are now frozen - no more changes allowed"):c("Comments are disabled until cards are revealed");return}try{const Z=`comment_${Date.now()}`,z={content:J,timestamp:Date.now(),createdBy:(o==null?void 0:o.uid)||null},oe=ye(_e,`boards/${i}/columns/${e}/cards/${n}/comments/${Z}`);await De(oe,z),c("Comment added"),te("")}catch(Z){console.error("Error adding comment:",Z)}}},[i,e,n,J,c,o==null?void 0:o.uid,fe,p,h]),F=A.useCallback(async(Z,z)=>{var oe;if(!(!i||!Z||!z.trim())){if(fe()){Mn(p,h)?c("Comments are now frozen - no more changes allowed"):c("Comment editing is disabled until cards are revealed");return}try{const ge=(oe=s.comments)==null?void 0:oe[Z];if(!ge)return;if(!se(ge)){c("Only the author can edit this comment");return}const $e=ye(_e,`boards/${i}/columns/${e}/cards/${n}/comments/${Z}`);await De($e,{...ge,content:z.trim()}),c("Comment updated")}catch(ge){console.error("Error updating comment:",ge)}}},[i,e,n,s.comments,c,se,fe,p,h]),me=A.useCallback(async Z=>{var z;if(!(!i||!Z)){if(fe()){Mn(p,h)?c("Comments are now frozen - no more changes allowed"):c("Comment deletion is disabled until cards are revealed");return}try{const oe=(z=s.comments)==null?void 0:z[Z];if(!oe)return;if(!se(oe)){c("Only the author can delete this comment");return}const ge=ye(_e,`boards/${i}/columns/${e}/cards/${n}/comments/${Z}`);await At(ge),c("Comment deleted")}catch(oe){console.error("Error deleting comment:",oe)}}},[i,e,n,c,s.comments,se,fe,p,h]),ae=A.useCallback(()=>{Y(!P),x(!1)},[P]);return A.useEffect(()=>{if(!L)return;const Z=z=>{const oe=document.querySelector(".emoji-picker");oe&&!oe.contains(z.target)&&!z.target.closest(".add-reaction-button")&&x(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[L]),{isEditing:b,editedContent:O,showEmojiPicker:L,showComments:P,newComment:J,emojiPickerPosition:W,setIsEditing:E,setEditedContent:T,setShowEmojiPicker:x,setShowComments:Y,setNewComment:te,setEmojiPickerPosition:re,toggleEditMode:Ce,saveCardChanges:he,deleteCard:xe,handleKeyPress:Ze,upvoteCard:M,downvoteCard:ee,formatContentWithEmojis:ce,hasUserReactedWithEmoji:Te,addReaction:U,addComment:B,editComment:F,deleteComment:me,toggleComments:ae,isCardAuthor:de,isCommentAuthor:se,isInteractionDisabled:fe}}var X2=Nb();const Z2=So(X2),gS=X.memo(({position:i,onEmojiSelect:e,onClose:n,hasUserReactedWithEmoji:s})=>{const[o,c]=A.useState(""),d=A.useMemo(()=>{if(!o.trim())return Ob;const h=o.toLowerCase().trim();return Ob.filter(p=>H2(p).some(_=>_.toLowerCase().includes(h)))},[o]);return Z2.createPortal(m.jsxs("div",{className:"emoji-picker",onClick:h=>h.stopPropagation(),"data-testid":"emoji-picker",style:{top:i.top,left:i.left},children:[m.jsx("div",{className:"emoji-picker-search",children:m.jsx("input",{type:"text",placeholder:"Search emojis...",value:o,onChange:h=>c(h.target.value),"data-testid":"emoji-search-input",className:"emoji-search-input",autoFocus:!0})}),m.jsxs("div",{className:"emoji-picker-grid",children:[d.map(h=>m.jsx("button",{className:`emoji-option ${s(h)?"selected":""}`,"data-testid":"emoji-option",onClick:p=>{p.stopPropagation(),e(p,h),n()},children:h},h)),d.length===0&&o.trim()&&m.jsxs("div",{className:"emoji-picker-no-results","data-testid":"emoji-no-results",children:["No emojis found for “",o,"”"]})]})]}),document.body)}),J2=X.memo(({showEmojiPicker:i,setShowEmojiPicker:e,setShowComments:n,toggleComments:s,setEmojiPickerPosition:o,emojiPickerPosition:c,addReaction:d,hasUserReactedWithEmoji:h,commentCount:p=0,disabled:g=!1,disabledReason:_="cards-not-revealed"})=>{const b=A.useRef(null),E=hS(g,_),O=Hh(_);return m.jsxs("div",{className:"card-hover-actions",children:[i&&m.jsx(gS,{position:c,onEmojiSelect:d,onClose:()=>e(!1),hasUserReactedWithEmoji:h}),!O&&m.jsx("button",{className:`card-hover-action emoji-action ${E?"disabled":""}`,onClick:g?void 0:T=>{if(T.stopPropagation(),b.current){const L=b.current.getBoundingClientRect();o({top:L.bottom+window.scrollY+5,left:L.left+window.scrollX})}e(!i),n(!1)},title:g?pS(_):"Add reaction","aria-label":"Add reaction",ref:b,disabled:E,children:m.jsx(lp,{size:16,"aria-hidden":"true"})}),m.jsxs("button",{className:`card-hover-action comment-action ${p>0?"has-comments":""}`,onClick:T=>{T.stopPropagation(),s()},title:"Toggle comments",children:[m.jsx(To,{size:16}),p>0&&m.jsx("span",{className:"comment-count",children:p})]})]})}),ek=X.memo(({reactions:i,userId:e,addReaction:n,disabled:s=!1,disabledReason:o="cards-not-revealed"})=>{const c=hS(s,o),d=o==="frozen";return i&&Object.entries(i).some(([,p])=>p.count>0)?m.jsx("div",{className:"emoji-reactions",children:m.jsx("div",{className:"reactions-left",children:i&&Object.entries(i).map(([p,g])=>{if(g.count<=0)return null;const _=g.users&&g.users[e];return m.jsxs("div",{className:`emoji-reaction ${_?"active":""} ${c?"disabled":""} ${d?"frozen":""}`,"data-testid":"emoji-reaction",onClick:s?void 0:b=>n(b,p),title:s?pS(o):_?"Click to remove your reaction":"Click to add your reaction",children:[m.jsx("span",{className:"emoji",children:p}),m.jsx("span",{className:"count",children:g.count})]},p)})})}):null}),tk=({editedComment:i,setEditedComment:e,saveComment:n,cancelEdit:s,deleteComment:o})=>m.jsxs("div",{className:"comment-edit",onClick:c=>c.stopPropagation(),children:[m.jsx("input",{type:"text",value:i,onChange:c=>e(c.target.value),className:"comment-edit-input",autoFocus:!0,onKeyPress:c=>{c.key==="Enter"&&i.trim()?n():c.key==="Escape"&&s()}}),m.jsxs("div",{className:"comment-edit-actions",children:[m.jsx("button",{className:"btn danger-btn btn-sm",onClick:o,children:"Delete"}),m.jsx("button",{className:"btn secondary-btn btn-sm",onClick:s,children:"Cancel"}),m.jsx("button",{className:"btn success-btn btn-sm",onClick:n,children:"Save"})]})]}),mS=X.memo(({comments:i,onAddComment:e,newComment:n,onCommentChange:s,onEditComment:o,onDeleteComment:c,isCommentAuthor:d,interactionsDisabled:h=!1,disabledReason:p=null})=>{const[g,_]=A.useState(null),[b,E]=A.useState(""),O=!Hh(p),T=Hh(p),L=(W,re)=>{if(h){O&&alert("Comment editing is disabled until cards are revealed");return}_(W),E(re)},x=()=>{_(null),E("")},P=()=>{b.trim()&&(o(g,b),x())},Y=Q2(p),J=()=>{if(h){O&&Y&&alert(Y);return}n.trim()&&e()},te=W=>{window.confirm("Are you sure you want to delete this comment?")&&c(W)};return m.jsxs("div",{className:"comments-section",children:[m.jsx("h4",{children:"Comments"}),i&&Object.entries(i).length>0?Object.entries(i).map(([W,re])=>m.jsx("div",{className:"comment",children:g===W?m.jsx(tk,{editedComment:b,setEditedComment:E,saveComment:P,cancelEdit:x,deleteComment:()=>te(W)}):m.jsx("div",{className:`comment-content ${d(re)&&!h?"editable":""}`,onClick:de=>{de.stopPropagation(),d(re)&&L(W,re.content)},title:h&&O?Y:d(re)?"Click to edit":"Only the author can edit this comment",children:lS(re.content)})},W)):m.jsx("p",{className:"no-comments",children:"No comments yet"}),!T&&m.jsx("div",{className:"comment-form",children:m.jsx("input",{type:"text",placeholder:h&&O?Y:"Add a comment...",className:"comment-input",value:n,onChange:W=>s(W.target.value),onClick:W=>W.stopPropagation(),onKeyPress:W=>{W.key==="Enter"&&n.trim()&&(W.preventDefault(),J())},disabled:h,title:h&&O?Y:""})})]})}),vS=X.memo(({votes:i,onUpvote:e,onDownvote:n,showDownvoteButton:s=!0,disabled:o=!1,disabledReason:c="voting-disabled"})=>{const d=h=>{if(!o)return h==="upvote"?"Upvote":"Downvote";switch(c){case"frozen":return"Voting is frozen - no more changes allowed";case"cards-not-revealed":default:return"Voting disabled until cards are revealed"}};return m.jsxs("div",{className:"votes",children:[m.jsx("button",{className:`vote-button ${o?"disabled":""}`,onClick:o?void 0:e,title:d("upvote"),disabled:o,children:m.jsx(Zh,{size:16})}),m.jsx("span",{className:"vote-count",children:i||0}),s&&m.jsx("button",{className:`vote-button ${o?"disabled":""}`,onClick:o?void 0:n,title:d("downvote"),disabled:o,children:m.jsx(Co,{size:16})})]})}),nk=({editedContent:i,setEditedContent:e,handleKeyPress:n,saveCardChanges:s,toggleEditMode:o,deleteCard:c})=>m.jsxs("div",{className:"card-edit",onClick:d=>d.stopPropagation(),children:[m.jsx("textarea",{value:i,onChange:d=>e(d.target.value),onKeyDown:n,className:"card-edit-textarea",autoFocus:!0}),m.jsxs("div",{className:"card-edit-actions",children:[m.jsx("button",{className:"btn danger-btn",onClick:c,children:"Delete"}),m.jsx("button",{className:"btn secondary-btn",onClick:o,children:"Cancel"}),m.jsx("button",{className:"btn success-btn",onClick:s,children:"Save"})]})]}),ik=({cardData:i,formatContentWithEmojis:e,upvoteCard:n,downvoteCard:s,votingEnabled:o,downvotingEnabled:c,userId:d,retrospectiveMode:h,groupId:p,workflowPhase:g="CREATION",user:_,disabledReason:b,children:E})=>{const O=i.voters&&d&&i.voters[d]||0,T=c||O>0,L=W=>W?W.split("").map(re=>re===" "?" ":re===`
`?`
`:"█").join(""):"",x=i.createdBy&&d&&i.createdBy===d,P=B2(g,h)&&!x,Y=!ar(g,h),J=mi(g,h),te=P?L(i.content):e(i.content);return m.jsxs("div",{className:"card-header",children:[o&&!p&&!(h&&g==="CREATION"&&_)&&J&&m.jsx(vS,{votes:i.votes,onUpvote:Y?()=>{}:n,onDownvote:Y?()=>{}:s,showDownvoteButton:T,disabled:Y,disabledReason:b}),m.jsx("div",{className:`card-content ${!o||p||!J||h&&g==="CREATION"&&_?"full-width":""} ${P?"obfuscated":""}`,"data-testid":"card-content",children:te}),E]})};function rg({cardId:i,cardData:e,columnId:n,groupId:s=null,showNotification:o,onCardDropOnCard:c=null}){const{boardId:d,user:h,votingEnabled:p,downvotingEnabled:g,multipleVotesAllowed:_,votesPerUser:b,getUserVoteCount:E,retrospectiveMode:O,workflowPhase:T="CREATION"}=rn(),L=A.useRef(null),{isEditing:x,editedContent:P,showEmojiPicker:Y,showComments:J,newComment:te,emojiPickerPosition:W,setEditedContent:re,setShowEmojiPicker:de,setShowComments:se,setNewComment:fe,setEmojiPickerPosition:Re,toggleEditMode:Ce,saveCardChanges:he,deleteCard:xe,handleKeyPress:Ze,upvoteCard:je,downvoteCard:M,formatContentWithEmojis:ee,hasUserReactedWithEmoji:ce,addReaction:Te,addComment:C,editComment:$,deleteComment:U,toggleComments:B,isCardAuthor:F,isCommentAuthor:me}=K2({boardId:d,columnId:n,cardId:i,cardData:e,user:h,showNotification:o,multipleVotesAllowed:_,retrospectiveMode:O,workflowPhase:T,votesPerUser:b,getUserVoteCount:E}),ae=W2(O,T),Z=F();let z=!1;if(T&&h){const Ve=uS(T,O);T==="CREATION"?z=!Z:T==="GROUPING"?z=!Ve:Ve||(z=!0)}const ge=O&&!cS(T,O)?{...e,votes:e.voters&&(h!=null&&h.uid)&&e.voters[h.uid]?Math.abs(e.voters[h.uid]):0,voters:e.voters&&(h!=null&&h.uid)?{[h.uid]:e.voters[h.uid]}:{},reactions:e.reactions?Object.fromEntries(Object.entries(e.reactions).filter(([Ve,hn])=>hn.users&&(h==null?void 0:h.uid)&&hn.users[h.uid]).map(([Ve,hn])=>[Ve,{count:1,users:{[h.uid]:!0}}])):{},comments:e.comments?Object.fromEntries(Object.entries(e.comments).filter(([Ve,hn])=>hn.createdBy===(h==null?void 0:h.uid))):{}}:e,$e=!$2(T,O),Be=uo(T,O),Lt=!$e||T==="CREATION"&&Z,[{isDragging:Hn},Zs]=OO(()=>({type:"CARD",item:{cardId:i,columnId:n,cardData:e,groupId:s},canDrag:Lt||Be,collect:Ve=>({isDragging:Ve.isDragging()})}),[i,n,e,$e,s,Be,Lt]),[{isOver:Yt},Js]=Wh(()=>({accept:"CARD",drop:Ve=>{Be&&c&&Ve.cardId!==i&&c(Ve.cardId,i)},canDrop:()=>Be,collect:Ve=>({isOver:!!Ve.isOver()&&!!Ve.canDrop()})}),[Be,c,i]),Gr=()=>{!x&&!Be&&Ce()},fr=Ve=>{L.current=Ve,(Lt||Be)&&Zs(Ve),Be&&Js(Ve)},Ci=()=>{const Ve=[];return Hn&&Ve.push("dragging"),z&&Ve.push("editing-disabled"),!Lt&&!Be&&Ve.push("drag-disabled"),Yt&&Ve.push("drop-target"),Be&&Ve.push("groupable"),F()&&T===ue.CREATION&&Ve.push("author-editable"),Be?Ve.push("cursor-grab"):x?Ve.push("cursor-default"):z?T==="CREATION"&&Z||!O?Ve.push("cursor-grab"):Ve.push("cursor-not-allowed"):Ve.push("cursor-pointer"),Ve.join(" ")};return m.jsxs("div",{ref:fr,className:`card ${Ci()}`,onClick:Gr,"data-card-id":i,children:[!x&&!(O&&T==="CREATION"&&h)&&mi(T,O)&&!s&&Object.keys(ge.comments||{}).length>0&&m.jsx("div",{className:"card-comment-indicator",title:`${Object.keys(ge.comments||{}).length} comment${Object.keys(ge.comments||{}).length===1?"":"s"}`,children:m.jsx(To,{size:12})}),x?m.jsx(nk,{editedContent:P,setEditedContent:re,handleKeyPress:Ze,saveCardChanges:he,toggleEditMode:Ce,deleteCard:xe}):m.jsxs(m.Fragment,{children:[m.jsx(ik,{cardData:ge,formatContentWithEmojis:ee,upvoteCard:je,downvoteCard:M,votingEnabled:p,downvotingEnabled:g,userId:h==null?void 0:h.uid,retrospectiveMode:O,groupId:s,workflowPhase:T,user:h,disabledReason:ae,children:!(O&&T==="CREATION"&&h)&&mi(T,O)&&!s&&m.jsx(J2,{showEmojiPicker:Y,setShowEmojiPicker:de,setShowComments:se,toggleComments:B,setEmojiPickerPosition:Re,emojiPickerPosition:W,addReaction:Te,hasUserReactedWithEmoji:ce,commentCount:Object.keys(ge.comments||{}).length,disabled:!ar(T,O),disabledReason:ae})}),!(O&&T==="CREATION"&&h)&&mi(T,O)&&!s&&m.jsx(ek,{reactions:ge.reactions,userId:h==null?void 0:h.uid,addReaction:Te,disabled:!ar(T,O),disabledReason:ae}),!(O&&T==="CREATION"&&h)&&mi(T,O)&&!s&&J&&m.jsx(mS,{comments:ge.comments,onAddComment:C,newComment:te,onCommentChange:fe,onEditComment:$,onDeleteComment:U,isCommentAuthor:me,interactionsDisabled:!ar(T,O),disabledReason:ae})]})]})}function rk({boardId:i,columnId:e,groupId:n,groupData:s,user:o,showNotification:c,retrospectiveMode:d=!1,workflowPhase:h="CREATION"}){const[p,g]=A.useState(!1),[_,b]=A.useState(!1),[E,O]=A.useState(""),[T,L]=A.useState({top:0,left:0}),x=A.useRef(null),P=A.useCallback(()=>!ar(h,d),[h,d]),Y=A.useCallback(Ce=>!!(s.reactions&&s.reactions[Ce]&&s.reactions[Ce].users&&s.reactions[Ce].users[o==null?void 0:o.uid]),[s.reactions,o==null?void 0:o.uid]),J=A.useCallback(Ce=>{var he,xe;return((xe=(he=s.reactions)==null?void 0:he[Ce])==null?void 0:xe.count)||0},[s.reactions]),te=A.useCallback(Ce=>{const he=ye(_e,`boards/${i}/columns/${e}/groups/${n}/reactions/${Ce}/users/${o==null?void 0:o.uid}`),xe=ye(_e,`boards/${i}/columns/${e}/groups/${n}/reactions/${Ce}/count`);return{userRef:he,countRef:xe}},[i,e,n,o==null?void 0:o.uid]),W=A.useCallback(async(Ce,he)=>{if(Ce.stopPropagation(),!i||!o)return;if(P()){Mn(h,d)?c("Interactions are now frozen - no more changes allowed"):c("Reactions are disabled until cards are revealed");return}const{userRef:xe,countRef:Ze}=te(he),je=Y(he);try{if(je){await At(xe);const M=Math.max(0,J(he)-1);await De(Ze,M),c("Your reaction removed")}else{await De(xe,!0);const M=J(he)+1;await De(Ze,M),c("Reaction added")}}catch(M){console.error("Error managing reaction:",M)}},[i,o,te,Y,J,c,P,h,d]),re=A.useCallback(async()=>{if(!i||!E.trim())return;if(P()){Mn(h,d)?c("Interactions are now frozen - no more changes allowed"):c("Comments are disabled until cards are revealed");return}const Ce=Ps(),he=ye(_e,`boards/${i}/columns/${e}/groups/${n}/comments/${Ce}`),xe={content:E.trim(),createdBy:o.uid,createdAt:Date.now()};try{await De(he,xe),O(""),c("Comment added")}catch(Ze){console.error("Error adding comment:",Ze),c("Error adding comment")}},[i,e,n,E,o,c,P,h,d]),de=A.useCallback(async(Ce,he)=>{if(!i||!he.trim())return;if(P()){Mn(h,d)?c("Interactions are now frozen - no more changes allowed"):c("Comments are disabled until cards are revealed");return}const xe=ye(_e,`boards/${i}/columns/${e}/groups/${n}/comments/${Ce}/content`);try{await De(xe,he.trim()),c("Comment updated")}catch(Ze){console.error("Error updating comment:",Ze),c("Error updating comment")}},[i,e,n,c,P,h,d]),se=A.useCallback(async Ce=>{if(!i)return;if(P()){Mn(h,d)?c("Interactions are now frozen - no more changes allowed"):c("Comments are disabled until cards are revealed");return}const he=ye(_e,`boards/${i}/columns/${e}/groups/${n}/comments/${Ce}`);try{await At(he),c("Comment deleted")}catch(xe){console.error("Error deleting comment:",xe),c("Error deleting comment")}},[i,e,n,c,P,h,d]),fe=A.useCallback(()=>{b(!_),g(!1)},[_]),Re=A.useCallback(Ce=>(Ce==null?void 0:Ce.createdBy)===(o==null?void 0:o.uid),[o==null?void 0:o.uid]);return{showEmojiPicker:p,showComments:_,newComment:E,emojiPickerPosition:T,emojiButtonRef:x,setShowEmojiPicker:g,setShowComments:b,setNewComment:O,setEmojiPickerPosition:L,hasUserReactedWithEmoji:Y,addReaction:W,addComment:re,editComment:de,deleteComment:se,toggleComments:fe,isCommentAuthor:Re}}function yS({groupId:i,groupData:e,columnId:n,columnData:s,showNotification:o,sortByVotes:c}){var $;const{boardId:d,user:h,moveCard:p,ungroupCards:g,updateGroupName:_,votingEnabled:b,downvotingEnabled:E,upvoteGroup:O,downvoteGroup:T,retrospectiveMode:L,workflowPhase:x}=rn(),P=rk({boardId:d,columnId:n,groupId:i,groupData:e,user:h,showNotification:o,retrospectiveMode:L,workflowPhase:x}),[Y,J]=A.useState(e.expanded!==!1),[te,W]=A.useState(!1),[re,de]=A.useState(e.name||"Unnamed Group"),se=A.useRef(null),Re=L&&!cS(x,L)?{...e,votes:e.voters&&(h!=null&&h.uid)&&e.voters[h.uid]?Math.abs(e.voters[h.uid]):0,voters:e.voters&&(h!=null&&h.uid)?{[h.uid]:e.voters[h.uid]}:{},reactions:e.reactions?Object.fromEntries(Object.entries(e.reactions).filter(([U,B])=>B.users&&(h==null?void 0:h.uid)&&B.users[h.uid]).map(([U,B])=>[U,{count:1,users:{[h.uid]:!0}}])):{},comments:e.comments?Object.fromEntries(Object.entries(e.comments).filter(([U,B])=>B.createdBy===(h==null?void 0:h.uid))):{}}:e,[{isOver:Ce},he]=Wh(()=>({accept:"CARD",drop:U=>{var B;if(!((B=e.cardIds)!=null&&B.includes(U.cardId))&&U.groupId!==i)return p(U.cardId,U.columnId,n,i),o("Card added to group"),{handled:!0}},collect:U=>({isOver:!!U.isOver()})}),[n,i,e.cardIds,p,o]);he(se);const xe=U=>{U.stopPropagation(),O(n,i,e.votes||0,o)},Ze=U=>{U.stopPropagation(),T(n,i,e.votes||0,o)},je=()=>{if(!e.cardIds||!s.cards)return[];const U=e.cardIds.map(B=>{const F=s.cards[B];return F?{id:B,...F}:null}).filter(Boolean);return c?U.sort((B,F)=>(F.votes||0)-(B.votes||0)):U.sort((B,F)=>(B.created||0)-(F.created||0))},M=U=>{de(U.target.value)},ee=()=>{d&&re.trim()&&(_(n,i,re.trim()),W(!1))},ce=U=>{U.key==="Enter"?ee():U.key==="Escape"&&(W(!1),de(e.name||"Unnamed Group"))},Te=()=>{window.confirm("Are you sure you want to ungroup these cards?")&&(g(n,i),o("Cards ungrouped"))},C=e.cardIds?e.cardIds.length:0;return m.jsxs("div",{ref:se,className:`card-group ${Ce?"drag-over":""}`,children:[m.jsxs("div",{className:"card-group-header",onClick:()=>J(!Y),children:[m.jsxs("div",{className:"card-group-title-section",children:[Y?m.jsx(Co,{size:16,className:"expand-icon"}):m.jsx(zc,{size:16,className:"expand-icon"}),te?m.jsx("input",{type:"text",value:re,onChange:M,onBlur:ee,onKeyDown:ce,className:"group-name-input",autoFocus:!0,onClick:U=>U.stopPropagation()}):m.jsxs("div",{className:"group-name-container",children:[m.jsx("h3",{className:`card-group-name ${uo(x,L)?"":"non-editable"}`,onClick:U=>{U.stopPropagation(),uo(x,L)&&W(!0)},children:e.name||"Unnamed Group"}),uo(x,L)&&m.jsx("button",{className:"edit-group-name-btn",onClick:U=>{U.stopPropagation(),W(!0)},title:"Edit group name",children:m.jsx(ep,{size:12})})]})]}),m.jsxs("div",{className:"card-group-actions",children:[b&&mi(x,L)&&m.jsx(vS,{votes:Re.votes||0,onUpvote:xe,onDownvote:Ze,showDownvoteButton:E,disabled:!ar(x,L)}),m.jsxs("div",{className:"card-group-info",children:[m.jsx("span",{className:"card-count-badge",title:`${C} card${C!==1?"s":""}`,children:C}),ar(x,L)&&m.jsx("button",{className:"group-action-btn",onClick:U=>{U.stopPropagation(),Te()},title:"Ungroup cards",children:m.jsx(np,{size:14})})]})]})]}),mi(x,L)&&m.jsxs("div",{className:"group-interactions-section",children:[m.jsxs("div",{className:"group-interactions-left",children:[Re.reactions&&Object.entries(Re.reactions).map(([U,B])=>{if(B.count<=0)return null;const F=B.users&&B.users[h==null?void 0:h.uid];return m.jsxs("span",{className:`reaction-item ${F?"user-reacted":""}`,onClick:me=>{me.stopPropagation(),P.addReaction(me,U)},children:[U," ",B.count]},U)}),m.jsx("button",{className:"interaction-btn reactions-btn",onClick:U=>{var B;if(U.stopPropagation(),(B=P.emojiButtonRef)!=null&&B.current){const F=P.emojiButtonRef.current.getBoundingClientRect();P.setEmojiPickerPosition({top:F.bottom+window.scrollY+5,left:F.left+window.scrollX})}P.setShowEmojiPicker(!P.showEmojiPicker)},title:"Add reaction",ref:P.emojiButtonRef,children:"+"})]}),m.jsx("div",{className:"group-interactions-right",children:m.jsxs("button",{className:`interaction-btn comments-btn ${Object.keys(Re.comments||{}).length>0?"has-comments":""}`,onClick:U=>{U.stopPropagation(),P.toggleComments()},title:"Toggle comments",children:[m.jsx(To,{size:16}),Object.keys(Re.comments||{}).length>0&&m.jsx("span",{className:"interaction-count",children:Object.keys(Re.comments||{}).length})]})})]}),P.showEmojiPicker&&m.jsx(gS,{onEmojiSelect:P.addReaction,position:P.emojiPickerPosition,onClose:()=>P.setShowEmojiPicker(!1),hasUserReactedWithEmoji:P.hasUserReactedWithEmoji}),mi(x,L)&&P.showComments&&m.jsx("div",{className:"group-comments-section",children:m.jsx(mS,{comments:Re.comments,onAddComment:P.addComment,newComment:P.newComment,onCommentChange:P.setNewComment,onEditComment:P.editComment,onDeleteComment:P.deleteComment,isCommentAuthor:P.isCommentAuthor,interactionsDisabled:!ar(x,L)})}),Y&&m.jsx("div",{className:"card-group-content",children:je().length===0?m.jsxs("div",{className:"empty-group-placeholder",children:[m.jsx("span",{children:"No cards in this group"}),m.jsx("span",{children:"Drag cards here to add them"})]}):je().map(U=>m.jsx(rg,{cardId:U.id,cardData:U,columnId:n,groupId:i,showNotification:o},U.id))}),!Y&&C>0&&m.jsx("div",{className:"card-group-preview",children:m.jsx("div",{className:`card-preview main-card ${C>1?"with-stack-shadow":""}`,style:{boxShadow:C>1?`0 2px 8px rgba(0, 0, 0, 0.15), 
                 0 1px 3px rgba(0, 0, 0, 0.1),
                 ${Array.from({length:Math.min(C-1,5)},(U,B)=>{const F=(B+1)*3;return`${F}px ${F}px 0 0 var(--card-bg), ${F}px ${F}px 0 1px var(--border-color)`}).join(", ")}`:"0 2px 8px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1)"},children:m.jsx("div",{className:"card-preview-content",children:($=je()[0])==null?void 0:$.content})})})]})}function sk({columnId:i,columnData:e,sortByVotes:n,showNotification:s}){const{boardId:o,moveCard:c,user:d,createCardGroup:h,retrospectiveMode:p,workflowPhase:g,columns:_,startCardCreation:b,stopCardCreation:E}=rn(),[O,T]=A.useState(e.title||"New Column"),[L,x]=A.useState(!1),[P,Y]=A.useState(""),[J,te]=A.useState(!1),[W,re]=A.useState(!1),[de,se]=A.useState(""),[fe,Re]=A.useState(null),Ce=A.useRef(null);A.useEffect(()=>{e&&e.title!==O&&!L&&T(e.title)},[e,L,O]),A.useEffect(()=>{p&&!Vf(g,p)&&J&&(te(!1),E())},[g,p,J,E,i]);const[{isOver:he},xe]=Wh(()=>({accept:"CARD",drop:(z,oe)=>{oe.didDrop()||(z.columnId!==i?(c(z.cardId,z.columnId,i),s("Card moved successfully")):z.groupId&&(c(z.cardId,z.columnId,i,null),s("Card removed from group")))},collect:z=>({isOver:!!z.isOver()})}),[i,c,s]);xe(Ce);const Ze=z=>{T(z.target.value)},je=()=>{if(o){const z=`boards/${o}/columns/${i}/title`,oe=ye(_e,z);De(oe,O).then(()=>{x(!1)}).catch(()=>{})}},M=z=>{z.key==="Enter"&&je()},ee=()=>{if(o&&window.confirm("Are you sure you want to delete this column and all its cards?")){const z=ye(_e,`boards/${o}/columns/${i}`);At(z).then(()=>{s("Column deleted")}).catch(()=>{})}},ce=()=>{te(!0),Y(""),b(i)},Te=()=>{te(!1),Y(""),E()},C=()=>{o&&P.trim()?Y2(o,i,P,d).then(z=>{s("Card added"),Te(),setTimeout(()=>{const oe=document.querySelector(`[data-card-id="${z}"]`);oe&&(oe.style.boxShadow="0 0 10px rgba(74, 144, 226, 0.6)",oe.style.transition="box-shadow 2s ease-out",setTimeout(()=>{oe.style.boxShadow=""},2e3))},100)}).catch(z=>{z.message==="Card content is required"&&(Te(),s("Empty cards are not allowed"))}):(Te(),s("Empty cards are not allowed"))},$=z=>{z.key==="Enter"&&!z.shiftKey?(z.preventDefault(),C()):z.key==="Escape"&&Te()},U=()=>{if(!e.cards)return[];const z=Object.entries(e.cards).filter(([oe,ge])=>!ge.groupId).map(([oe,ge])=>({id:oe,...ge}));return n?z.sort((oe,ge)=>(ge.votes||0)-(oe.votes||0)):z.sort((oe,ge)=>(ge.created||0)-(oe.created||0))},B=()=>{if(!e.groups)return[];const z=Object.entries(e.groups).map(([oe,ge])=>({id:oe,...ge}));return n?z.sort((oe,ge)=>(ge.votes||0)-(oe.votes||0)):z.sort((oe,ge)=>(ge.created||0)-(oe.created||0))},F=()=>{const z=U().map(ge=>({type:"card",data:ge})),oe=B().map(ge=>({type:"group",data:ge}));return n?[...z,...oe].sort((ge,$e)=>($e.data.votes||0)-(ge.data.votes||0)):[...oe,...z].sort(($e,Be)=>(Be.data.created||0)-($e.data.created||0))},me=(z,oe)=>{if(!uo(g,p)||z===oe)return;let ge=null;if(Object.keys(_||{}).forEach($e=>{_[$e].cards&&_[$e].cards[z]&&(ge=$e)}),!ge){s("Error: Could not find dragged card");return}Re({draggedCardId:z,targetCardId:oe,draggedCardColumn:ge,targetCardColumn:i}),re(!0),se("")},ae=()=>{var z;if(!de.trim()){s("Please enter a group name");return}if(fe){const{draggedCardId:oe,targetCardId:ge,draggedCardColumn:$e,targetCardColumn:Be}=fe,fn=(z=e.cards)==null?void 0:z[ge],Lt=fn==null?void 0:fn.created;$e===Be?(h(i,[oe,ge],de.trim(),Lt),s(`Group "${de.trim()}" created`)):c(oe,$e,Be,null).then(()=>{h(Be,[oe,ge],de.trim(),Lt),s(`Card moved and group "${de.trim()}" created`)}).catch(()=>{s("Error creating group across columns")})}re(!1),se(""),Re(null)},Z=()=>{re(!1),se(""),Re(null)};return m.jsxs("div",{className:"column",children:[m.jsxs("div",{className:"column-header",children:[L?m.jsx("input",{type:"text",value:O,onChange:Ze,onBlur:je,onKeyPress:M,className:"column-title-input",autoFocus:!0}):m.jsx("h2",{className:"column-title",onClick:()=>x(!0),children:O}),m.jsx("div",{className:"column-actions",children:Vf(g,p)&&m.jsx("button",{className:"icon-button",title:"Delete Column",onClick:ee,children:m.jsx(dp,{})})})]}),m.jsxs("div",{ref:Ce,className:`column-content ${he?"drag-over":""}`,children:[B().length===0&&U().length===0&&m.jsxs("div",{className:"empty-column-placeholder",children:[m.jsx("span",{children:"No cards yet"}),m.jsx("span",{children:"Add a card to get started"})]}),J?m.jsxs("div",{className:"inline-card-form",children:[m.jsx("textarea",{placeholder:"Enter card content...",value:P,onChange:z=>Y(z.target.value),onKeyDown:$,className:"inline-card-textarea",autoFocus:!0}),m.jsxs("div",{className:"inline-card-actions",children:[m.jsx("button",{className:"btn primary-btn",onClick:C,children:"Add"}),m.jsx("button",{className:"btn secondary-btn",onClick:Te,children:"Cancel"})]})]}):Vf(g,p)&&m.jsxs("button",{className:"add-card",onClick:ce,children:[m.jsx(Hc,{}),"Add Card"]}),F().map(z=>z.type==="group"?m.jsx(yS,{groupId:z.data.id,groupData:z.data,columnId:i,columnData:e,sortByVotes:n,showNotification:s},z.data.id):m.jsx(rg,{cardId:z.data.id,cardData:z.data,columnId:i,showNotification:s,onCardDropOnCard:me},z.data.id)),W&&m.jsx("div",{className:"group-modal-overlay",onClick:Z,children:m.jsxs("div",{className:"group-modal",onClick:z=>z.stopPropagation(),children:[m.jsx("h3",{children:"Create Card Group"}),m.jsx("p",{children:"Creating a group with 2 cards"}),m.jsx("input",{type:"text",placeholder:"Enter group name...",value:de,onChange:z=>se(z.target.value),onKeyDown:z=>{z.key==="Enter"&&ae(),z.key==="Escape"&&Z()},className:"group-name-input",autoFocus:!0}),m.jsxs("div",{className:"group-modal-actions",children:[m.jsx("button",{className:"btn primary-btn",onClick:ae,children:"Create Group"}),m.jsx("button",{className:"btn secondary-btn",onClick:Z,children:"Cancel"})]})]})})]})]})}const ak=({isOpen:i,onClose:e,showNotification:n})=>{const[s,o]=A.useState("markdown"),[c,d]=A.useState(""),{boardTitle:h,columns:p}=rn(),g=A.useCallback(()=>{const O={title:h||Mr,columns:[]};return!p||Object.keys(p).length===0||Object.entries(p).sort((L,x)=>L[0].localeCompare(x[0])).forEach(([L,x])=>{if(!x)return;const P={title:x.title||"Untitled Column",cards:[]},Y=[],J=[];x.groups&&Object.entries(x.groups).forEach(([te,W])=>{if(!W||!W.cardIds)return;const re={name:W.name,votes:W.votes||0,comments:[],reactions:[],cards:[]};W.comments&&Object.keys(W.comments).length>0&&Object.entries(W.comments).forEach(([de,se])=>{se&&se.content&&re.comments.push(se.content)}),W.reactions&&Object.keys(W.reactions).length>0&&Object.entries(W.reactions).filter(([se,fe])=>((fe==null?void 0:fe.count)||0)>0).forEach(([se,fe])=>{if(se){const Re=(fe==null?void 0:fe.count)||0;re.reactions.push({emoji:se,count:Re})}}),W.cardIds.forEach(de=>{var fe;const se=(fe=x.cards)==null?void 0:fe[de];if(se){const Re={content:se.content,votes:se.votes||0,comments:[],reactions:[]};se.comments&&Object.keys(se.comments).length>0&&Object.entries(se.comments).forEach(([Ce,he])=>{he&&he.content&&Re.comments.push(he.content)}),se.reactions&&Object.keys(se.reactions).length>0&&Object.entries(se.reactions).filter(([he,xe])=>((xe==null?void 0:xe.count)||0)>0).forEach(([he,xe])=>{if(he){const Ze=(xe==null?void 0:xe.count)||0;Re.reactions.push({emoji:he,count:Ze})}}),re.cards.push(Re)}}),Y.push(re)}),x.cards&&Object.entries(x.cards).forEach(([te,W])=>{if(!W.groupId){const re={content:W.content,votes:W.votes||0,comments:[],reactions:[]};W.comments&&Object.keys(W.comments).length>0&&Object.entries(W.comments).forEach(([de,se])=>{se&&se.content&&re.comments.push(se.content)}),W.reactions&&Object.keys(W.reactions).length>0&&Object.entries(W.reactions).filter(([se,fe])=>((fe==null?void 0:fe.count)||0)>0).forEach(([se,fe])=>{if(se){const Re=(fe==null?void 0:fe.count)||0;re.reactions.push({emoji:se,count:Re})}}),J.push(re)}}),P.groups=Y,P.cards=J,O.columns.push(P)}),O},[p,h]),_=A.useCallback(()=>{const O=g();let T=`# ${O.title}

`;return O.columns.length===0?`${T}No columns found.`:(O.columns.forEach(L=>{T+=`## ${L.title}

`,L.groups&&L.groups.length>0&&L.groups.forEach(x=>{const P=x.votes;T+=`### 📁 ${x.name} ${P>0?`(${P} votes)`:""}

`,x.comments.length>0&&(T+=`**Group Comments:**
`,x.comments.forEach(Y=>{T+=`- ${Y}
`}),T+=`
`),x.reactions.length>0&&(T+="**Group Reactions:** ",x.reactions.forEach((Y,J,te)=>{T+=`${Y.emoji} (${Y.count})${J<te.length-1?", ":""}`}),T+=`

`),x.cards.forEach(Y=>{const J=Y.votes;T+=`- **${Y.content}** ${J>0?`(${J} votes)`:""}
`,Y.comments.length>0&&(T+=`  - **Comments:**
`,Y.comments.forEach(te=>{T+=`    - ${te}
`})),Y.reactions.length>0&&(T+="  - **Reactions:** ",Y.reactions.forEach((te,W,re)=>{T+=`${te.emoji} (${te.count})${W<re.length-1?", ":""}`}),T+=`
`),T+=`
`}),T+=`
`}),L.cards.forEach(x=>{const P=x.votes;T+=`### ${x.content} ${P>0?`(${P} votes)`:""}

`,x.comments.length>0&&(T+=`**Comments:**

`,x.comments.forEach(Y=>{T+=`- ${Y}
`}),T+=`
`),x.reactions.length>0&&(T+="**Reactions:** ",x.reactions.forEach((Y,J,te)=>{T+=`${Y.emoji} (${Y.count})${J<te.length-1?", ":""}`}),T+=`

`)}),T+=`
`}),T)},[g]),b=A.useCallback(()=>{const O=g();let T=`${O.title}

`;return O.columns.length===0?`${T}No columns found.`:(O.columns.forEach(L=>{const x=L.title;T+=`${x}
${"=".repeat(x.length)}

`,L.groups&&L.groups.length>0&&L.groups.forEach(P=>{const Y=P.votes,J=`📁 ${P.name} ${Y>0?`(${Y} votes)`:""}`;T+=`${J}
${"-".repeat(J.length)}

`,P.comments.length>0&&(T+=`Group Comments:
`,P.comments.forEach(te=>{T+=`- ${te}
`}),T+=`
`),P.reactions.length>0&&(T+="Group Reactions: ",P.reactions.forEach((te,W,re)=>{T+=`${te.emoji} (${te.count})${W<re.length-1?", ":""}`}),T+=`

`),P.cards.forEach(te=>{const W=te.votes,re=`  • ${te.content} ${W>0?`(${W} votes)`:""}`;T+=`${re}
`,te.comments.length>0&&(T+=`    Comments:
`,te.comments.forEach(de=>{T+=`    - ${de}
`})),te.reactions.length>0&&(T+="    Reactions: ",te.reactions.forEach((de,se,fe)=>{T+=`${de.emoji} (${de.count})${se<fe.length-1?", ":""}`}),T+=`
`),T+=`
`}),T+=`
`}),L.cards.forEach(P=>{const Y=P.votes,J=P.content;T+=`${J} ${Y>0?`(${Y} votes)`:""}
${"-".repeat(J.length)}

`,P.comments.length>0&&(T+=`Comments:
`,P.comments.forEach(te=>{T+=`- ${te}
`}),T+=`
`),P.reactions.length>0&&(T+="Reactions: ",P.reactions.forEach((te,W,re)=>{T+=`${te.emoji} (${te.count})${W<re.length-1?", ":""}`}),T+=`

`)}),T+=`
`}),T)},[g]);A.useEffect(()=>{if(i)try{d(s==="markdown"?_():b())}catch{d("Error generating export. Please try again.")}},[i,s,p,h,_,b]);const E=()=>{navigator.clipboard.writeText(c).then(()=>{n&&n("Copied to clipboard"),e()}).catch(()=>{})};return i?m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container",children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Export Board"}),m.jsx("button",{className:"close-button",onClick:e,children:"×"})]}),m.jsxs("div",{className:"modal-body",children:[m.jsxs("div",{className:"format-selector",children:[m.jsx("div",{className:"format-option",children:m.jsxs("label",{className:`format-label ${s==="markdown"?"selected":""}`,children:[m.jsx("input",{type:"radio",value:"markdown",checked:s==="markdown",onChange:()=>o("markdown"),className:"format-radio"}),m.jsx("span",{className:"format-name",children:"Markdown"})]})}),m.jsx("div",{className:"format-option",children:m.jsxs("label",{className:`format-label ${s==="plaintext"?"selected":""}`,children:[m.jsx("input",{type:"radio",value:"plaintext",checked:s==="plaintext",onChange:()=>o("plaintext"),className:"format-radio"}),m.jsx("span",{className:"format-name",children:"Plain Text"})]})})]}),m.jsx("div",{className:"export-preview",children:m.jsx("textarea",{readOnly:!0,value:c,className:"export-content"})})]}),m.jsxs("div",{className:"modal-footer",children:[m.jsxs("button",{className:"primary-button",onClick:E,children:[m.jsx(Jh,{size:16}),"Copy to Clipboard"]}),m.jsx("button",{className:"secondary-button",onClick:e,children:"Cancel"})]})]})}):null},no=[{id:"default",name:"Default",description:"Simple task tracking for any project",columns:["To Do","In Progress","Done"],icon:"📋",tags:["workflow","kanban","basic"]},{id:"custom",name:"Custom",description:"Create your own board structure from scratch",columns:["Untitled"],icon:"✏️",tags:["custom","blank","flexible"]},{id:"lean-coffee",name:"Lean Coffee",description:"Democratically driven meeting agenda format",columns:["Topics","Discussing","Done"],icon:"☕",tags:["discussion","meeting","agenda"]},{id:"retro",name:"Retrospective",description:"Reflect on past work and plan improvements",columns:["Went Well","Could Improve","Action Items"],icon:"🔄",tags:["agile","reflection","team"]},{id:"feelings-improvements",name:"Feelings / Improvements",description:"Focus on emotional impact and concrete solutions",columns:["Feelings","Improvements"],icon:"❤️",tags:["feedback","emotions","solutions"]},{id:"daki",name:"DAKI",description:"Evaluate current processes and identify changes",columns:["Drop","Add","Keep","Improve"],icon:"✨",tags:["reflection","processes","practices"]},{id:"glad-sad-mad",name:"Glad Sad Mad",description:"Categorize feedback by emotional response",columns:["Glad","Sad","Mad"],icon:"😊",tags:["emotions","reflection","feedback"]},{id:"start-stop-continue",name:"Start Stop Continue",description:"Focus on actionable changes to team behavior",columns:["Start","Stop","Continue"],icon:"🚦",tags:["action","feedback","improvement"]},{id:"4ls",name:"4 Ls",description:"Comprehensive retrospective with learning focus",columns:["Liked","Learned","Lacked","Longed For"],icon:"📝",tags:["reflection","learning","retrospective"]},{id:"swot",name:"SWOT",description:"Analyze internal and external factors for planning",columns:["Strengths","Weaknesses","Opportunities","Threats"],icon:"📊",tags:["strategy","planning","analysis"]},{id:"six-thinking-hats",name:"Six Thinking Hats",description:"Examine ideas from multiple mental perspectives",columns:["Facts","Emotions","Critical","Optimistic","Creative","Process"],icon:"🎩",tags:["thinking","perspectives","discussion"]},{id:"moscow",name:"MoSCoW",description:"Categorize features by implementation priority",columns:["Must Have","Should Have","Could Have","Won't Have"],icon:"📌",tags:["prioritization","planning","requirements"]},{id:"five-whys",name:"Five Whys",description:"Iteratively identify the underlying causes of issues",columns:["Problem","Why 1","Why 2","Why 3","Why 4","Why 5","Root Cause"],icon:"🔍",tags:["problem solving","analysis","causes"]},{id:"eisenhower",name:"Eisenhower Matrix",description:"Prioritize tasks based on urgency and importance",columns:["Urgent & Important","Important & Not Urgent","Urgent & Not Important","Neither"],icon:"⏱️",tags:["decision","prioritization","time management"]},{id:"sailboat",name:"Sailboat Retrospective",description:"Visualize team progress with nautical metaphors",columns:["Wind (Helps)","Anchors (Hinders)","Rocks (Risks)","Island (Goals)"],icon:"⛵",tags:["retrospective","visual","team"]},{id:"fishbone",name:"Fishbone",description:"Identify causes across different categories",columns:["People","Process","Equipment","Materials","Environment","Management"],icon:"🐟",tags:["analysis","causes","problem solving"]},{id:"feedback-grid",name:"Feedback Grid",description:"Balanced approach to feedback with action items",columns:["What Went Well","What Could Be Improved","Questions","Ideas"],icon:"🔄",tags:["feedback","collection","reflection"]},{id:"starfish",name:"Starfish Retrospective",description:"Detailed action-oriented team improvement model",columns:["Keep Doing","Less Of","More Of","Start Doing","Stop Doing"],icon:"⭐",tags:["retrospective","actions","team"]},{id:"kpt",name:"KPT",description:"Concise approach for identifying issues and solutions",columns:["Keep","Problem","Try"],icon:"🔑",tags:["retrospective","simple","actions"]},{id:"pro-con",name:"Pros & Cons",description:"Evaluate options and make informed decisions",columns:["Pros","Cons","Decisions"],icon:"⚖️",tags:["decision","evaluation","analysis"]},{id:"user-journey",name:"User Journey Map",description:"Map out each stage of the user experience",columns:["Awareness","Consideration","Decision","Onboarding","Retention","Advocacy"],icon:"🗺️",tags:["ux","design","customer"]},{id:"three-horizons",name:"Three Horizons",description:"Strategic planning across different time frames",columns:["Horizon 1 (Now)","Horizon 2 (Next)","Horizon 3 (Future)"],icon:"🔭",tags:["strategy","planning","innovation"]},{id:"impact-effort",name:"Impact/Effort Matrix",description:"Prioritize tasks based on impact and required effort",columns:["High Impact/Low Effort","High Impact/High Effort","Low Impact/Low Effort","Low Impact/High Effort"],icon:"📊",tags:["prioritization","planning","efficiency"]},{id:"assumption-mapping",name:"Assumption Mapping",description:"Identify and test critical business assumptions",columns:["Known Knowns","Known Unknowns","Unknown Knowns","Unknown Unknowns"],icon:"🧠",tags:["strategy","risk","planning"]},{id:"customer-problem-solution",name:"Customer-Problem-Solution",description:"Framework for validating business model assumptions",columns:["Customer Segments","Problems","Solutions","Value Propositions"],icon:"💡",tags:["business","startup","validation"]},{id:"work-breakdown",name:"Work Breakdown Structure",description:"Hierarchical decomposition of project deliverables",columns:["Project","Major Deliverables","Sub-deliverables","Work Packages","Tasks"],icon:"📑",tags:["project management","planning","organization"]},{id:"five-stage-design",name:"Five Stage Design Thinking",description:"Human-centered approach to innovation",columns:["Empathize","Define","Ideate","Prototype","Test"],icon:"🎨",tags:["design","innovation","process"]},{id:"rose-thorn-bud",name:"Rose, Thorn, Bud",description:"Review positives, challenges, and opportunities",columns:["Rose (Positive)","Thorn (Challenge)","Bud (Opportunity)"],icon:"🌹",tags:["feedback","reflection","opportunity"]},{id:"four-quadrant-feedback",name:"Four Quadrant Feedback",description:"Balanced personal or project feedback",columns:["Continue","Consider","Start","Stop"],icon:"📝",tags:["feedback","personal","development"]}],ok=({isOpen:i,onClose:e,onSelectTemplate:n})=>{const[s,o]=A.useState("default"),[c,d]=A.useState(""),[h,p]=A.useState(no);A.useEffect(()=>{if(!c.trim()){p(no);return}const x=c.toLowerCase().trim(),P=no.filter(Y=>Y.name.toLowerCase().includes(x)||Y.description.toLowerCase().includes(x)||Y.tags.some(J=>J.toLowerCase().includes(x))||Y.columns.some(J=>J.toLowerCase().includes(x)));p(P)},[c]);const g=x=>{o(x)},_=()=>{const x=no.find(P=>P.id===s);x&&n(x.columns,x.name)},b=x=>{d(x.target.value)},E=X.useRef(null),O=X.useRef(null),T=x=>{x.key==="Enter"&&x.target.classList.contains("template-search-input")?h.length>0&&(o(h[0].id),x.preventDefault()):x.key==="Enter"&&!x.target.classList.contains("template-search-input")?(_(),x.preventDefault()):x.key==="Escape"?c?(d(""),E.current&&E.current.focus(),x.preventDefault()):e():x.key==="/"&&!x.target.classList.contains("template-search-input")&&E.current&&(E.current.focus(),x.preventDefault())};if(X.useEffect(()=>{i&&E.current&&setTimeout(()=>{E.current.focus()},100)},[i]),X.useEffect(()=>{if(i)return document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[i,s,c,h]),!i)return null;const L=(x,P)=>{if(!P.trim())return x;try{const Y=new RegExp(`(${P.trim()})`,"gi");return x.replace(Y,"<mark>$1</mark>")}catch{return x}};return m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container template-modal",children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Choose a Board Template"}),m.jsx("button",{className:"close-button",onClick:e,children:"×"})]}),m.jsxs("div",{className:"modal-body template-selector",children:[m.jsxs("div",{className:"template-search",children:[m.jsxs("div",{className:"search-input-container",children:[m.jsx("input",{type:"text",placeholder:"Search templates by name, description, or columns... (Press / to focus)",value:c,onChange:b,className:"template-search-input",autoFocus:!0,ref:E}),c&&m.jsx("button",{className:"clear-search",onClick:()=>d(""),title:"Clear search",children:"×"})]}),m.jsx("div",{className:"search-results-count",children:c?h.length===0?m.jsx("div",{className:"no-results",children:"No templates match your search"}):m.jsxs("div",{className:"results-count",children:["Found ",h.length," template",h.length!==1?"s":""]}):null})]}),m.jsx("div",{className:"template-grid",children:h.map(x=>{const P=c?m.jsx("span",{dangerouslySetInnerHTML:{__html:L(x.name,c)}}):x.name,Y=c?m.jsx("span",{dangerouslySetInnerHTML:{__html:L(x.description,c)}}):x.description;return m.jsxs("div",{className:`template-card ${s===x.id?"selected":""} ${c?"search-active":""}`,onClick:()=>g(x.id),children:[m.jsx("div",{className:"template-icon",children:x.icon}),m.jsxs("div",{className:"template-info",children:[m.jsx("h3",{children:P}),m.jsx("p",{children:Y})]}),m.jsxs("div",{className:"template-details",children:[m.jsx("div",{className:"template-columns",children:x.columns.map((J,te)=>m.jsx("span",{className:"template-column-pill",children:c?m.jsx("span",{dangerouslySetInnerHTML:{__html:L(J,c)}}):J},te))}),m.jsx("div",{className:"template-tags",children:x.tags.map((J,te)=>m.jsx("span",{className:`template-tag ${c&&J.toLowerCase().includes(c.toLowerCase())?"highlight":""}`,children:J},te))})]})]},x.id)})})]}),m.jsxs("div",{className:"modal-footer",children:[m.jsx("button",{className:"primary-button",onClick:_,ref:O,children:"Create Board"}),m.jsx("button",{className:"secondary-button",onClick:e,children:"Cancel"})]})]})})},lk=()=>{const{getPollStats:i}=rn(),e=i(),n=c=>e.totalVotes===0?0:c/e.totalVotes*100,o=(c=>c>=4.5?{text:"Extremely Effective",color:"#22c55e"}:c>=3.5?{text:"Very Effective",color:"#84cc16"}:c>=2.5?{text:"Moderately Effective",color:"#eab308"}:c>=1.5?{text:"Slightly Effective",color:"#f97316"}:{text:"Not Effective",color:"#ef4444"})(e.average);return m.jsxs("div",{className:"poll-results",children:[m.jsxs("div",{className:"results-header",children:[m.jsx("h3",{children:"Retrospective Effectiveness Results"}),m.jsxs("div",{className:"participation-stats",children:[m.jsx(wo,{size:16}),m.jsxs("span",{children:[e.totalVotes," participant",e.totalVotes!==1?"s":""]})]})]}),e.totalVotes>0?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"overall-score",children:[m.jsxs("div",{className:"score-display",children:[m.jsxs("div",{className:"average-rating",children:[m.jsx("span",{className:"score-number",children:e.average.toFixed(1)}),m.jsx("span",{className:"score-separator",children:"/"}),m.jsx("span",{className:"score-max",children:"5.0"})]}),m.jsx("div",{className:"stars-display",children:[1,2,3,4,5].map(c=>m.jsx(Ir,{size:20,fill:e.average>=c?"#ffd700":"none",color:e.average>=c?"#ffd700":"#ccc"},c))})]}),m.jsx("div",{className:"effectiveness-label",style:{color:o.color},children:o.text})]}),m.jsxs("div",{className:"distribution-chart",children:[m.jsx("h4",{children:"Vote Distribution"}),m.jsx("div",{className:"chart",children:e.distribution.map((c,d)=>{const h=d+1,p=(c/e.totalVotes*100).toFixed(1);return m.jsxs("div",{className:"chart-row",children:[m.jsxs("div",{className:"rating-label",children:[m.jsx(Ir,{size:14,fill:"#ffd700",color:"#ffd700"}),m.jsx("span",{children:h})]}),m.jsx("div",{className:"bar-container",children:m.jsx("div",{className:"bar",style:{width:`${n(c)}%`,backgroundColor:h>=4?"#22c55e":h>=3?"#84cc16":h>=2?"#eab308":"#ef4444"}})}),m.jsxs("div",{className:"count-label",children:[m.jsx("span",{className:"count",children:c}),m.jsxs("span",{className:"percentage",children:["(",p,"%)"]})]})]},h)})})]}),m.jsx("div",{className:"results-summary",children:m.jsxs("div",{className:"summary-cards",children:[m.jsxs("div",{className:"summary-card",children:[m.jsx("h5",{children:"Highest Rating"}),m.jsxs("div",{className:"summary-value",children:[Math.max(...e.distribution.map((c,d)=>c>0?d+1:0)),m.jsx(Ir,{size:14,fill:"#ffd700",color:"#ffd700"})]})]}),m.jsxs("div",{className:"summary-card",children:[m.jsx("h5",{children:"Most Common"}),m.jsxs("div",{className:"summary-value",children:[e.distribution.indexOf(Math.max(...e.distribution))+1,m.jsx(Ir,{size:14,fill:"#ffd700",color:"#ffd700"})]})]}),m.jsxs("div",{className:"summary-card",children:[m.jsx("h5",{children:"Response Rate"}),m.jsx("div",{className:"summary-value",children:"100%"})]})]})})]}):m.jsxs("div",{className:"no-votes",children:[m.jsx("p",{children:"No votes have been submitted yet."}),m.jsx("p",{children:"Participants need to complete the poll phase first."})]})]})},ck=()=>{const{userPollVote:i,submitPollVote:e,getPollStats:n,activeUsers:s}=rn(),[o,c]=A.useState(0),d=T=>{e(T)},h=T=>{c(T)},p=()=>{c(0)},g=T=>({1:"Not effective at all",2:"Slightly effective",3:"Moderately effective",4:"Very effective",5:"Extremely effective"})[T]||"",_=()=>o||i||0,E=n().totalVotes,O=s>0?Math.round(E/s*100):0;return m.jsxs("div",{className:"poll-voting",children:[m.jsxs("div",{className:"poll-question",children:[m.jsx("h3",{children:"How effective was this retrospective?"}),m.jsx("p",{children:"Rate from 1 (not effective) to 5 (extremely effective)"})]}),m.jsxs("div",{className:"voting-progress",children:[m.jsxs("div",{className:"progress-header",children:[m.jsxs("div",{className:"progress-title",children:[m.jsx(wo,{size:16}),m.jsx("span",{children:"Voting Progress"})]}),m.jsxs("div",{className:"progress-stats",children:[E," of ",s," participants have voted (",O,"%)"]})]}),m.jsx("div",{className:"progress-bar",children:m.jsx("div",{className:"progress-fill",style:{width:`${O}%`}})}),O===100&&s>0&&m.jsx("div",{className:"progress-complete",children:"✓ All participants have voted! Ready to view results."})]}),m.jsxs("div",{className:"rating-container",children:[m.jsx("div",{className:"stars",children:[1,2,3,4,5].map(T=>m.jsx("button",{className:`star-button ${_()>=T?"active":""}`,onClick:()=>d(T),onMouseEnter:()=>h(T),onMouseLeave:p,disabled:!1,children:m.jsx(Ir,{size:32,fill:_()>=T?"#ffd700":"none",color:_()>=T?"#ffd700":"#ccc"})},T))}),m.jsxs("div",{className:"rating-info",children:[m.jsx("div",{className:"rating-number",children:_()>0&&m.jsxs("span",{className:"current-rating",children:[_(),"/5"]})}),m.jsx("div",{className:"rating-description",children:_()>0&&g(_())})]})]}),i&&m.jsxs("div",{className:"vote-status",children:[m.jsxs("p",{className:"vote-submitted",children:["✓ Your vote has been submitted: ",i,"/5 stars"]}),m.jsx("p",{className:"vote-change-info",children:"You can change your vote by clicking a different star rating."})]}),!i&&m.jsx("div",{className:"vote-prompt",children:m.jsx("p",{children:"Click on a star to submit your rating"})})]})},uk=({showNotification:i})=>{const{workflowPhase:e,resultsViewIndex:n,navigateResults:s,getSortedItemsForResults:o,columns:c,getTotalVotes:d}=rn();if(e!==ue.RESULTS)return null;const h=o(),p=h[n],g=h.length;if(g===0)return m.jsxs("div",{className:"results-view",children:[m.jsx("div",{className:"results-header",children:m.jsx("h2",{children:"Results"})}),m.jsx("div",{className:"results-content",children:m.jsx("div",{className:"no-results",children:m.jsx("p",{children:"No cards or groups to display in results."})})})]});if(!p)return m.jsxs("div",{className:"results-view",children:[m.jsx("div",{className:"results-header",children:m.jsx("h2",{children:"Results"})}),m.jsx("div",{className:"results-content",children:m.jsx("div",{className:"no-results",children:m.jsx("p",{children:"Invalid result index."})})})]});const _=c[p.columnId];return m.jsxs("div",{className:"results-view",children:[m.jsx("div",{className:"results-header",children:m.jsx("h2",{children:"Results"})}),m.jsxs("div",{className:"results-navigation",children:[m.jsxs("button",{className:"btn navigation-btn",onClick:()=>s("prev"),disabled:n===0,title:"Previous result",children:[m.jsx(Xh,{size:20}),"Previous"]}),m.jsxs("div",{className:"results-counter",children:[m.jsx("span",{className:"current-position",children:n+1}),m.jsx("span",{className:"divider",children:" / "}),m.jsx("span",{className:"total-count",children:g})]}),m.jsxs("button",{className:"btn navigation-btn",onClick:()=>s("next"),disabled:n===g-1,title:"Next result",children:["Next",m.jsx(zc,{size:20})]})]}),m.jsx("div",{className:"results-content",children:m.jsxs("div",{className:"result-item",children:[m.jsxs("div",{className:"result-meta",children:[m.jsx("div",{className:"result-type",children:p.type==="group"?"Group":"Card"}),m.jsxs("div",{className:"result-votes",children:[p.votes," out of ",d()," total vote",d()!==1?"s":""]}),m.jsxs("div",{className:"result-column",children:["from ",(_==null?void 0:_.title)||"Unknown Column"]})]}),m.jsx("div",{className:"result-display",children:p.type==="group"?m.jsx(yS,{groupId:p.id,groupData:p.data,columnId:p.columnId,columnData:_,sortByVotes:!0,showNotification:i},p.id):m.jsx(rg,{cardId:p.id,cardData:p.data,columnId:p.columnId,showNotification:i},p.id)})]})})]})},_S=()=>{const{votingEnabled:i,retrospectiveMode:e,workflowPhase:n,user:s,activeUsers:o}=rn(),c=i&&e&&mi(n,e);return{isUserVoteCounterVisible:c&&!!s,isTotalVoteCounterVisible:c&&!!o,isBaseVisible:c,votingEnabled:i,retrospectiveMode:e,workflowPhase:n,user:s,activeUsers:o}},bS=({className:i,label:e,value:n,total:s,isDepleted:o=!1,testId:c})=>{const d=s!==void 0?`${n}/${s}`:n,h=o?`${i}-depleted`:"";return m.jsx("div",{className:i,"data-testid":c,children:m.jsxs("div",{className:`${i}-content`,children:[m.jsx("span",{className:`${i}-label`,children:e}),m.jsx("span",{className:`${i}-value ${h}`,children:d})]})})},dk=()=>{const{isTotalVoteCounterVisible:i}=_S(),{votesPerUser:e,getTotalVotesRemaining:n,activeUsers:s}=rn();if(!i)return null;const o=n(),c=s*e;return m.jsx(bS,{className:"total-vote-counter",label:"Total votes remaining:",value:o,total:c,isDepleted:o===0})};function fk(){const{activeUsers:i,boardId:e}=rn();return e?m.jsxs("div",{className:"user-counter",title:`${i} ${i===1?"user":"users"} viewing this board`,children:[m.jsx(wo,{size:16}),m.jsx("span",{className:"user-count",children:i})]}):null}const hk=()=>{const{isUserVoteCounterVisible:i}=_S(),{user:e,votesPerUser:n,getUserVoteCount:s}=rn();if(!i)return null;const o=s(e.uid),c=Math.max(0,n-o);return m.jsx(bS,{className:"vote-counter",label:"Your votes remaining:",value:c,total:n,isDepleted:c===0})},pk=({isOpen:i,onClose:e,onConfirm:n,currentLimit:s=3})=>{const[o,c]=A.useState(s);if(!i)return null;const d=()=>{n(o),e()},h=p=>{const g=parseInt(p.target.value);!isNaN(g)&&g>=1&&g<=20&&c(g)};return m.jsx("div",{className:"modal-overlay",onClick:e,children:m.jsxs("div",{className:"modal-container",onClick:p=>p.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Set Vote Limit"}),m.jsx("button",{className:"close-button",onClick:e,children:"×"})]}),m.jsx("div",{className:"modal-body",children:m.jsxs("div",{className:"vote-limit-content",children:[m.jsx("p",{className:"vote-limit-description",children:"How many votes should each user be allowed to cast during the voting phase?"}),m.jsxs("div",{className:"vote-limit-input-section",children:[m.jsx("label",{htmlFor:"votes-per-user",children:"Votes per user:"}),m.jsxs("div",{className:"vote-limit-input-container",children:[m.jsx("input",{id:"votes-per-user",type:"number",min:"1",max:"20",value:o,onChange:h,className:"vote-limit-input"}),m.jsx("span",{className:"vote-limit-input-suffix",children:"votes"})]})]}),m.jsxs("div",{className:"vote-limit-examples",children:[m.jsx("p",{className:"vote-limit-examples-title",children:"Common settings:"}),m.jsx("div",{className:"vote-limit-preset-buttons",children:[1,3,5,10].map(p=>m.jsx("button",{className:`vote-limit-preset ${o===p?"active":""}`,onClick:()=>c(p),children:p},p))})]}),m.jsx("div",{className:"vote-limit-info",children:m.jsx("p",{children:"This setting controls the maximum number of votes each participant can cast across all cards and groups. Users will see their remaining vote count as they vote."})})]})}),m.jsxs("div",{className:"modal-footer",children:[m.jsx("button",{className:"primary-button",onClick:d,children:"Start Voting Phase"}),m.jsx("button",{className:"secondary-button",onClick:e,children:"Cancel"})]})]})})},gk=({showNotification:i})=>{const[e,n]=A.useState(!1),{workflowPhase:s,votesPerUser:o,updateVotesPerUser:c,startGroupingPhase:d,startInteractionsPhase:h,startInteractionRevealPhase:p,startResultsPhase:g,startPollPhase:_,startPollResultsPhase:b,goToPreviousPhase:E}=rn(),O=()=>{d(),i("Grouping phase started - cards revealed, grouping enabled")},T=()=>{n(!0)},L=re=>{c(re),h(),i(`Voting phase started - each user can cast ${re} votes`)},x=()=>{p(),i("Votes revealed! Voting is now frozen.")},P=()=>{g(),i("Results phase started - view top items by votes")},Y=()=>{_(),i("Poll phase started - rate the effectiveness of this retrospective")},J=()=>{b(),i("Poll results revealed - view effectiveness ratings")},te=()=>{const re={[ue.GROUPING]:"Returned to creation phase",[ue.INTERACTIONS]:"Returned to grouping phase",[ue.INTERACTION_REVEAL]:"Returned to voting phase",[ue.RESULTS]:"Returned to voting results phase",[ue.POLL]:"Returned to results phase",[ue.POLL_RESULTS]:"Returned to poll phase"};E();const de=re[s]||"Moved to previous phase";i(de)},W=()=>{switch(s){case ue.CREATION:return m.jsxs("div",{className:"workflow-phase",children:[m.jsxs("div",{className:"phase-info",children:[m.jsx("h3",{children:"Card Creation Phase"}),m.jsx("p",{children:"Add cards to the board. When ready, reveal cards and start grouping."})]}),m.jsx("div",{className:"phase-controls",children:m.jsxs("button",{className:"btn primary-btn",onClick:O,children:[m.jsx(cc,{size:16}),"Reveal Cards & Start Grouping"]})})]});case ue.GROUPING:return m.jsxs("div",{className:"workflow-phase",children:[m.jsxs("div",{className:"phase-info",children:[m.jsx("h3",{children:"Grouping Phase"}),m.jsx("p",{children:"Cards are revealed. Group related cards together by dragging them onto each other."})]}),m.jsxs("div",{className:"phase-controls",children:[m.jsxs("button",{className:"btn primary-btn",onClick:T,children:[m.jsx(rp,{size:16}),"Start Voting"]}),m.jsxs("button",{className:"btn secondary-btn",onClick:te,children:[m.jsx(Qi,{size:16}),"Go to Previous Phase"]})]})]});case ue.INTERACTIONS:return m.jsxs("div",{className:"workflow-phase",children:[m.jsxs("div",{className:"phase-info",children:[m.jsx("h3",{children:"Voting Phase"}),m.jsx("p",{children:"Add comments, votes, and reactions to cards and groups. Activity is hidden from other users."})]}),m.jsxs("div",{className:"phase-controls",children:[m.jsxs("button",{className:"btn primary-btn",onClick:x,children:[m.jsx(cc,{size:16}),"Reveal Votes"]}),m.jsxs("button",{className:"btn secondary-btn",onClick:te,children:[m.jsx(Qi,{size:16}),"Go to Previous Phase"]})]})]});case ue.INTERACTION_REVEAL:return m.jsxs("div",{className:"workflow-phase",children:[m.jsxs("div",{className:"phase-info",children:[m.jsx("h3",{children:"Voting Results Phase"}),m.jsx("p",{children:"All votes are now visible. Review the feedback and votes."})]}),m.jsxs("div",{className:"phase-controls",children:[m.jsxs("button",{className:"btn primary-btn",onClick:P,children:[m.jsx(Kh,{size:16}),"View Results"]}),m.jsxs("button",{className:"btn secondary-btn",onClick:te,children:[m.jsx(Qi,{size:16}),"Go to Previous Phase"]})]})]});case ue.RESULTS:return m.jsxs("div",{className:"workflow-phase",children:[m.jsxs("div",{className:"phase-info",children:[m.jsx("h3",{children:"Results Phase"}),m.jsx("p",{children:"Viewing the top-voted cards and groups. Use navigation to browse all results."})]}),m.jsxs("div",{className:"phase-controls",children:[m.jsxs("button",{className:"btn primary-btn",onClick:Y,children:[m.jsx(lc,{size:16}),"Start Effectiveness Poll"]}),m.jsxs("button",{className:"btn secondary-btn",onClick:te,children:[m.jsx(Qi,{size:16}),"Go to Previous Phase"]})]})]});case ue.POLL:return m.jsxs("div",{className:"workflow-phase",children:[m.jsxs("div",{className:"phase-info",children:[m.jsx("h3",{children:"Effectiveness Poll"}),m.jsx("p",{children:"Rate the effectiveness of this retrospective on a scale of 1-5. Your vote is private."})]}),m.jsxs("div",{className:"phase-controls",children:[m.jsxs("button",{className:"btn primary-btn",onClick:J,children:[m.jsx(lc,{size:16}),"View Poll Results"]}),m.jsxs("button",{className:"btn secondary-btn",onClick:te,children:[m.jsx(Qi,{size:16}),"Go to Previous Phase"]})]})]});case ue.POLL_RESULTS:return m.jsxs("div",{className:"workflow-phase",children:[m.jsxs("div",{className:"phase-info",children:[m.jsx("h3",{children:"Poll Results"}),m.jsx("p",{children:"View the distribution of effectiveness ratings and overall retrospective score."})]}),m.jsx("div",{className:"phase-controls",children:m.jsxs("button",{className:"btn secondary-btn",onClick:te,children:[m.jsx(Qi,{size:16}),"Go to Previous Phase"]})})]});default:return null}};return m.jsxs("div",{className:"workflow-controls",children:[W(),m.jsx(pk,{isOpen:e,onClose:()=>n(!1),onConfirm:L,currentLimit:o})]})},mk=({boardTitle:i,handleBoardTitleChange:e,handleBoardTitleBlur:n,copyShareUrl:s,handleExportBoard:o})=>m.jsxs("div",{className:"board-title-container",children:[m.jsx("input",{type:"text",id:"board-title",placeholder:Mr,value:i,onChange:e,onBlur:n,className:"header-input"}),m.jsxs("div",{className:"action-buttons",children:[m.jsx(fk,{}),m.jsx(hk,{}),m.jsx(dk,{}),m.jsxs("button",{id:"copy-share-url",className:"btn secondary-btn btn-with-icon",title:"Copy Share URL",onClick:s,children:[m.jsx(ip,{size:16}),"Share"]}),m.jsxs("button",{id:"export-board",className:"btn secondary-btn btn-with-icon",onClick:o,children:[m.jsx(tp,{size:16}),"Export"]})]})]}),vk=({handleCreateNewBoard:i,sortByVotes:e,setSortByVotes:n,votingEnabled:s,updateVotingEnabled:o,downvotingEnabled:c,updateDownvotingEnabled:d,multipleVotesAllowed:h,updateMultipleVotesAllowed:p,retrospectiveMode:g,updateRetrospectiveMode:_,sortDropdownOpen:b,setSortDropdownOpen:E,resetAllVotes:O,showNotification:T,darkMode:L,updateDarkMode:x})=>{const P=X.useRef(null);return X.useEffect(()=>{const Y=J=>{P.current&&!P.current.contains(J.target)&&E(!1)};return document.addEventListener("mousedown",Y),()=>{document.removeEventListener("mousedown",Y)}},[E]),m.jsxs("div",{className:"action-buttons",children:[m.jsxs("button",{id:"create-board",className:"btn btn-with-icon",onClick:i,children:[m.jsx(ap,{size:16}),"New Board"]}),m.jsxs("div",{className:"sort-dropdown-container",ref:P,children:[m.jsxs("button",{id:"settings-dropdown-button",className:"btn sort-dropdown-button",onClick:()=>E(!b),"aria-expanded":b,"aria-haspopup":"true",title:"Board settings and preferences",children:[m.jsx(op,{size:16}),"Settings",m.jsx(Co,{size:12,className:b?"dropdown-arrow rotated":"dropdown-arrow"})]}),b&&m.jsxs("div",{className:"sort-dropdown-menu",children:[m.jsxs("div",{className:"settings-section",children:[m.jsx("h4",{className:"settings-section-title",children:"Sort Cards"}),m.jsxs("button",{className:`sort-option ${e?"":"selected"}`,onClick:()=>{n(!1)},children:[m.jsx(Qh,{size:14}),"Chronological",!e&&m.jsx("span",{className:"checkmark",children:"✓"})]}),m.jsxs("button",{className:`sort-option ${e?"selected":""}`,onClick:()=>{n(!0)},children:[m.jsx(up,{size:14}),"By Votes",e&&m.jsx("span",{className:"checkmark",children:"✓"})]})]}),m.jsx("div",{className:"settings-divider"}),m.jsxs("div",{className:"settings-section",children:[m.jsx("h4",{className:"settings-section-title",children:"Allow voting?"}),m.jsxs("div",{className:"settings-boolean-option",children:[m.jsx("button",{className:`boolean-option ${s?"selected":""}`,onClick:()=>{o(!0)},children:"Yes"}),m.jsx("button",{className:`boolean-option ${s?"":"selected"}`,onClick:()=>{o(!1)},children:"No"})]})]}),s&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"settings-divider"}),m.jsxs("div",{className:"settings-section",children:[m.jsx("h4",{className:"settings-section-title",children:"Allow downvoting?"}),m.jsxs("div",{className:"settings-boolean-option",children:[m.jsx("button",{className:`boolean-option ${c?"selected":""}`,onClick:()=>{d(!0)},children:"Yes"}),m.jsx("button",{className:`boolean-option ${c?"":"selected"}`,onClick:()=>{d(!1)},children:"No"})]})]}),m.jsx("div",{className:"settings-divider"}),m.jsxs("div",{className:"settings-section",children:[m.jsx("h4",{className:"settings-section-title",children:"Allow users to vote multiple times on the same card?"}),m.jsxs("div",{className:"settings-boolean-option",children:[m.jsx("button",{className:`boolean-option ${h?"selected":""}`,onClick:()=>{p(!0)},children:"Yes"}),m.jsx("button",{className:`boolean-option ${h?"":"selected"}`,onClick:()=>{p(!1)},children:"No"})]})]}),m.jsx("div",{className:"settings-divider"}),m.jsxs("div",{className:"settings-section",children:[m.jsx("h4",{className:"settings-section-title",children:"Retrospective Mode"}),m.jsxs("div",{className:"settings-boolean-option",children:[m.jsx("button",{className:`boolean-option ${g?"selected":""}`,onClick:()=>{_(!0)},children:"On"}),m.jsx("button",{className:`boolean-option ${g?"":"selected"}`,onClick:()=>{_(!1)},children:"Off"})]}),m.jsx("p",{className:"settings-hint",children:"When enabled, new cards appear with hidden text until revealed"})]}),m.jsx("div",{className:"settings-divider"}),m.jsx("div",{className:"settings-section settings-section-padded",children:m.jsx("button",{className:"btn danger-btn settings-full-width-btn",onClick:()=>{O()&&T("All votes reset to zero")},children:"Reset all votes"})})]})]})]}),m.jsx("button",{id:"theme-toggle",className:"btn icon-btn",onClick:()=>{x(!L)},title:L?"Switch to light mode":"Switch to dark mode",children:L?m.jsx(cp,{size:16}):m.jsx(sp,{size:16})})]})},yk=({columns:i,sortByVotes:e,showNotification:n,addNewColumn:s})=>{const{retrospectiveMode:o,workflowPhase:c}=rn(),d=()=>Object.entries(i||{}).sort((p,g)=>p[0].localeCompare(g[0])),h=!o||c===ue.CREATION;return m.jsx("div",{className:"board-container",children:m.jsxs("div",{id:"board",className:"board",children:[d().map(([p,g])=>m.jsx(sk,{columnId:p,columnData:g,sortByVotes:e,showNotification:n},p)),h&&m.jsx("div",{className:"add-column-container",children:m.jsxs("button",{id:"add-column",className:"add-column",onClick:s,children:[m.jsx(Hc,{size:16}),"Add Column"]})})]})})};function _k({showNotification:i}){const[e,n]=A.useState(!1),[s,o]=A.useState(!1),{boardId:c,boardRef:d,boardTitle:h,setBoardTitle:p,columns:g,sortByVotes:_,setSortByVotes:b,votingEnabled:E,updateVotingEnabled:O,downvotingEnabled:T,updateDownvotingEnabled:L,multipleVotesAllowed:x,updateMultipleVotesAllowed:P,retrospectiveMode:Y,updateRetrospectiveMode:J,createNewBoard:te,openExistingBoard:W,resetAllVotes:re,updateBoardTitle:de,user:se,darkMode:fe,updateDarkMode:Re,workflowPhase:Ce,getAllUsersAddingCards:he}=rn(),[xe,Ze]=A.useState(!1);A.useEffect(()=>{const B=new URLSearchParams(window.location.search),F=B.get("board"),me=Rb(window.location.search);if(me.uiPrefs&&me.uiPrefs.darkMode!==void 0&&Re(me.uiPrefs.darkMode),F)W(F);else if(se){const ae=B.get("template");if(ae){const Z=no.find(z=>z.id===ae);if(Z){const z=te(Z.columns,`${Z.name} Board`,me.boardSettings);z?C(z):o(!0)}else o(!0)}else o(!0)}},[se]),A.useEffect(()=>{document.title=h&&h!==Mr?`${h} - Kanbanish`:"Kanbanish | Real-time anonymous kanban board"},[h]);const je=B=>{const F=B.target.value;p(F)},M=()=>{de(h)},ee=()=>{o(!0)},ce=(B,F=null)=>{const me=F?`${F} Board`:Mr,ae=Rb(window.location.search),Z=te(B,me,ae.boardSettings);Z&&(C(Z),i("New board created"),o(!1))},Te=()=>{!d||!c||q2(c).then(()=>{i("Column added")}).catch(()=>{})},C=B=>{try{const F=["voting","downvotes","multivote","votes","retro","sort","theme","template"],me=new URL(window.location.href),ae=me.searchParams;F.forEach(Z=>ae.delete(Z)),B&&ae.set("board",B),me.search=ae.toString(),window.history.pushState({},"",me.toString())}catch{}},$=()=>{if(c){const B=`${window.location.origin}${window.location.pathname}?board=${c}`;navigator.clipboard.writeText(B).then(()=>{i("Share URL copied to clipboard")}).catch(()=>{})}},U=()=>{n(!0),i("Preparing board export...")};return m.jsxs(m.Fragment,{children:[m.jsx("header",{children:m.jsxs("div",{className:"header-content",children:[m.jsx(mk,{boardTitle:h,handleBoardTitleChange:je,handleBoardTitleBlur:M,copyShareUrl:$,handleExportBoard:U}),m.jsx(vk,{handleCreateNewBoard:ee,sortByVotes:_,setSortByVotes:b,votingEnabled:E,updateVotingEnabled:O,downvotingEnabled:T,updateDownvotingEnabled:L,multipleVotesAllowed:x,updateMultipleVotesAllowed:P,retrospectiveMode:Y,updateRetrospectiveMode:J,sortDropdownOpen:xe,setSortDropdownOpen:Ze,resetAllVotes:re,showNotification:i,darkMode:fe,updateDarkMode:Re})]})}),m.jsx(F2,{usersAddingCards:he(),currentUserId:se==null?void 0:se.uid}),Y&&m.jsx(gk,{showNotification:i}),m.jsx("main",{children:Y&&Ce===ue.RESULTS?m.jsx(uk,{showNotification:i}):Y&&Ce===ue.POLL?m.jsx(ck,{}):Y&&Ce===ue.POLL_RESULTS?m.jsx(lk,{}):m.jsx(yk,{columns:g,sortByVotes:_,showNotification:i,addNewColumn:Te})}),m.jsx(ak,{isOpen:e,onClose:()=>{n(!1)},showNotification:i}),m.jsx(ok,{isOpen:s,onClose:()=>{c?o(!1):se&&ce(["To Do","In Progress","Done"],"Default")},onSelectTemplate:ce})]})}function bk(){const[i,e]=A.useState({message:"",show:!1}),n=A.useRef(null);X.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]);const s=o=>{n.current&&clearTimeout(n.current),e({message:o,show:!0}),n.current=setTimeout(()=>{e({message:"",show:!1}),n.current=null},3e3)};return m.jsx(tO,{backend:FO,children:m.jsx(G2,{children:m.jsxs("div",{className:"App","data-testid":"app-container",children:[m.jsx(_k,{showNotification:s}),m.jsx("div",{id:"notification",className:`notification ${i.show?"show":""}`,children:m.jsx("span",{id:"notification-message",children:i.message})})]})})})}const Ek=UT.createRoot(document.getElementById("root"));Ek.render(m.jsx(X.StrictMode,{children:m.jsx(bk,{})}));
